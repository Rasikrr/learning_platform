
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>api: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/Rasikrr/learning_platform/api/api.go (0.0%)</option>
				
				<option value="file1">github.com/Rasikrr/learning_platform/api/models.go (0.0%)</option>
				
				<option value="file2">github.com/Rasikrr/learning_platform/api/models_easyjson.go (0.0%)</option>
				
				<option value="file3">github.com/Rasikrr/learning_platform/cmd/app/main.go (0.0%)</option>
				
				<option value="file4">github.com/Rasikrr/learning_platform/configs/configs.go (0.0%)</option>
				
				<option value="file5">github.com/Rasikrr/learning_platform/docs/docs.go (0.0%)</option>
				
				<option value="file6">github.com/Rasikrr/learning_platform/internal/app/app.go (0.0%)</option>
				
				<option value="file7">github.com/Rasikrr/learning_platform/internal/cache/auth/cache.go (0.0%)</option>
				
				<option value="file8">github.com/Rasikrr/learning_platform/internal/cache/common.go (0.0%)</option>
				
				<option value="file9">github.com/Rasikrr/learning_platform/internal/clients/jdoodle/client.go (39.4%)</option>
				
				<option value="file10">github.com/Rasikrr/learning_platform/internal/clients/mail/client.go (100.0%)</option>
				
				<option value="file11">github.com/Rasikrr/learning_platform/internal/clients/mocks/jdoodle/mock.go (61.1%)</option>
				
				<option value="file12">github.com/Rasikrr/learning_platform/internal/databases/postgres.go (0.0%)</option>
				
				<option value="file13">github.com/Rasikrr/learning_platform/internal/databases/redis.go (0.0%)</option>
				
				<option value="file14">github.com/Rasikrr/learning_platform/internal/domain/entity/auth.go (0.0%)</option>
				
				<option value="file15">github.com/Rasikrr/learning_platform/internal/domain/entity/course_easyjson.go (0.0%)</option>
				
				<option value="file16">github.com/Rasikrr/learning_platform/internal/domain/entity/faq_easyjson.go (0.0%)</option>
				
				<option value="file17">github.com/Rasikrr/learning_platform/internal/domain/entity/session.go (0.0%)</option>
				
				<option value="file18">github.com/Rasikrr/learning_platform/internal/domain/entity/user.go (0.0%)</option>
				
				<option value="file19">github.com/Rasikrr/learning_platform/internal/domain/enum/account_role.go (0.0%)</option>
				
				<option value="file20">github.com/Rasikrr/learning_platform/internal/domain/enum/account_role_enumer.go (0.0%)</option>
				
				<option value="file21">github.com/Rasikrr/learning_platform/internal/domain/enum/course_progress_enumer.go (0.0%)</option>
				
				<option value="file22">github.com/Rasikrr/learning_platform/internal/domain/enum/difficulty_enumer.go (0.0%)</option>
				
				<option value="file23">github.com/Rasikrr/learning_platform/internal/domain/enum/programming_language_enumer.go (6.5%)</option>
				
				<option value="file24">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/confirm_register.go (0.0%)</option>
				
				<option value="file25">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/confirm_reset_password.go (0.0%)</option>
				
				<option value="file26">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/login.go (0.0%)</option>
				
				<option value="file27">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/logout.go (0.0%)</option>
				
				<option value="file28">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/models.go (0.0%)</option>
				
				<option value="file29">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/models_easyjson.go (0.0%)</option>
				
				<option value="file30">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/refresh.go (0.0%)</option>
				
				<option value="file31">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/register.go (0.0%)</option>
				
				<option value="file32">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/reset_password.go (0.0%)</option>
				
				<option value="file33">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth/router.go (0.0%)</option>
				
				<option value="file34">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/commands/models.go (0.0%)</option>
				
				<option value="file35">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/commands/models_easyjson.go (0.0%)</option>
				
				<option value="file36">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/commands/reset_quiz.go (0.0%)</option>
				
				<option value="file37">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/commands/router.go (0.0%)</option>
				
				<option value="file38">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/commands/submit_quiz.go (0.0%)</option>
				
				<option value="file39">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/commands/submit_task.go (0.0%)</option>
				
				<option value="file40">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/get_categories.go (0.0%)</option>
				
				<option value="file41">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/get_course.go (0.0%)</option>
				
				<option value="file42">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/get_courses.go (0.0%)</option>
				
				<option value="file43">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/get_topic_content.go (0.0%)</option>
				
				<option value="file44">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/get_topic_practical_task.go (0.0%)</option>
				
				<option value="file45">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/get_topic_quizzes.go (0.0%)</option>
				
				<option value="file46">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/models.go (0.0%)</option>
				
				<option value="file47">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/models_easyjson.go (0.0%)</option>
				
				<option value="file48">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries/router.go (0.0%)</option>
				
				<option value="file49">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/enrollments/enroll_to_course.go (0.0%)</option>
				
				<option value="file50">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/enrollments/models_easyjson.go (0.0%)</option>
				
				<option value="file51">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/enrollments/router.go (0.0%)</option>
				
				<option value="file52">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/faq/get_answers.go (0.0%)</option>
				
				<option value="file53">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/faq/models.go (0.0%)</option>
				
				<option value="file54">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/faq/models_easyjson.go (0.0%)</option>
				
				<option value="file55">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/faq/post_answer.go (0.0%)</option>
				
				<option value="file56">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/faq/post_question.go (0.0%)</option>
				
				<option value="file57">github.com/Rasikrr/learning_platform/internal/ports/http/handlers/faq/router.go (0.0%)</option>
				
				<option value="file58">github.com/Rasikrr/learning_platform/internal/ports/http/middlewares/auth.go (0.0%)</option>
				
				<option value="file59">github.com/Rasikrr/learning_platform/internal/ports/http/middlewares/cors.go (0.0%)</option>
				
				<option value="file60">github.com/Rasikrr/learning_platform/internal/ports/http/middlewares/enrollment.go (0.0%)</option>
				
				<option value="file61">github.com/Rasikrr/learning_platform/internal/ports/http/middlewares/panic.go (0.0%)</option>
				
				<option value="file62">github.com/Rasikrr/learning_platform/internal/ports/http/middlewares/util.go (0.0%)</option>
				
				<option value="file63">github.com/Rasikrr/learning_platform/internal/ports/http/server.go (0.0%)</option>
				
				<option value="file64">github.com/Rasikrr/learning_platform/internal/repositories/answers/models.go (0.0%)</option>
				
				<option value="file65">github.com/Rasikrr/learning_platform/internal/repositories/answers/repository.go (0.0%)</option>
				
				<option value="file66">github.com/Rasikrr/learning_platform/internal/repositories/categories/models.go (0.0%)</option>
				
				<option value="file67">github.com/Rasikrr/learning_platform/internal/repositories/categories/repository.go (0.0%)</option>
				
				<option value="file68">github.com/Rasikrr/learning_platform/internal/repositories/content/models.go (0.0%)</option>
				
				<option value="file69">github.com/Rasikrr/learning_platform/internal/repositories/content/repository.go (0.0%)</option>
				
				<option value="file70">github.com/Rasikrr/learning_platform/internal/repositories/courses/models.go (0.0%)</option>
				
				<option value="file71">github.com/Rasikrr/learning_platform/internal/repositories/courses/query_builder.go (0.0%)</option>
				
				<option value="file72">github.com/Rasikrr/learning_platform/internal/repositories/courses/repository.go (0.0%)</option>
				
				<option value="file73">github.com/Rasikrr/learning_platform/internal/repositories/enrollments/model.go (0.0%)</option>
				
				<option value="file74">github.com/Rasikrr/learning_platform/internal/repositories/enrollments/repository.go (0.0%)</option>
				
				<option value="file75">github.com/Rasikrr/learning_platform/internal/repositories/mocks/quizzes/mock.go (61.1%)</option>
				
				<option value="file76">github.com/Rasikrr/learning_platform/internal/repositories/mocks/quizzes_submissions/mock.go (100.0%)</option>
				
				<option value="file77">github.com/Rasikrr/learning_platform/internal/repositories/mocks/tasks/mock.go (44.0%)</option>
				
				<option value="file78">github.com/Rasikrr/learning_platform/internal/repositories/mocks/tasks_submissions/mock.go (100.0%)</option>
				
				<option value="file79">github.com/Rasikrr/learning_platform/internal/repositories/mocks/test_cases/mock.go (27.3%)</option>
				
				<option value="file80">github.com/Rasikrr/learning_platform/internal/repositories/question_categories/models.go (0.0%)</option>
				
				<option value="file81">github.com/Rasikrr/learning_platform/internal/repositories/question_categories/repository.go (0.0%)</option>
				
				<option value="file82">github.com/Rasikrr/learning_platform/internal/repositories/questions/models.go (0.0%)</option>
				
				<option value="file83">github.com/Rasikrr/learning_platform/internal/repositories/questions/repository.go (0.0%)</option>
				
				<option value="file84">github.com/Rasikrr/learning_platform/internal/repositories/quizzes/models.go (0.0%)</option>
				
				<option value="file85">github.com/Rasikrr/learning_platform/internal/repositories/quizzes/repository.go (0.0%)</option>
				
				<option value="file86">github.com/Rasikrr/learning_platform/internal/repositories/quizzes_submissions/repository.go (0.0%)</option>
				
				<option value="file87">github.com/Rasikrr/learning_platform/internal/repositories/tasks/models.go (0.0%)</option>
				
				<option value="file88">github.com/Rasikrr/learning_platform/internal/repositories/tasks/repository.go (0.0%)</option>
				
				<option value="file89">github.com/Rasikrr/learning_platform/internal/repositories/tasks_submissions/model.go (0.0%)</option>
				
				<option value="file90">github.com/Rasikrr/learning_platform/internal/repositories/tasks_submissions/repository.go (0.0%)</option>
				
				<option value="file91">github.com/Rasikrr/learning_platform/internal/repositories/test_cases/model.go (0.0%)</option>
				
				<option value="file92">github.com/Rasikrr/learning_platform/internal/repositories/test_cases/repository.go (0.0%)</option>
				
				<option value="file93">github.com/Rasikrr/learning_platform/internal/repositories/topics/models.go (0.0%)</option>
				
				<option value="file94">github.com/Rasikrr/learning_platform/internal/repositories/topics/repository.go (0.0%)</option>
				
				<option value="file95">github.com/Rasikrr/learning_platform/internal/repositories/users/model.go (0.0%)</option>
				
				<option value="file96">github.com/Rasikrr/learning_platform/internal/repositories/users/repository.go (0.0%)</option>
				
				<option value="file97">github.com/Rasikrr/learning_platform/internal/services/auth/service.go (0.0%)</option>
				
				<option value="file98">github.com/Rasikrr/learning_platform/internal/services/courses/queries.go (0.0%)</option>
				
				<option value="file99">github.com/Rasikrr/learning_platform/internal/services/courses/service.go (0.0%)</option>
				
				<option value="file100">github.com/Rasikrr/learning_platform/internal/services/enrollments/service.go (0.0%)</option>
				
				<option value="file101">github.com/Rasikrr/learning_platform/internal/services/faq/service.go (0.0%)</option>
				
				<option value="file102">github.com/Rasikrr/learning_platform/internal/services/submissions/quizzes.go (66.7%)</option>
				
				<option value="file103">github.com/Rasikrr/learning_platform/internal/services/submissions/service.go (100.0%)</option>
				
				<option value="file104">github.com/Rasikrr/learning_platform/internal/services/submissions/tasks.go (40.8%)</option>
				
				<option value="file105">github.com/Rasikrr/learning_platform/internal/services/users/service.go (0.0%)</option>
				
				<option value="file106">github.com/Rasikrr/learning_platform/internal/util/hash.go (0.0%)</option>
				
				<option value="file107">github.com/Rasikrr/learning_platform/internal/util/slices_equal.go (100.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package api

import (
        "context"
        "encoding/json"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/ports/http/middlewares"
        "io"
        "net/http"
)

type ErrorResponse struct {
        Error  string `json:"error"`
        Status int    `json:"status"`
}

type QueryParametersGetter interface {
        GetQueryParameters(r *http.Request) error
}

type ParametersGetter interface {
        GetParameters(r *http.Request) error
}

// nolint: errcheck
func SendData(w http.ResponseWriter, data interface{}, statusCode int) <span class="cov0" title="0">{
        w.Header().Set("Content-Type", "application/json")
        w.WriteHeader(statusCode)

        marshaller, ok := data.(json.Marshaler)
        if ok </span><span class="cov0" title="0">{
                bb, err := marshaller.MarshalJSON()
                if err != nil </span><span class="cov0" title="0">{
                        SendError(w, http.StatusInternalServerError, err)
                        return
                }</span>
                <span class="cov0" title="0">w.Write(bb)
                return</span>
        }
        <span class="cov0" title="0">bb, err := json.Marshal(data)
        if err != nil </span><span class="cov0" title="0">{
                SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">w.Write(bb)</span>
}

func GetData(r *http.Request, data interface{}) error <span class="cov0" title="0">{
        queryParams, ok := data.(QueryParametersGetter)
        if ok </span><span class="cov0" title="0">{
                if err := queryParams.GetQueryParameters(r); err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">return nil</span>
        }
        <span class="cov0" title="0">params, ok := data.(ParametersGetter)
        if ok </span><span class="cov0" title="0">{
                if err := params.GetParameters(r); err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">return nil</span>
        }
        <span class="cov0" title="0">defer r.Body.Close()
        bb, err := io.ReadAll(r.Body)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if len(bb) &gt; 0 </span><span class="cov0" title="0">{
                unmarshaller, ok := data.(json.Unmarshaler)
                if ok </span><span class="cov0" title="0">{
                        return unmarshaller.UnmarshalJSON(bb)
                }</span>
        }
        <span class="cov0" title="0">return nil</span>
}

// nolint: errcheck
func SendError(w http.ResponseWriter, statusCode int, err error) <span class="cov0" title="0">{
        w.Header().Set("Content-Type", "application/json")
        w.WriteHeader(statusCode)
        r := ErrorResponse{
                Error:  err.Error(),
                Status: statusCode,
        }
        bb, _ := json.Marshal(r)
        w.Write(bb)
}</span>

func GetSession(ctx context.Context) (*entity.Session, error) <span class="cov0" title="0">{
        token := ctx.Value(middlewares.SessionKey)
        if token == nil </span><span class="cov0" title="0">{
                return nil, errors.New("session is empty")
        }</span>
        <span class="cov0" title="0">s, ok := token.(*entity.Session)
        if !ok </span><span class="cov0" title="0">{
                return nil, errors.New("session is not Session")
        }</span>
        <span class="cov0" title="0">return s, nil</span>
}

func GetUserFromSession(session *entity.Session) *entity.User <span class="cov0" title="0">{
        return &amp;entity.User{
                ID:          session.UserID,
                Email:       session.Email,
                AccountRole: session.Role,
        }
}</span>
</pre>
		
		<pre class="file" id="file1" style="display: none">package api

//go:generate easyjson -all models.go

type EmptySuccessResponse struct {
        Status string `json:"status"`
}

func NewEmptySuccessResponse() EmptySuccessResponse <span class="cov0" title="0">{
        return EmptySuccessResponse{
                Status: "success",
        }
}</span>
</pre>
		
		<pre class="file" id="file2" style="display: none">// Code generated by easyjson for marshaling/unmarshaling. DO NOT EDIT.

package api

import (
        json "encoding/json"
        easyjson "github.com/mailru/easyjson"
        jlexer "github.com/mailru/easyjson/jlexer"
        jwriter "github.com/mailru/easyjson/jwriter"
)

// suppress unused package warning
var (
        _ *json.RawMessage
        _ *jlexer.Lexer
        _ *jwriter.Writer
        _ easyjson.Marshaler
)

func easyjsonD2b7633eDecodeGithubComRasikrrAssigment2Api(in *jlexer.Lexer, out *EmptySuccessResponse) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "status":<span class="cov0" title="0">
                        out.Status = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrAssigment2Api(out *jwriter.Writer, in EmptySuccessResponse) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"status\":"
                out.RawString(prefix[1:])
                out.String(string(in.Status))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v EmptySuccessResponse) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrAssigment2Api(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v EmptySuccessResponse) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrAssigment2Api(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *EmptySuccessResponse) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrAssigment2Api(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *EmptySuccessResponse) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrAssigment2Api(l, v)
}</span>
</pre>
		
		<pre class="file" id="file3" style="display: none">package main

import (
        "fmt"
        "github.com/google/uuid"
)

const (
        appName = "assigment_2"
)

func main() <span class="cov0" title="0">{
        //ctx := context.Background()
        //a := app.InitApp(ctx, appName)
        //if err := a.Start(ctx); err != nil {
        //        log.Fatal(err)
        //}
        for range 1 </span><span class="cov0" title="0">{
                fmt.Println(uuid.New().String())
        }</span>
}
</pre>
		
		<pre class="file" id="file4" style="display: none">package configs

import (
        "fmt"
        "github.com/BurntSushi/toml"
        "github.com/joho/godotenv"
        "log"
        "os"
        "strconv"
        "time"
)

const (
        devFileConfig  = "./configs/config.toml"
        prodFileConfig = "./configs/config_prod.toml"
)

const (
        Development = "dev"
        Production  = "prod"
)

type Config struct {
        Server   ServerConfig   `toml:"server"`
        Postgres PostgresConfig `toml:"postgres"`
        Redis    RedisConfig    `toml:"redis"`
        Auth     AuthConfig     `toml:"auth"`
        Mail     MailConfig
        JDoodle  JDoodleConfig
}

type AuthConfig struct {
        Secret               string        `toml:"secret"`
        AccessTokenLifeTime  time.Duration `toml:"access_token_lifetime"`
        RefreshTokenLifeTime time.Duration `toml:"refresh_token_lifetime"`
}
type ServerConfig struct {
        Host string `toml:"host"`
        Port string `toml:"port"`
}

type RedisConfig struct {
        Host     string `toml:"host"`
        Port     string `toml:"port"`
        User     string `toml:"user"`
        Password string `toml:"password"`
        DB       int    `toml:"db"`
}

type PostgresConfig struct {
        DBName              string        `toml:"db_name"`
        User                string        `toml:"user"`
        Password            string        `toml:"password"`
        Host                string        `toml:"host"`
        Port                string        `toml:"port"`
        MaxConns            int           `toml:"max_conns"`
        MinConns            int           `toml:"min_conns"`
        MaxIdleConnIdleTime time.Duration `toml:"max_idle_conn_time"`
        DSN                 string        `toml:"dsn"`
}

type MailConfig struct {
        Host     string `toml:"host"`
        Port     int    `toml:"port"`
        User     string `toml:"user"`
        Password string `toml:"password"`
        From     string `toml:"from"`
}

type JDoodleConfig struct {
        URL          string
        ClientID     string
        ClientSecret string
}

func Parse() (Config, error) <span class="cov0" title="0">{
        err := godotenv.Load()
        if err != nil </span><span class="cov0" title="0">{
                log.Println("failed to load .env file")
        }</span>

        <span class="cov0" title="0">env := os.Getenv("ENV")

        var config Config
        switch env </span>{
        case Development:<span class="cov0" title="0">
                if _, err := toml.DecodeFile(devFileConfig, &amp;config); err != nil </span><span class="cov0" title="0">{
                        return Config{}, err
                }</span>
        case Production:<span class="cov0" title="0">
                if _, err := toml.DecodeFile(prodFileConfig, &amp;config); err != nil </span><span class="cov0" title="0">{
                        return Config{}, err
                }</span>
        default:<span class="cov0" title="0">
                return Config{}, fmt.Errorf("invalid environment: %s", env)</span>
        }
        <span class="cov0" title="0">log.Printf("Initializing config for env: %s\n", env)

        config.Postgres.DBName = os.Getenv("POSTGRES_DB")
        config.Postgres.User = os.Getenv("POSTGRES_USER")
        config.Postgres.Password = os.Getenv("POSTGRES_PASSWORD")
        config.Postgres.Host = os.Getenv("POSTGRES_HOST")
        config.Postgres.Port = os.Getenv("POSTGRES_PORT")
        config.Postgres.DSN = os.Getenv("POSTGRES_DSN")

        config.Mail.Host = os.Getenv("MAIL_HOST")
        mailPort, err := strconv.Atoi(os.Getenv("MAIL_PORT"))
        if err != nil </span><span class="cov0" title="0">{
                return Config{}, err
        }</span>

        <span class="cov0" title="0">config.JDoodle.URL = os.Getenv("JDOODLE_URL")
        config.JDoodle.ClientID = os.Getenv("JDOODLE_CLIENT_ID")
        config.JDoodle.ClientSecret = os.Getenv("JDOODLE_CLIENT_SECRET")

        config.Mail.Port = mailPort
        config.Mail.User = os.Getenv("MAIL_USER")
        config.Mail.Password = os.Getenv("MAIL_PASSWORD")
        config.Mail.From = os.Getenv("MAIL_FROM")

        config.Redis.User = os.Getenv("REDIS_USER")
        config.Redis.Password = os.Getenv("REDIS_PASSWORD")

        config.Auth.Secret = os.Getenv("JWT_SECRET")

        return config, nil</span>
}
</pre>
		
		<pre class="file" id="file5" style="display: none">// Package docs Code generated by swaggo/swag. DO NOT EDIT
package docs

import "github.com/swaggo/swag"

const docTemplate = `{
    "schemes": {{ marshal .Schemes }},
    "swagger": "2.0",
    "info": {
        "description": "{{escape .Description}}",
        "title": "{{.Title}}",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "Pick me team",
            "url": "https://github.com/Rasikrr/learning_platform",
            "email": "leaning_platform@gmail.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "{{.Version}}"
    },
    "host": "{{.Host}}",
    "basePath": "{{.BasePath}}",
    "paths": {
        "/api/v1/auth/confirm": {
            "post": {
                "description": "Confirm user registration using confirmation code",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Confirm register",
                "parameters": [
                    {
                        "description": "user email and confirmation code",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/auth.ConfirmRegisterRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/auth.Auth"
                        }
                    }
                }
            }
        },
        "/api/v1/auth/confirm_reset_password": {
            "post": {
                "description": "Confirm user password reset using confirmation code",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Confirm password reset",
                "parameters": [
                    {
                        "description": "user email and confirmation code",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/auth.ConfirmResetPasswordRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/api.EmptySuccessResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "description": "Login user with email and password",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Login user",
                "parameters": [
                    {
                        "description": "user credentials",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/auth.LoginRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/auth.Auth"
                        }
                    }
                }
            }
        },
        "/api/v1/auth/refresh": {
            "post": {
                "description": "Refresh user tokens",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Refresh token",
                "parameters": [
                    {
                        "description": "user's refresh token",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/auth.RefreshRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/auth.Auth"
                        }
                    }
                }
            }
        },
        "/api/v1/auth/register": {
            "post": {
                "description": "Register user with email and password and confirm password. Then send confirmation code to user email",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Register user",
                "parameters": [
                    {
                        "description": "user credentials",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/auth.RegisterRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/api.EmptySuccessResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/auth/reset_password": {
            "post": {
                "description": "Reset user password with email and password and confirm password. Then send confirmation code to user email",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Reset password",
                "parameters": [
                    {
                        "description": "user credentials",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/auth.ResetPasswordRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/api.EmptySuccessResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/courses": {
            "post": {
                "description": "Get courses for catalog",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "Get courses",
                "parameters": [
                    {
                        "description": "request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/queries.getCoursesListRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/queries.getCoursesListResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/courses/categories": {
            "get": {
                "description": "Get courses categories",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "Get courses categories",
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/queries.getCategoriesListResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/courses/enroll": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "enroll to course by course id",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "enroll to course",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Authorization token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "description": "request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/enrollments.enrollToCourseRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/api.EmptySuccessResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/courses/{course_id}/topic/{topic_id}/content": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Get course topic content by topic id",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "Get course topic content",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Authorization token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "course id",
                        "name": "course_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "topic id",
                        "name": "topic_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/entity.TopicContent"
                        }
                    }
                }
            }
        },
        "/api/v1/courses/{course_id}/topic/{topic_id}/quiz/reset": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "submit quiz",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "submit quiz",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Authorization token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "course id",
                        "name": "course_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "topic id",
                        "name": "topic_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/api.EmptySuccessResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/courses/{course_id}/topic/{topic_id}/quiz/submit": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "submit quiz",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "submit quiz",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Authorization token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "course id",
                        "name": "course_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "topic id",
                        "name": "topic_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/commands.submitQuizRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/api.EmptySuccessResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/courses/{course_id}/topic/{topic_id}/quizzes": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "get quizzes list by topic id",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "get quizzes by topic id",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Authorization token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "course id",
                        "name": "course_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "topic id",
                        "name": "topic_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/queries.getTopicQuizzesResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/courses/{course_id}/topic/{topic_id}/tasks/{order}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Get course topic tasks by topic id and. Also you must pass task order",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "Get course topic tasks",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Authorization token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "course id",
                        "name": "course_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "topic id",
                        "name": "topic_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "number of task",
                        "name": "order",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/entity.PracticalTask"
                        }
                    }
                }
            }
        },
        "/api/v1/courses/{id}": {
            "get": {
                "description": "Get detailed course info with topics by id",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "Get course by id",
                "parameters": [
                    {
                        "type": "string",
                        "description": "course id",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/queries.getCourseDetailedResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "api.EmptySuccessResponse": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "string"
                }
            }
        },
        "auth.Auth": {
            "type": "object",
            "properties": {
                "access_token": {
                    "type": "string"
                },
                "refresh_token": {
                    "type": "string"
                }
            }
        },
        "auth.ConfirmRegisterRequest": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                }
            }
        },
        "auth.ConfirmResetPasswordRequest": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                }
            }
        },
        "auth.LoginRequest": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "auth.RefreshRequest": {
            "type": "object",
            "properties": {
                "refresh_token": {
                    "type": "string"
                }
            }
        },
        "auth.RegisterRequest": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                },
                "password_confirm": {
                    "type": "string"
                }
            }
        },
        "auth.ResetPasswordRequest": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                },
                "password_confirm": {
                    "type": "string"
                }
            }
        },
        "commands.answerQuiz": {
            "type": "object",
            "properties": {
                "answer": {
                    "type": "array",
                    "items": {
                        "type": "boolean"
                    }
                },
                "question_id": {
                    "type": "string"
                }
            }
        },
        "commands.submitQuizRequest": {
            "type": "object",
            "properties": {
                "answers": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/commands.answerQuiz"
                    }
                }
            }
        },
        "enrollments.enrollToCourseRequest": {
            "type": "object",
            "properties": {
                "course_id": {
                    "type": "string"
                }
            }
        },
        "entity.PracticalTask": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "difficulty_level": {
                    "$ref": "#/definitions/enum.Difficulty"
                },
                "expected_output": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "order_number": {
                    "type": "integer"
                },
                "starter_code": {
                    "type": "string"
                },
                "topic_id": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "entity.TopicContent": {
            "type": "object",
            "properties": {
                "additional_resources": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "content": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "image_urls": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "topic_id": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "video_urls": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "enum.Difficulty": {
            "type": "integer",
            "enum": [
                0,
                1,
                2
            ],
            "x-enum-varnames": [
                "DifficultyEasy",
                "DifficultyMedium",
                "DifficultyHard"
            ]
        },
        "queries.category": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "created_by": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "queries.getCategoriesListResponse": {
            "type": "object",
            "properties": {
                "categories": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/queries.category"
                    }
                }
            }
        },
        "queries.getCourseDetailedResponse": {
            "type": "object",
            "properties": {
                "course": {
                    "$ref": "#/definitions/queries.getCourseResponse"
                },
                "topics": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/queries.topic"
                    }
                }
            }
        },
        "queries.getCourseResponse": {
            "type": "object",
            "properties": {
                "category": {
                    "$ref": "#/definitions/queries.category"
                },
                "created_at": {
                    "type": "string"
                },
                "created_by": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "image_url": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "queries.getCoursesListRequest": {
            "type": "object",
            "properties": {
                "categories_ids": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "limit": {
                    "type": "integer"
                },
                "offset": {
                    "type": "integer"
                }
            }
        },
        "queries.getCoursesListResponse": {
            "type": "object",
            "properties": {
                "courses": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/queries.getCourseResponse"
                    }
                }
            }
        },
        "queries.getTopicQuizzesResponse": {
            "type": "object",
            "properties": {
                "quizzes": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/queries.quizz"
                    }
                }
            }
        },
        "queries.quizz": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "multiple_choice": {
                    "type": "boolean"
                },
                "options": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "question": {
                    "type": "string"
                },
                "topic_id": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "queries.topic": {
            "type": "object",
            "properties": {
                "course_id": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "order_number": {
                    "type": "integer"
                },
                "title": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        }
    }
}`

// SwaggerInfo holds exported Swagger Info so clients can modify it
var SwaggerInfo = &amp;swag.Spec{
        Version:          "1.0",
        Host:             "localhost:8081",
        BasePath:         "/",
        Schemes:          []string{},
        Title:            "Learning Platform API",
        Description:      "This is docs for Learning Platform API",
        InfoInstanceName: "swagger",
        SwaggerTemplate:  docTemplate,
        LeftDelim:        "{{",
        RightDelim:       "}}",
}

func init() <span class="cov0" title="0">{
        swag.Register(SwaggerInfo.InstanceName(), SwaggerInfo)
}</span>
</pre>
		
		<pre class="file" id="file6" style="display: none">package app

import (
        "context"
        "errors"
        "fmt"
        "github.com/Rasikrr/learning_platform/configs"
        "github.com/Rasikrr/learning_platform/internal/cache"
        authC "github.com/Rasikrr/learning_platform/internal/cache/auth"
        "github.com/Rasikrr/learning_platform/internal/clients/jdoodle"
        "github.com/Rasikrr/learning_platform/internal/clients/mail"
        "github.com/Rasikrr/learning_platform/internal/databases"
        http "github.com/Rasikrr/learning_platform/internal/ports/http"
        "github.com/Rasikrr/learning_platform/internal/repositories/answers"
        categoriesR "github.com/Rasikrr/learning_platform/internal/repositories/categories"
        contentR "github.com/Rasikrr/learning_platform/internal/repositories/content"
        coursesR "github.com/Rasikrr/learning_platform/internal/repositories/courses"
        enrollmentsR "github.com/Rasikrr/learning_platform/internal/repositories/enrollments"
        questionCategories "github.com/Rasikrr/learning_platform/internal/repositories/question_categories"
        question "github.com/Rasikrr/learning_platform/internal/repositories/questions"
        quizzesR "github.com/Rasikrr/learning_platform/internal/repositories/quizzes"
        quizzesSubmissionsR "github.com/Rasikrr/learning_platform/internal/repositories/quizzes_submissions"
        tasksR "github.com/Rasikrr/learning_platform/internal/repositories/tasks"
        tasksSubmissionsR "github.com/Rasikrr/learning_platform/internal/repositories/tasks_submissions"
        testCasesR "github.com/Rasikrr/learning_platform/internal/repositories/test_cases"
        topicsR "github.com/Rasikrr/learning_platform/internal/repositories/topics"
        usersR "github.com/Rasikrr/learning_platform/internal/repositories/users"
        authS "github.com/Rasikrr/learning_platform/internal/services/auth"
        coursesS "github.com/Rasikrr/learning_platform/internal/services/courses"
        enrollmentsS "github.com/Rasikrr/learning_platform/internal/services/enrollments"
        faqS "github.com/Rasikrr/learning_platform/internal/services/faq"
        submissionS "github.com/Rasikrr/learning_platform/internal/services/submissions"
        "github.com/Rasikrr/learning_platform/internal/util"
        "github.com/Rasikrr/learning_platform/internal/workers"
        "github.com/hashicorp/go-multierror"
        "github.com/redis/go-redis/v9"
        "log"
        HTTP "net/http"
        "os"
        "os/signal"
        "sync"
        "syscall"
)

type Starter interface {
        Start() error
}

type App struct {
        name     string
        config   configs.Config
        postgres *databases.Postgres

        workers []workers.Worker

        usersRepository              usersR.Repository
        courseRepository             coursesR.Repository
        categoriesRepository         categoriesR.Repository
        quizzesRepository            quizzesR.Repository
        topicsRepository             topicsR.Repository
        tasksRepository              tasksR.Repository
        contentRepository            contentR.Repository
        enrollmentsRepository        enrollmentsR.Repository
        quizzesSubmissionRepository  quizzesSubmissionsR.Repository
        answersRepository            answers.Repository
        questionsRepository          question.Repository
        questionCategoriesRepository questionCategories.Repository
        tasksSubmissionsRepository   tasksSubmissionsR.Repository
        testCasesRepository          testCasesR.Repository

        redisClient *redis.Client
        cacheClient cache.Cache
        authCache   authC.Cache
        hasher      util.Hasher

        mailClient         mail.Client
        taskExecutorClient jdoodle.Client

        authService        authS.Service
        courseService      coursesS.Service
        enrollmentsService enrollmentsS.Service
        faqService         faqS.Service
        submissionsService submissionS.Service

        httpServer *http.Server
}

// nolint: gocritic
func InitApp(ctx context.Context, name string) *App <span class="cov0" title="0">{
        cfg, err := configs.Parse()
        if err != nil </span><span class="cov0" title="0">{
                panic(err)</span>
        }
        <span class="cov0" title="0">app := &amp;App{
                name:   name,
                config: cfg,
        }
        for _, init := range []func(ctx context.Context) error{
                app.InitPostgres,
                app.InitRedis,
                app.InitRepositories,
                app.InitUtil,
                app.InitCache,
                app.InitClients,
                app.InitServices,
                app.InitHTTPServer,
                //app.InitWorkers,
        } </span><span class="cov0" title="0">{
                if err := init(ctx); err != nil </span><span class="cov0" title="0">{
                        log.Fatalf("init app error: %v", err)
                }</span>
        }
        <span class="cov0" title="0">return app</span>
}

func (a *App) InitRepositories(_ context.Context) error <span class="cov0" title="0">{
        a.usersRepository = usersR.NewRepository(a.postgres)
        a.courseRepository = coursesR.NewRepository(a.postgres)
        a.categoriesRepository = categoriesR.NewRepository(a.postgres)
        a.quizzesRepository = quizzesR.NewRepository(a.postgres)
        a.topicsRepository = topicsR.NewRepository(a.postgres)
        a.tasksRepository = tasksR.NewRepository(a.postgres)
        a.answersRepository = answers.NewRepository(a.postgres)
        a.questionsRepository = question.NewRepository(a.postgres)
        a.questionCategoriesRepository = questionCategories.NewRepository(a.postgres)
        a.contentRepository = contentR.NewRepository(a.postgres)
        a.enrollmentsRepository = enrollmentsR.NewRepository(a.postgres)
        a.quizzesSubmissionRepository = quizzesSubmissionsR.NewRepository(a.postgres)
        a.tasksSubmissionsRepository = tasksSubmissionsR.NewRepository(a.postgres)
        a.testCasesRepository = testCasesR.NewRepository(a.postgres)
        return nil
}</span>

func (a *App) InitUtil(_ context.Context) error <span class="cov0" title="0">{
        a.hasher = util.NewHasher()
        return nil
}</span>

func (a *App) InitClients(_ context.Context) error <span class="cov0" title="0">{
        a.mailClient = mail.NewClient(&amp;a.config)
        a.taskExecutorClient = jdoodle.NewClient(&amp;a.config)
        return nil
}</span>

func (a *App) InitRedis(ctx context.Context) error <span class="cov0" title="0">{
        var err error
        a.redisClient, err = databases.NewRedis(ctx, &amp;a.config)
        if err != nil </span><span class="cov0" title="0">{
                return fmt.Errorf("failed to init redis: %w", err)
        }</span>
        <span class="cov0" title="0">log.Println("Redis connected")
        return nil</span>
}

func (a *App) InitCache(_ context.Context) error <span class="cov0" title="0">{
        a.cacheClient = cache.NewRedisCache(a.redisClient)
        a.authCache = authC.NewCache(a.cacheClient)
        return nil
}</span>

func (a *App) InitServices(_ context.Context) error <span class="cov0" title="0">{
        a.authService = authS.NewService(
                a.config.Auth.Secret,
                a.config.Auth.AccessTokenLifeTime,
                a.config.Auth.RefreshTokenLifeTime,
                a.mailClient, a.usersRepository, a.hasher, a.authCache)

        a.courseService = coursesS.NewService(
                a.courseRepository,
                a.categoriesRepository,
                a.topicsRepository,
                a.quizzesRepository,
                a.tasksRepository,
                a.contentRepository,
        )

        a.enrollmentsService = enrollmentsS.NewService(
                a.courseRepository,
                a.enrollmentsRepository,
        )
        a.faqService = faqS.NewService(
                a.questionsRepository,
                a.questionCategoriesRepository,
                a.answersRepository,
        )

        a.courseService = coursesS.NewService(
                a.courseRepository,
                a.categoriesRepository,
                a.topicsRepository,
                a.quizzesRepository,
                a.tasksRepository,
                a.contentRepository,
        )

        a.submissionsService = submissionS.NewService(
                a.quizzesRepository,
                a.quizzesSubmissionRepository,
                a.tasksSubmissionsRepository,
                a.testCasesRepository,
                a.tasksRepository,
                a.taskExecutorClient,
        )
        return nil
}</span>

func (a *App) InitHTTPServer(_ context.Context) error <span class="cov0" title="0">{
        a.httpServer = http.NewServer(
                &amp;a.config,
                a.authService,
                a.courseService,
                a.enrollmentsService,
                a.submissionsService,
                a.faqService,
        )
        return nil
}</span>

// nolint
//func (a *App) InitWorkers(_ context.Context) error {
//        a.workers = []workers.Worker{
//                dbInfo.NewWorker(a.usersRepository),
//        }
//        return nil
//}

func (a *App) Start(ctx context.Context) error <span class="cov0" title="0">{
        ctx, cancel := context.WithCancel(ctx)
        defer cancel()

        stop := make(chan struct{})

        go a.handleShutdown(cancel, stop)

        fns := make([]any, 0, len(a.workers)+1)
        fns = append(fns, a.httpServer.Start)
        for _, w := range a.workers </span><span class="cov0" title="0">{
                fns = append(fns, w.Run)
        }</span>

        <span class="cov0" title="0">if err := runParallel(ctx, fns...); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">&lt;-stop
        return nil</span>
}

func (a *App) handleShutdown(cancel context.CancelFunc, s chan struct{}) <span class="cov0" title="0">{
        stop := make(chan os.Signal, 1)
        signal.Notify(stop, os.Interrupt, syscall.SIGTERM, syscall.SIGINT)

        &lt;-stop

        log.Println("Received shutdown signal")

        if err := a.httpServer.Shutdown(context.Background()); err != nil </span><span class="cov0" title="0">{
                log.Println("Error while shutting down HTTP server:", err)
        }</span>
        <span class="cov0" title="0">cancel()
        close(s)</span>
}

func (a *App) InitPostgres(ctx context.Context) error <span class="cov0" title="0">{
        var err error
        a.postgres, err = databases.NewPostgres(ctx, &amp;a.config)
        if err != nil </span><span class="cov0" title="0">{
                return fmt.Errorf("failed to init postgres: %w", err)
        }</span>
        <span class="cov0" title="0">log.Println("Postgres connected")
        return nil</span>
}

func runParallel(ctx context.Context, fns ...any) error <span class="cov0" title="0">{
        var (
                wg     sync.WaitGroup
                errRes *multierror.Error
        )
        for _, f := range fns </span><span class="cov0" title="0">{
                wg.Add(1)
                go func(fn any) </span><span class="cov0" title="0">{
                        defer wg.Done()
                        switch fun := fn.(type) </span>{
                        case func() error:<span class="cov0" title="0">
                                if err := fun(); err != nil </span><span class="cov0" title="0">{
                                        if errors.Is(err, HTTP.ErrServerClosed) </span><span class="cov0" title="0">{
                                                log.Println("HTTP server closed gracefully")
                                                return
                                        }</span>
                                        <span class="cov0" title="0">errRes = multierror.Append(errRes, err)</span>
                                }
                        case func(ctx context.Context) error:<span class="cov0" title="0">
                                if err := fun(ctx); err != nil </span><span class="cov0" title="0">{
                                        errRes = multierror.Append(errRes, err)
                                }</span>
                        default:<span class="cov0" title="0">
                                log.Printf("unknown function type: %T", fn)</span>
                        }
                }(f)
        }
        <span class="cov0" title="0">wg.Wait()
        return errRes.ErrorOrNil()</span>
}
</pre>
		
		<pre class="file" id="file7" style="display: none">package auth

import (
        "context"
        "errors"
        "fmt"
        cache2 "github.com/Rasikrr/learning_platform/internal/cache"
        "github.com/redis/go-redis/v9"
        "time"
)

const (
        codeLifeTime    = time.Minute * 5
        credsLifeTime   = time.Minute * 6
        codeKey         = "code:%s"
        passwordHashKey = "password:%s"
)

type Cache interface {
        GetCode(ctx context.Context, email string) (string, error)
        SetCode(ctx context.Context, email string, code string) error
        GetPasswordHash(ctx context.Context, email string) (string, error)
        SetPasswordHash(ctx context.Context, email string, passwordHash string) error
}

type cache struct {
        client cache2.Cache
}

func NewCache(client cache2.Cache) Cache <span class="cov0" title="0">{
        return &amp;cache{
                client: client,
        }
}</span>

func (c *cache) GetCode(ctx context.Context, email string) (string, error) <span class="cov0" title="0">{
        key := c.genKey(codeKey, email)
        code, err := c.client.Get(ctx, key)
        if err != nil </span><span class="cov0" title="0">{
                if errors.Is(err, redis.Nil) </span><span class="cov0" title="0">{
                        return "", errors.New("code is empty")
                }</span>
                <span class="cov0" title="0">return "", err</span>
        }
        <span class="cov0" title="0">val, ok := code.(string)
        if !ok </span><span class="cov0" title="0">{
                return "", errors.New("code is not string")
        }</span>
        <span class="cov0" title="0">return val, nil</span>
}

func (c *cache) SetCode(ctx context.Context, email string, code string) error <span class="cov0" title="0">{
        key := c.genKey(codeKey, email)
        return c.client.SetWithExpiration(ctx, key, code, codeLifeTime)
}</span>

func (c *cache) GetPasswordHash(ctx context.Context, email string) (string, error) <span class="cov0" title="0">{
        key := c.genKey(passwordHashKey, email)
        pass, err := c.client.Get(ctx, key)
        if err != nil </span><span class="cov0" title="0">{
                if errors.Is(err, redis.Nil) </span><span class="cov0" title="0">{
                        return "", errors.New("password hash is empty")
                }</span>
                <span class="cov0" title="0">return "", err</span>
        }
        <span class="cov0" title="0">val, ok := pass.(string)
        if !ok </span><span class="cov0" title="0">{
                return "", errors.New("password hash is not string")
        }</span>
        <span class="cov0" title="0">return val, nil</span>
}

func (c *cache) SetPasswordHash(ctx context.Context, email string, passwordHash string) error <span class="cov0" title="0">{
        key := c.genKey(passwordHashKey, email)
        return c.client.SetWithExpiration(ctx, key, passwordHash, credsLifeTime)
}</span>

func (c *cache) genKey(format, arg string) string <span class="cov0" title="0">{
        return fmt.Sprintf(format, arg)
}</span>
</pre>
		
		<pre class="file" id="file8" style="display: none">package cache

import (
        "context"
        "errors"
        "github.com/redis/go-redis/v9"
        "time"
)

var (
        ErrNotFound = errors.New("not found")
)

type Cache interface {
        Get(ctx context.Context, key string) (any, error)
        Set(ctx context.Context, key string, value any) error
        SetWithExpiration(ctx context.Context, key string, value any, expiration time.Duration) error
        Delete(ctx context.Context, key string) error
}

type RedisCache struct {
        client *redis.Client
}

func NewRedisCache(client *redis.Client) *RedisCache <span class="cov0" title="0">{
        return &amp;RedisCache{
                client: client,
        }
}</span>

func (r *RedisCache) Get(ctx context.Context, key string) (any, error) <span class="cov0" title="0">{
        val, err := r.redisStringCmd(ctx, key).Result()
        if err != nil </span><span class="cov0" title="0">{
                if errors.Is(err, redis.Nil) </span><span class="cov0" title="0">{
                        return nil, ErrNotFound
                }</span>
                <span class="cov0" title="0">return nil, err</span>
        }
        <span class="cov0" title="0">return val, nil</span>
}

func (r *RedisCache) Set(ctx context.Context, key string, value any) error <span class="cov0" title="0">{
        return r.client.Set(ctx, key, value, 0).Err()
}</span>

func (r *RedisCache) SetWithExpiration(ctx context.Context, key string, value any, expiration time.Duration) error <span class="cov0" title="0">{
        return r.client.Set(ctx, key, value, expiration).Err()
}</span>

func (r *RedisCache) Delete(ctx context.Context, key string) error <span class="cov0" title="0">{
        return r.client.Del(ctx, key).Err()
}</span>

func (r *RedisCache) redisStringCmd(ctx context.Context, key string) *redis.StringCmd <span class="cov0" title="0">{
        return r.client.Get(ctx, key)
}</span>
</pre>
		
		<pre class="file" id="file9" style="display: none">package jdoodle

import (
        "bytes"
        "context"
        "encoding/json"
        "errors"
        "github.com/Rasikrr/learning_platform/configs"
        "github.com/Rasikrr/learning_platform/internal/domain/enum"
        "log"
        "net/http"
)

var (
        ErrInvalidStatusCode = errors.New("invalid status code")
        ErrCompilationError  = errors.New("compilation error")
)

//go:generate mockgen -destination ../mocks/jdoodle/mock.go -package mocks -source=client.go

type Client interface {
        ExecuteCode(_ context.Context, code string, lang enum.ProgrammingLanguage) (string, error)
        ExecuteTestCase(_ context.Context, code, stdin string, lang enum.ProgrammingLanguage) (string, error)
}

type client struct {
        url          string
        clientID     string
        clientSecret string
}

func NewClient(cfg *configs.Config) Client <span class="cov8" title="1">{
        return &amp;client{
                url:          cfg.JDoodle.URL,
                clientID:     cfg.JDoodle.ClientID,
                clientSecret: cfg.JDoodle.ClientSecret,
        }
}</span>

func (c *client) ExecuteCode(_ context.Context, code string, lang enum.ProgrammingLanguage) (string, error) <span class="cov8" title="1">{
        req := ExecuteRequest{
                ClientID:     c.clientID,
                ClientSecret: c.clientSecret,
                Script:       code,
                Language:     lang.String(),
                VersionIndex: "3",
                CompileOnly:  false,
        }

        bb, err := json.Marshal(req)
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov8" title="1">resp, err := http.Post(c.url, "application/json", bytes.NewBuffer(bb))
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov8" title="1">defer resp.Body.Close()

        var out ExecuteResponse
        if err = json.NewDecoder(resp.Body).Decode(&amp;out); err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov8" title="1">log.Printf("Request: %+v\n", req)
        log.Printf("Response: %+v\n", out)
        if out.StatusCode != 200 </span><span class="cov0" title="0">{
                return "", ErrInvalidStatusCode
        }</span>
        <span class="cov8" title="1">return out.Output, nil</span>
}

func (c *client) ExecuteTestCase(_ context.Context, code, stdin string, lang enum.ProgrammingLanguage) (string, error) <span class="cov0" title="0">{
        req := ExecuteRequest{
                ClientID:     c.clientID,
                ClientSecret: c.clientSecret,
                Script:       code,
                Stdin:        stdin,
                Language:     lang.String(),
                VersionIndex: "3",
                CompileOnly:  false,
        }

        bb, err := json.Marshal(req)
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov0" title="0">resp, err := http.Post(c.url, "application/json", bytes.NewBuffer(bb))
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov0" title="0">defer resp.Body.Close()

        var out ExecuteResponse
        if err = json.NewDecoder(resp.Body).Decode(&amp;out); err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov0" title="0">log.Printf("Request: %+v\n", req)
        log.Printf("Response: %+v\n", out)
        if out.StatusCode != 200 </span><span class="cov0" title="0">{
                return "", ErrInvalidStatusCode
        }</span>
        <span class="cov0" title="0">return out.Output, nil</span>
}
</pre>
		
		<pre class="file" id="file10" style="display: none">package mail

import (
        "context"
        "crypto/tls"
        "github.com/Rasikrr/learning_platform/configs"
        "github.com/go-gomail/gomail"
)

type Client interface {
        Send(ctx context.Context, to []string, subject, body string) error
}

type client struct {
        srv  *gomail.Dialer
        from string
}

func NewClient(cfg *configs.Config) Client <span class="cov8" title="1">{
        srv := gomail.NewDialer(cfg.Mail.Host, cfg.Mail.Port, cfg.Mail.User, cfg.Mail.Password)
        srv.TLSConfig = &amp;tls.Config{
                ServerName: cfg.Mail.Host,
                MinVersion: tls.VersionTLS12,
        }
        return &amp;client{
                srv:  srv,
                from: cfg.Mail.From,
        }
}</span>

func (c *client) Send(_ context.Context, to []string, subject, body string) error <span class="cov8" title="1">{
        m := gomail.NewMessage()
        m.SetHeader("From", c.from)
        m.SetHeader("To", to...)
        m.SetHeader("Subject", subject)
        m.SetBody("text/html", body)
        return c.srv.DialAndSend(m)
}</span>
</pre>
		
		<pre class="file" id="file11" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: client.go

// Package mocks is a generated GoMock package.
package mocks

import (
        context "context"
        reflect "reflect"

        enum "github.com/Rasikrr/learning_platform/internal/domain/enum"
        gomock "github.com/golang/mock/gomock"
)

// MockClient is a mock of Client interface.
type MockClient struct {
        ctrl     *gomock.Controller
        recorder *MockClientMockRecorder
}

// MockClientMockRecorder is the mock recorder for MockClient.
type MockClientMockRecorder struct {
        mock *MockClient
}

// NewMockClient creates a new mock instance.
func NewMockClient(ctrl *gomock.Controller) *MockClient <span class="cov8" title="1">{
        mock := &amp;MockClient{ctrl: ctrl}
        mock.recorder = &amp;MockClientMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockClient) EXPECT() *MockClientMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// ExecuteCode mocks base method.
func (m *MockClient) ExecuteCode(arg0 context.Context, code string, lang enum.ProgrammingLanguage) (string, error) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "ExecuteCode", arg0, code, lang)
        ret0, _ := ret[0].(string)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// ExecuteCode indicates an expected call of ExecuteCode.
func (mr *MockClientMockRecorder) ExecuteCode(arg0, code, lang interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "ExecuteCode", reflect.TypeOf((*MockClient)(nil).ExecuteCode), arg0, code, lang)
}</span>

// ExecuteTestCase mocks base method.
func (m *MockClient) ExecuteTestCase(arg0 context.Context, code, stdin string, lang enum.ProgrammingLanguage) (string, error) <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "ExecuteTestCase", arg0, code, stdin, lang)
        ret0, _ := ret[0].(string)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// ExecuteTestCase indicates an expected call of ExecuteTestCase.
func (mr *MockClientMockRecorder) ExecuteTestCase(arg0, code, stdin, lang interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "ExecuteTestCase", reflect.TypeOf((*MockClient)(nil).ExecuteTestCase), arg0, code, stdin, lang)
}</span>
</pre>
		
		<pre class="file" id="file12" style="display: none">package databases

import (
        "context"
        "github.com/Rasikrr/learning_platform/configs"
        "github.com/jackc/pgx/v5"
        "github.com/jackc/pgx/v5/pgconn"
        "github.com/jackc/pgx/v5/pgxpool"
        "log"
        "time"
)

type Postgres struct {
        pool *pgxpool.Pool
}

// nolint: gosec
func NewPostgres(ctx context.Context, cfg *configs.Config) (*Postgres, error) <span class="cov0" title="0">{
        conConfig, err := pgxpool.ParseConfig(cfg.Postgres.DSN)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">conConfig.ConnConfig.DefaultQueryExecMode = pgx.QueryExecModeSimpleProtocol
        conConfig.MaxConns = int32(cfg.Postgres.MaxConns)
        conConfig.MinConns = int32(cfg.Postgres.MinConns)
        conConfig.MaxConnIdleTime = cfg.Postgres.MaxIdleConnIdleTime
        pool, err := pgxpool.NewWithConfig(ctx, conConfig)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">if err = pool.Ping(ctx); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return &amp;Postgres{
                pool: pool,
        }, nil</span>
}

func (p *Postgres) Pool() *pgxpool.Pool <span class="cov0" title="0">{
        return p.pool
}</span>

func (p *Postgres) Query(ctx context.Context, sql string, args ...any) (pgx.Rows, error) <span class="cov0" title="0">{
        start := time.Now()
        defer func() </span><span class="cov0" title="0">{
                elapsed := time.Since(start)
                log.Printf("Query: %s; elapsed: %v; args: %v\n", sql, elapsed, args)
        }</span>()
        <span class="cov0" title="0">return p.pool.Query(ctx, sql, args...)</span>
}

func (p *Postgres) Exec(ctx context.Context, sql string, args ...any) (pgconn.CommandTag, error) <span class="cov0" title="0">{
        start := time.Now()
        defer func() </span><span class="cov0" title="0">{
                elapsed := time.Since(start)
                log.Printf("Exec: %s; elapsed: %v; args: %v\n", sql, elapsed, args)
        }</span>()
        <span class="cov0" title="0">return p.pool.Exec(ctx, sql, args...)</span>
}

func (p *Postgres) QueryRow(ctx context.Context, sql string, args ...any) pgx.Row <span class="cov0" title="0">{
        start := time.Now()
        defer func() </span><span class="cov0" title="0">{
                elapsed := time.Since(start)
                log.Printf("QueryRow: %s; elapsed: %v; args: %v\n", sql, elapsed, args)
        }</span>()
        <span class="cov0" title="0">return p.pool.QueryRow(ctx, sql, args...)</span>
}

func (p *Postgres) BeginTx(ctx context.Context, txOptions pgx.TxOptions) (pgx.Tx, error) <span class="cov0" title="0">{
        start := time.Now()
        defer func() </span><span class="cov0" title="0">{
                elapsed := time.Since(start)
                log.Printf("BeginTx: %v; elapsed: %v\n", txOptions, elapsed)
        }</span>()
        <span class="cov0" title="0">return p.pool.BeginTx(ctx, txOptions)</span>
}

func (p *Postgres) Begin(ctx context.Context) (pgx.Tx, error) <span class="cov0" title="0">{
        start := time.Now()
        defer func() </span><span class="cov0" title="0">{
                elapsed := time.Since(start)
                log.Printf("Begin: %v; elapsed: %v\n", nil, elapsed)
        }</span>()
        <span class="cov0" title="0">return p.pool.Begin(ctx)</span>
}

func (p *Postgres) CopyFrom(ctx context.Context, tableName pgx.Identifier, columnNames []string, rowSrc pgx.CopyFromSource) (int64, error) <span class="cov0" title="0">{
        start := time.Now()
        defer func() </span><span class="cov0" title="0">{
                elapsed := time.Since(start)
                log.Printf("CopyFrom: %s; elapsed: %v; args: %v\n", tableName, elapsed, columnNames)
        }</span>()
        <span class="cov0" title="0">return p.pool.CopyFrom(ctx, tableName, columnNames, rowSrc)</span>
}

func (p *Postgres) SendBatch(ctx context.Context, b *pgx.Batch) pgx.BatchResults <span class="cov0" title="0">{
        start := time.Now()
        defer func() </span><span class="cov0" title="0">{
                elapsed := time.Since(start)
                log.Printf("SendBatch: %v; elapsed: %v\n", b, elapsed)
        }</span>()
        <span class="cov0" title="0">return p.pool.SendBatch(ctx, b)</span>
}

func (p *Postgres) Close() <span class="cov0" title="0">{
        p.pool.Close()
        log.Println("Postgres closed")
}</span>
</pre>
		
		<pre class="file" id="file13" style="display: none">package databases

import (
        "context"
        "fmt"
        "github.com/Rasikrr/learning_platform/configs"
        "github.com/redis/go-redis/v9"
)

func NewRedis(ctx context.Context, cfg *configs.Config) (*redis.Client, error) <span class="cov0" title="0">{
        hostPort := fmt.Sprintf("%s:%s", cfg.Redis.Host, cfg.Redis.Port)

        opt := &amp;redis.Options{
                Username: "default",
                Addr:     hostPort,
                Password: cfg.Redis.Password,
                DB:       cfg.Redis.DB,
        }

        client := redis.NewClient(opt)
        if err := client.Ping(ctx).Err(); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return client, nil</span>
}
</pre>
		
		<pre class="file" id="file14" style="display: none">package entity

import (
        "github.com/golang-jwt/jwt"
        "time"
)

type Auth struct {
        AccessToken  string
        RefreshToken string
}

type Claims struct {
        UserID      string `json:"user_id"`
        Email       string `json:"email"`
        AccountRole string `json:"account_role"`
        IsRefresh   bool   `json:"is_refresh"`
        jwt.StandardClaims
}

func NewClaims(user *User, lifetime time.Duration, isRefresh bool) *Claims <span class="cov0" title="0">{
        if isRefresh </span><span class="cov0" title="0">{
                return &amp;Claims{
                        Email:     user.Email,
                        IsRefresh: isRefresh,
                        StandardClaims: jwt.StandardClaims{
                                ExpiresAt: time.Now().Add(lifetime).Unix(),
                                IssuedAt:  time.Now().Unix(),
                        },
                }
        }</span>
        <span class="cov0" title="0">return &amp;Claims{
                UserID:      user.ID.String(),
                Email:       user.Email,
                AccountRole: user.AccountRole.String(),
                IsRefresh:   isRefresh,
                StandardClaims: jwt.StandardClaims{
                        ExpiresAt: time.Now().Add(lifetime).Unix(),
                        IssuedAt:  time.Now().Unix(),
                },
        }</span>
}
</pre>
		
		<pre class="file" id="file15" style="display: none">// Code generated by easyjson for marshaling/unmarshaling. DO NOT EDIT.

package entity

import (
        json "encoding/json"
        easyjson "github.com/mailru/easyjson"
        jlexer "github.com/mailru/easyjson/jlexer"
        jwriter "github.com/mailru/easyjson/jwriter"
)

// suppress unused package warning
var (
        _ *json.RawMessage
        _ *jlexer.Lexer
        _ *jwriter.Writer
        _ easyjson.Marshaler
)

func easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity(in *jlexer.Lexer, out *TopicContent) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "topic_id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.TopicID).UnmarshalText(data))
                        }</span>
                case "content":<span class="cov0" title="0">
                        out.Content = string(in.String())</span>
                case "additional_resources":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.AdditionalResources = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.AdditionalResources == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.AdditionalResources = make([]string, 0, 4)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.AdditionalResources = []string{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.AdditionalResources = (out.AdditionalResources)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v1 string
                                        v1 = string(in.String())
                                        out.AdditionalResources = append(out.AdditionalResources, v1)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "video_urls":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.VideoURLs = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.VideoURLs == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.VideoURLs = make([]string, 0, 4)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.VideoURLs = []string{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.VideoURLs = (out.VideoURLs)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v2 string
                                        v2 = string(in.String())
                                        out.VideoURLs = append(out.VideoURLs, v2)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "image_urls":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.ImageURLs = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.ImageURLs == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.ImageURLs = make([]string, 0, 4)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.ImageURLs = []string{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.ImageURLs = (out.ImageURLs)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v3 string
                                        v3 = string(in.String())
                                        out.ImageURLs = append(out.ImageURLs, v3)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity(out *jwriter.Writer, in TopicContent) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"topic_id\":"
                out.RawString(prefix)
                out.RawText((in.TopicID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"content\":"
                out.RawString(prefix)
                out.String(string(in.Content))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"additional_resources\":"
                out.RawString(prefix)
                if in.AdditionalResources == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v4, v5 := range in.AdditionalResources </span><span class="cov0" title="0">{
                                if v4 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.String(string(v5))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"video_urls\":"
                out.RawString(prefix)
                if in.VideoURLs == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v6, v7 := range in.VideoURLs </span><span class="cov0" title="0">{
                                if v6 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.String(string(v7))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"image_urls\":"
                out.RawString(prefix)
                if in.ImageURLs == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v8, v9 := range in.ImageURLs </span><span class="cov0" title="0">{
                                if v8 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.String(string(v9))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v TopicContent) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v TopicContent) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *TopicContent) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *TopicContent) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity(l, v)
}</span>
func easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity1(in *jlexer.Lexer, out *Topic) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "course_id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CourseID).UnmarshalText(data))
                        }</span>
                case "title":<span class="cov0" title="0">
                        out.Title = string(in.String())</span>
                case "description":<span class="cov0" title="0">
                        out.Description = string(in.String())</span>
                case "content":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Content = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.Content == nil </span><span class="cov0" title="0">{
                                        out.Content = new(TopicContent)
                                }</span>
                                <span class="cov0" title="0">(*out.Content).UnmarshalEasyJSON(in)</span>
                        }
                case "submissions":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Quizzes = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Quizzes == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Quizzes = make([]*Quiz, 0, 8)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Quizzes = []*Quiz{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Quizzes = (out.Quizzes)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v10 *Quiz
                                        if in.IsNull() </span><span class="cov0" title="0">{
                                                in.Skip()
                                                v10 = nil
                                        }</span> else<span class="cov0" title="0"> {
                                                if v10 == nil </span><span class="cov0" title="0">{
                                                        v10 = new(Quiz)
                                                }</span>
                                                <span class="cov0" title="0">(*v10).UnmarshalEasyJSON(in)</span>
                                        }
                                        <span class="cov0" title="0">out.Quizzes = append(out.Quizzes, v10)
                                        in.WantComma()</span>
                                }
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "practical_tasks":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.PracticalTasks = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.PracticalTasks == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.PracticalTasks = make([]*PracticalTask, 0, 8)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.PracticalTasks = []*PracticalTask{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.PracticalTasks = (out.PracticalTasks)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v11 *PracticalTask
                                        if in.IsNull() </span><span class="cov0" title="0">{
                                                in.Skip()
                                                v11 = nil
                                        }</span> else<span class="cov0" title="0"> {
                                                if v11 == nil </span><span class="cov0" title="0">{
                                                        v11 = new(PracticalTask)
                                                }</span>
                                                <span class="cov0" title="0">(*v11).UnmarshalEasyJSON(in)</span>
                                        }
                                        <span class="cov0" title="0">out.PracticalTasks = append(out.PracticalTasks, v11)
                                        in.WantComma()</span>
                                }
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "order_number":<span class="cov0" title="0">
                        out.OrderNumber = int(in.Int())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity1(out *jwriter.Writer, in Topic) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"course_id\":"
                out.RawString(prefix)
                out.RawText((in.CourseID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"title\":"
                out.RawString(prefix)
                out.String(string(in.Title))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"description\":"
                out.RawString(prefix)
                out.String(string(in.Description))
        }</span>
        <span class="cov0" title="0">if in.Content != nil </span><span class="cov0" title="0">{
                const prefix string = ",\"content\":"
                out.RawString(prefix)
                (*in.Content).MarshalEasyJSON(out)
        }</span>
        <span class="cov0" title="0">if len(in.Quizzes) != 0 </span><span class="cov0" title="0">{
                const prefix string = ",\"submissions\":"
                out.RawString(prefix)
                </span><span class="cov0" title="0">{
                        out.RawByte('[')
                        for v12, v13 := range in.Quizzes </span><span class="cov0" title="0">{
                                if v12 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">if v13 == nil </span><span class="cov0" title="0">{
                                        out.RawString("null")
                                }</span> else<span class="cov0" title="0"> {
                                        (*v13).MarshalEasyJSON(out)
                                }</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">if len(in.PracticalTasks) != 0 </span><span class="cov0" title="0">{
                const prefix string = ",\"practical_tasks\":"
                out.RawString(prefix)
                </span><span class="cov0" title="0">{
                        out.RawByte('[')
                        for v14, v15 := range in.PracticalTasks </span><span class="cov0" title="0">{
                                if v14 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">if v15 == nil </span><span class="cov0" title="0">{
                                        out.RawString("null")
                                }</span> else<span class="cov0" title="0"> {
                                        (*v15).MarshalEasyJSON(out)
                                }</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"order_number\":"
                out.RawString(prefix)
                out.Int(int(in.OrderNumber))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v Topic) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity1(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v Topic) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity1(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *Topic) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity1(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *Topic) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity1(l, v)
}</span>
func easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity2(in *jlexer.Lexer, out *Quiz) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "topic_id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.TopicID).UnmarshalText(data))
                        }</span>
                case "question":<span class="cov0" title="0">
                        out.Question = string(in.String())</span>
                case "options":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Options = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Options == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Options = make([]string, 0, 4)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Options = []string{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Options = (out.Options)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v16 string
                                        v16 = string(in.String())
                                        out.Options = append(out.Options, v16)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "correct_answers":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.CorrectAnswers = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.CorrectAnswers == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.CorrectAnswers = make([]bool, 0, 64)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.CorrectAnswers = []bool{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.CorrectAnswers = (out.CorrectAnswers)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v17 bool
                                        v17 = bool(in.Bool())
                                        out.CorrectAnswers = append(out.CorrectAnswers, v17)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "multiple_choice":<span class="cov0" title="0">
                        out.MultipleChoice = bool(in.Bool())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity2(out *jwriter.Writer, in Quiz) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"topic_id\":"
                out.RawString(prefix)
                out.RawText((in.TopicID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"question\":"
                out.RawString(prefix)
                out.String(string(in.Question))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"options\":"
                out.RawString(prefix)
                if in.Options == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v18, v19 := range in.Options </span><span class="cov0" title="0">{
                                if v18 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.String(string(v19))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"correct_answers\":"
                out.RawString(prefix)
                if in.CorrectAnswers == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v20, v21 := range in.CorrectAnswers </span><span class="cov0" title="0">{
                                if v20 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.Bool(bool(v21))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"multiple_choice\":"
                out.RawString(prefix)
                out.Bool(bool(in.MultipleChoice))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v Quiz) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity2(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v Quiz) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity2(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *Quiz) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity2(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *Quiz) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity2(l, v)
}</span>
func easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity3(in *jlexer.Lexer, out *PracticalTask) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "topic_id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.TopicID).UnmarshalText(data))
                        }</span>
                case "description":<span class="cov0" title="0">
                        out.Description = string(in.String())</span>
                case "difficulty_level":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.DifficultyLevel).UnmarshalJSON(data))
                        }</span>
                case "starter_code":<span class="cov0" title="0">
                        out.StarterCode = string(in.String())</span>
                case "expected_output":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.ExpectedOutput = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.ExpectedOutput == nil </span><span class="cov0" title="0">{
                                        out.ExpectedOutput = new(string)
                                }</span>
                                <span class="cov0" title="0">*out.ExpectedOutput = string(in.String())</span>
                        }
                case "order_number":<span class="cov0" title="0">
                        out.OrderNumber = int(in.Int())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                case "test_cases":<span class="cov0" title="0">
                        out.TestCases = bool(in.Bool())</span>
                case "language":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.Language).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity3(out *jwriter.Writer, in PracticalTask) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"topic_id\":"
                out.RawString(prefix)
                out.RawText((in.TopicID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"description\":"
                out.RawString(prefix)
                out.String(string(in.Description))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"difficulty_level\":"
                out.RawString(prefix)
                out.Raw((in.DifficultyLevel).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"starter_code\":"
                out.RawString(prefix)
                out.String(string(in.StarterCode))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"expected_output\":"
                out.RawString(prefix)
                if in.ExpectedOutput == nil </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.String(string(*in.ExpectedOutput))
                }</span>
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"order_number\":"
                out.RawString(prefix)
                out.Int(int(in.OrderNumber))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"test_cases\":"
                out.RawString(prefix)
                out.Bool(bool(in.TestCases))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"language\":"
                out.RawString(prefix)
                out.Raw((in.Language).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v PracticalTask) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity3(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v PracticalTask) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity3(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *PracticalTask) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity3(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *PracticalTask) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity3(l, v)
}</span>
func easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity4(in *jlexer.Lexer, out *Course) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "title":<span class="cov0" title="0">
                        out.Title = string(in.String())</span>
                case "image_url":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.ImageURL = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.ImageURL == nil </span><span class="cov0" title="0">{
                                        out.ImageURL = new(string)
                                }</span>
                                <span class="cov0" title="0">*out.ImageURL = string(in.String())</span>
                        }
                case "category":<span class="cov0" title="0">
                        (out.Category).UnmarshalEasyJSON(in)</span>
                case "description":<span class="cov0" title="0">
                        out.Description = string(in.String())</span>
                case "topics":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Topics = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Topics == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Topics = make([]*Topic, 0, 8)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Topics = []*Topic{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Topics = (out.Topics)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v22 *Topic
                                        if in.IsNull() </span><span class="cov0" title="0">{
                                                in.Skip()
                                                v22 = nil
                                        }</span> else<span class="cov0" title="0"> {
                                                if v22 == nil </span><span class="cov0" title="0">{
                                                        v22 = new(Topic)
                                                }</span>
                                                <span class="cov0" title="0">(*v22).UnmarshalEasyJSON(in)</span>
                                        }
                                        <span class="cov0" title="0">out.Topics = append(out.Topics, v22)
                                        in.WantComma()</span>
                                }
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "created_by":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedBy).UnmarshalText(data))
                        }</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity4(out *jwriter.Writer, in Course) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"title\":"
                out.RawString(prefix)
                out.String(string(in.Title))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"image_url\":"
                out.RawString(prefix)
                if in.ImageURL == nil </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.String(string(*in.ImageURL))
                }</span>
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"category\":"
                out.RawString(prefix)
                (in.Category).MarshalEasyJSON(out)
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"description\":"
                out.RawString(prefix)
                out.String(string(in.Description))
        }</span>
        <span class="cov0" title="0">if len(in.Topics) != 0 </span><span class="cov0" title="0">{
                const prefix string = ",\"topics\":"
                out.RawString(prefix)
                </span><span class="cov0" title="0">{
                        out.RawByte('[')
                        for v23, v24 := range in.Topics </span><span class="cov0" title="0">{
                                if v23 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">if v24 == nil </span><span class="cov0" title="0">{
                                        out.RawString("null")
                                }</span> else<span class="cov0" title="0"> {
                                        (*v24).MarshalEasyJSON(out)
                                }</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"created_by\":"
                out.RawString(prefix)
                out.RawText((in.CreatedBy).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v Course) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity4(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v Course) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity4(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *Course) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity4(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *Course) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity4(l, v)
}</span>
func easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity5(in *jlexer.Lexer, out *Category) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "name":<span class="cov0" title="0">
                        out.Name = string(in.String())</span>
                case "created_by":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedBy).UnmarshalText(data))
                        }</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity5(out *jwriter.Writer, in Category) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"name\":"
                out.RawString(prefix)
                out.String(string(in.Name))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_by\":"
                out.RawString(prefix)
                out.RawText((in.CreatedBy).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v Category) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity5(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v Category) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity5(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *Category) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity5(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *Category) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity5(l, v)
}</span>
func easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity6(in *jlexer.Lexer, out *AnswerQuiz) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "question_id":<span class="cov0" title="0">
                        out.QuestionID = string(in.String())</span>
                case "answer":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Answer = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Answer == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Answer = make([]bool, 0, 64)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Answer = []bool{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Answer = (out.Answer)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v25 bool
                                        v25 = bool(in.Bool())
                                        out.Answer = append(out.Answer, v25)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity6(out *jwriter.Writer, in AnswerQuiz) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"question_id\":"
                out.RawString(prefix[1:])
                out.String(string(in.QuestionID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"answer\":"
                out.RawString(prefix)
                if in.Answer == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v26, v27 := range in.Answer </span><span class="cov0" title="0">{
                                if v26 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.Bool(bool(v27))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v AnswerQuiz) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity6(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v AnswerQuiz) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonCc42051bEncodeGithubComRasikrrLearningPlatformInternalDomainEntity6(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *AnswerQuiz) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity6(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *AnswerQuiz) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonCc42051bDecodeGithubComRasikrrLearningPlatformInternalDomainEntity6(l, v)
}</span>
</pre>
		
		<pre class="file" id="file16" style="display: none">// Code generated by easyjson for marshaling/unmarshaling. DO NOT EDIT.

package entity

import (
        json "encoding/json"
        easyjson "github.com/mailru/easyjson"
        jlexer "github.com/mailru/easyjson/jlexer"
        jwriter "github.com/mailru/easyjson/jwriter"
        time "time"
)

// suppress unused package warning
var (
        _ *json.RawMessage
        _ *jlexer.Lexer
        _ *jwriter.Writer
        _ easyjson.Marshaler
)

func easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity(in *jlexer.Lexer, out *QuestionCategory) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "name":<span class="cov0" title="0">
                        out.Name = string(in.String())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity(out *jwriter.Writer, in QuestionCategory) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"name\":"
                out.RawString(prefix)
                out.String(string(in.Name))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v QuestionCategory) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v QuestionCategory) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *QuestionCategory) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *QuestionCategory) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity(l, v)
}</span>
func easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity1(in *jlexer.Lexer, out *Question) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "category":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Category = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.Category == nil </span><span class="cov0" title="0">{
                                        out.Category = new(QuestionCategory)
                                }</span>
                                <span class="cov0" title="0">(*out.Category).UnmarshalEasyJSON(in)</span>
                        }
                case "title":<span class="cov0" title="0">
                        out.Title = string(in.String())</span>
                case "body":<span class="cov0" title="0">
                        out.Body = string(in.String())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                case "author":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Author = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.Author == nil </span><span class="cov0" title="0">{
                                        out.Author = new(User)
                                }</span>
                                <span class="cov0" title="0">easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity2(in, out.Author)</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity1(out *jwriter.Writer, in Question) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"category\":"
                out.RawString(prefix)
                if in.Category == nil </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        (*in.Category).MarshalEasyJSON(out)
                }</span>
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"title\":"
                out.RawString(prefix)
                out.String(string(in.Title))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"body\":"
                out.RawString(prefix)
                out.String(string(in.Body))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"author\":"
                out.RawString(prefix)
                if in.Author == nil </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity2(out, *in.Author)
                }</span>
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v Question) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity1(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v Question) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity1(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *Question) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity1(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *Question) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity1(l, v)
}</span>
func easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity2(in *jlexer.Lexer, out *User) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "ID":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "Name":<span class="cov0" title="0">
                        out.Name = string(in.String())</span>
                case "LastName":<span class="cov0" title="0">
                        out.LastName = string(in.String())</span>
                case "Email":<span class="cov0" title="0">
                        out.Email = string(in.String())</span>
                case "Password":<span class="cov0" title="0">
                        out.Password = string(in.String())</span>
                case "AccountRole":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.AccountRole).UnmarshalJSON(data))
                        }</span>
                case "CreatedAt":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "UpdatedAt":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                case "DeletedAt":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.DeletedAt = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.DeletedAt == nil </span><span class="cov0" title="0">{
                                        out.DeletedAt = new(time.Time)
                                }</span>
                                <span class="cov0" title="0">if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                        in.AddError((*out.DeletedAt).UnmarshalJSON(data))
                                }</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity2(out *jwriter.Writer, in User) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"ID\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"Name\":"
                out.RawString(prefix)
                out.String(string(in.Name))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"LastName\":"
                out.RawString(prefix)
                out.String(string(in.LastName))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"Email\":"
                out.RawString(prefix)
                out.String(string(in.Email))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"Password\":"
                out.RawString(prefix)
                out.String(string(in.Password))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"AccountRole\":"
                out.RawString(prefix)
                out.Raw((in.AccountRole).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"CreatedAt\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"UpdatedAt\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"DeletedAt\":"
                out.RawString(prefix)
                if in.DeletedAt == nil </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.Raw((*in.DeletedAt).MarshalJSON())
                }</span>
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}
func easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity3(in *jlexer.Lexer, out *Answer) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        if data := in.UnsafeBytes(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.ID).UnmarshalText(data))
                        }</span>
                case "question":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Question = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.Question == nil </span><span class="cov0" title="0">{
                                        out.Question = new(Question)
                                }</span>
                                <span class="cov0" title="0">(*out.Question).UnmarshalEasyJSON(in)</span>
                        }
                case "body":<span class="cov0" title="0">
                        out.Body = string(in.String())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                case "author":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Author = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.Author == nil </span><span class="cov0" title="0">{
                                        out.Author = new(User)
                                }</span>
                                <span class="cov0" title="0">easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity2(in, out.Author)</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity3(out *jwriter.Writer, in Answer) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.RawText((in.ID).MarshalText())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"question\":"
                out.RawString(prefix)
                if in.Question == nil </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        (*in.Question).MarshalEasyJSON(out)
                }</span>
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"body\":"
                out.RawString(prefix)
                out.String(string(in.Body))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"author\":"
                out.RawString(prefix)
                if in.Author == nil </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity2(out, *in.Author)
                }</span>
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v Answer) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity3(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v Answer) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjson5a49d66eEncodeGithubComRasikrrLearningPlatformInternalDomainEntity3(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *Answer) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity3(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *Answer) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjson5a49d66eDecodeGithubComRasikrrLearningPlatformInternalDomainEntity3(l, v)
}</span>
</pre>
		
		<pre class="file" id="file17" style="display: none">package entity

import (
        "github.com/Rasikrr/learning_platform/internal/domain/enum"
        "github.com/google/uuid"
)

type Session struct {
        UserID uuid.UUID
        Email  string
        Role   enum.AccountRole
        Claims map[string]any
}

func (s *Session) AccountRole() enum.AccountRole <span class="cov0" title="0">{
        return s.Role
}</span>
</pre>
		
		<pre class="file" id="file18" style="display: none">package entity

import (
        "github.com/Rasikrr/learning_platform/internal/domain/enum"
        "github.com/google/uuid"
        "time"
)

type User struct {
        ID          uuid.UUID
        Name        string
        LastName    string
        Email       string
        Password    string
        AccountRole enum.AccountRole
        CreatedAt   time.Time
        UpdatedAt   time.Time
        DeletedAt   *time.Time
}

func NewUser(email, password string) *User <span class="cov0" title="0">{
        return &amp;User{
                ID:          uuid.New(),
                Email:       email,
                Password:    password,
                AccountRole: enum.AccountRoleUser,
                CreatedAt:   time.Now(),
                UpdatedAt:   time.Now(),
        }
}</span>
</pre>
		
		<pre class="file" id="file19" style="display: none">package enum

//go:generate enumer -type=AccountRole -json -trimprefix AccountRole -transform=snake -output account_role_enumer.go
type AccountRole uint8

const (
        AccountRoleAdmin AccountRole = iota
        AccountRoleUser
)

func (a AccountRole) OneOf(roles ...AccountRole) bool <span class="cov0" title="0">{
        for _, role := range roles </span><span class="cov0" title="0">{
                if a == role </span><span class="cov0" title="0">{
                        return true
                }</span>
        }
        <span class="cov0" title="0">return false</span>
}
</pre>
		
		<pre class="file" id="file20" style="display: none">// Code generated by "enumer -type=AccountRole -json -trimprefix AccountRole -transform=snake -output account_role_enumer.go"; DO NOT EDIT.

package enum

import (
        "encoding/json"
        "fmt"
        "strings"
)

const _AccountRoleName = "adminuser"

var _AccountRoleIndex = [...]uint8{0, 5, 9}

const _AccountRoleLowerName = "adminuser"

func (i AccountRole) String() string <span class="cov0" title="0">{
        if i &gt;= AccountRole(len(_AccountRoleIndex)-1) </span><span class="cov0" title="0">{
                return fmt.Sprintf("AccountRole(%d)", i)
        }</span>
        <span class="cov0" title="0">return _AccountRoleName[_AccountRoleIndex[i]:_AccountRoleIndex[i+1]]</span>
}

// An "invalid array index" compiler error signifies that the constant values have changed.
// Re-run the stringer command to generate them again.
func _AccountRoleNoOp() <span class="cov0" title="0">{
        var x [1]struct{}
        _ = x[AccountRoleAdmin-(0)]
        _ = x[AccountRoleUser-(1)]
}</span>

var _AccountRoleValues = []AccountRole{AccountRoleAdmin, AccountRoleUser}

var _AccountRoleNameToValueMap = map[string]AccountRole{
        _AccountRoleName[0:5]:      AccountRoleAdmin,
        _AccountRoleLowerName[0:5]: AccountRoleAdmin,
        _AccountRoleName[5:9]:      AccountRoleUser,
        _AccountRoleLowerName[5:9]: AccountRoleUser,
}

var _AccountRoleNames = []string{
        _AccountRoleName[0:5],
        _AccountRoleName[5:9],
}

// AccountRoleString retrieves an enum value from the enum constants string name.
// Throws an error if the param is not part of the enum.
func AccountRoleString(s string) (AccountRole, error) <span class="cov0" title="0">{
        if val, ok := _AccountRoleNameToValueMap[s]; ok </span><span class="cov0" title="0">{
                return val, nil
        }</span>

        <span class="cov0" title="0">if val, ok := _AccountRoleNameToValueMap[strings.ToLower(s)]; ok </span><span class="cov0" title="0">{
                return val, nil
        }</span>
        <span class="cov0" title="0">return 0, fmt.Errorf("%s does not belong to AccountRole values", s)</span>
}

// AccountRoleValues returns all values of the enum
func AccountRoleValues() []AccountRole <span class="cov0" title="0">{
        return _AccountRoleValues
}</span>

// AccountRoleStrings returns a slice of all String values of the enum
func AccountRoleStrings() []string <span class="cov0" title="0">{
        strs := make([]string, len(_AccountRoleNames))
        copy(strs, _AccountRoleNames)
        return strs
}</span>

// IsAAccountRole returns "true" if the value is listed in the enum definition. "false" otherwise
func (i AccountRole) IsAAccountRole() bool <span class="cov0" title="0">{
        for _, v := range _AccountRoleValues </span><span class="cov0" title="0">{
                if i == v </span><span class="cov0" title="0">{
                        return true
                }</span>
        }
        <span class="cov0" title="0">return false</span>
}

// MarshalJSON implements the json.Marshaler interface for AccountRole
func (i AccountRole) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        return json.Marshal(i.String())
}</span>

// UnmarshalJSON implements the json.Unmarshaler interface for AccountRole
func (i *AccountRole) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        var s string
        if err := json.Unmarshal(data, &amp;s); err != nil </span><span class="cov0" title="0">{
                return fmt.Errorf("AccountRole should be a string, got %s", data)
        }</span>

        <span class="cov0" title="0">var err error
        *i, err = AccountRoleString(s)
        return err</span>
}
</pre>
		
		<pre class="file" id="file21" style="display: none">// Code generated by "enumer -type=CourseProgress -json -trimprefix CourseProgress -transform=snake -output course_progress_enumer.go"; DO NOT EDIT.

package enum

import (
        "encoding/json"
        "fmt"
        "strings"
)

const _CourseProgressName = "in_progresscompleted"

var _CourseProgressIndex = [...]uint8{0, 11, 20}

const _CourseProgressLowerName = "in_progresscompleted"

func (i CourseProgress) String() string <span class="cov0" title="0">{
        if i &gt;= CourseProgress(len(_CourseProgressIndex)-1) </span><span class="cov0" title="0">{
                return fmt.Sprintf("CourseProgress(%d)", i)
        }</span>
        <span class="cov0" title="0">return _CourseProgressName[_CourseProgressIndex[i]:_CourseProgressIndex[i+1]]</span>
}

// An "invalid array index" compiler error signifies that the constant values have changed.
// Re-run the stringer command to generate them again.
func _CourseProgressNoOp() <span class="cov0" title="0">{
        var x [1]struct{}
        _ = x[CourseProgressInProgress-(0)]
        _ = x[CourseProgressCompleted-(1)]
}</span>

var _CourseProgressValues = []CourseProgress{CourseProgressInProgress, CourseProgressCompleted}

var _CourseProgressNameToValueMap = map[string]CourseProgress{
        _CourseProgressName[0:11]:       CourseProgressInProgress,
        _CourseProgressLowerName[0:11]:  CourseProgressInProgress,
        _CourseProgressName[11:20]:      CourseProgressCompleted,
        _CourseProgressLowerName[11:20]: CourseProgressCompleted,
}

var _CourseProgressNames = []string{
        _CourseProgressName[0:11],
        _CourseProgressName[11:20],
}

// CourseProgressString retrieves an enum value from the enum constants string name.
// Throws an error if the param is not part of the enum.
func CourseProgressString(s string) (CourseProgress, error) <span class="cov0" title="0">{
        if val, ok := _CourseProgressNameToValueMap[s]; ok </span><span class="cov0" title="0">{
                return val, nil
        }</span>

        <span class="cov0" title="0">if val, ok := _CourseProgressNameToValueMap[strings.ToLower(s)]; ok </span><span class="cov0" title="0">{
                return val, nil
        }</span>
        <span class="cov0" title="0">return 0, fmt.Errorf("%s does not belong to CourseProgress values", s)</span>
}

// CourseProgressValues returns all values of the enum
func CourseProgressValues() []CourseProgress <span class="cov0" title="0">{
        return _CourseProgressValues
}</span>

// CourseProgressStrings returns a slice of all String values of the enum
func CourseProgressStrings() []string <span class="cov0" title="0">{
        strs := make([]string, len(_CourseProgressNames))
        copy(strs, _CourseProgressNames)
        return strs
}</span>

// IsACourseProgress returns "true" if the value is listed in the enum definition. "false" otherwise
func (i CourseProgress) IsACourseProgress() bool <span class="cov0" title="0">{
        for _, v := range _CourseProgressValues </span><span class="cov0" title="0">{
                if i == v </span><span class="cov0" title="0">{
                        return true
                }</span>
        }
        <span class="cov0" title="0">return false</span>
}

// MarshalJSON implements the json.Marshaler interface for CourseProgress
func (i CourseProgress) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        return json.Marshal(i.String())
}</span>

// UnmarshalJSON implements the json.Unmarshaler interface for CourseProgress
func (i *CourseProgress) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        var s string
        if err := json.Unmarshal(data, &amp;s); err != nil </span><span class="cov0" title="0">{
                return fmt.Errorf("CourseProgress should be a string, got %s", data)
        }</span>

        <span class="cov0" title="0">var err error
        *i, err = CourseProgressString(s)
        return err</span>
}
</pre>
		
		<pre class="file" id="file22" style="display: none">// Code generated by "enumer -type=Difficulty -json -trimprefix Difficulty -transform=lower -output difficulty_enumer.go"; DO NOT EDIT.

package enum

import (
        "encoding/json"
        "fmt"
        "strings"
)

const _DifficultyName = "easymediumhard"

var _DifficultyIndex = [...]uint8{0, 4, 10, 14}

const _DifficultyLowerName = "easymediumhard"

func (i Difficulty) String() string <span class="cov0" title="0">{
        if i &gt;= Difficulty(len(_DifficultyIndex)-1) </span><span class="cov0" title="0">{
                return fmt.Sprintf("Difficulty(%d)", i)
        }</span>
        <span class="cov0" title="0">return _DifficultyName[_DifficultyIndex[i]:_DifficultyIndex[i+1]]</span>
}

// An "invalid array index" compiler error signifies that the constant values have changed.
// Re-run the stringer command to generate them again.
func _DifficultyNoOp() <span class="cov0" title="0">{
        var x [1]struct{}
        _ = x[DifficultyEasy-(0)]
        _ = x[DifficultyMedium-(1)]
        _ = x[DifficultyHard-(2)]
}</span>

var _DifficultyValues = []Difficulty{DifficultyEasy, DifficultyMedium, DifficultyHard}

var _DifficultyNameToValueMap = map[string]Difficulty{
        _DifficultyName[0:4]:        DifficultyEasy,
        _DifficultyLowerName[0:4]:   DifficultyEasy,
        _DifficultyName[4:10]:       DifficultyMedium,
        _DifficultyLowerName[4:10]:  DifficultyMedium,
        _DifficultyName[10:14]:      DifficultyHard,
        _DifficultyLowerName[10:14]: DifficultyHard,
}

var _DifficultyNames = []string{
        _DifficultyName[0:4],
        _DifficultyName[4:10],
        _DifficultyName[10:14],
}

// DifficultyString retrieves an enum value from the enum constants string name.
// Throws an error if the param is not part of the enum.
func DifficultyString(s string) (Difficulty, error) <span class="cov0" title="0">{
        if val, ok := _DifficultyNameToValueMap[s]; ok </span><span class="cov0" title="0">{
                return val, nil
        }</span>

        <span class="cov0" title="0">if val, ok := _DifficultyNameToValueMap[strings.ToLower(s)]; ok </span><span class="cov0" title="0">{
                return val, nil
        }</span>
        <span class="cov0" title="0">return 0, fmt.Errorf("%s does not belong to Difficulty values", s)</span>
}

// DifficultyValues returns all values of the enum
func DifficultyValues() []Difficulty <span class="cov0" title="0">{
        return _DifficultyValues
}</span>

// DifficultyStrings returns a slice of all String values of the enum
func DifficultyStrings() []string <span class="cov0" title="0">{
        strs := make([]string, len(_DifficultyNames))
        copy(strs, _DifficultyNames)
        return strs
}</span>

// IsADifficulty returns "true" if the value is listed in the enum definition. "false" otherwise
func (i Difficulty) IsADifficulty() bool <span class="cov0" title="0">{
        for _, v := range _DifficultyValues </span><span class="cov0" title="0">{
                if i == v </span><span class="cov0" title="0">{
                        return true
                }</span>
        }
        <span class="cov0" title="0">return false</span>
}

// MarshalJSON implements the json.Marshaler interface for Difficulty
func (i Difficulty) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        return json.Marshal(i.String())
}</span>

// UnmarshalJSON implements the json.Unmarshaler interface for Difficulty
func (i *Difficulty) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        var s string
        if err := json.Unmarshal(data, &amp;s); err != nil </span><span class="cov0" title="0">{
                return fmt.Errorf("Difficulty should be a string, got %s", data)
        }</span>

        <span class="cov0" title="0">var err error
        *i, err = DifficultyString(s)
        return err</span>
}
</pre>
		
		<pre class="file" id="file23" style="display: none">// Code generated by "enumer -type=ProgrammingLanguage -json -trimprefix ProgrammingLanguage -transform=snake -output programming_language_enumer.go"; DO NOT EDIT.

package enum

import (
        "encoding/json"
        "fmt"
        "strings"
)

const _ProgrammingLanguageName = "gopython3javarubysqlnodejsrust"

var _ProgrammingLanguageIndex = [...]uint8{0, 2, 9, 13, 17, 20, 26, 30}

const _ProgrammingLanguageLowerName = "gopython3javarubysqlnodejsrust"

func (i ProgrammingLanguage) String() string <span class="cov8" title="1">{
        if i &gt;= ProgrammingLanguage(len(_ProgrammingLanguageIndex)-1) </span><span class="cov0" title="0">{
                return fmt.Sprintf("ProgrammingLanguage(%d)", i)
        }</span>
        <span class="cov8" title="1">return _ProgrammingLanguageName[_ProgrammingLanguageIndex[i]:_ProgrammingLanguageIndex[i+1]]</span>
}

// An "invalid array index" compiler error signifies that the constant values have changed.
// Re-run the stringer command to generate them again.
func _ProgrammingLanguageNoOp() <span class="cov0" title="0">{
        var x [1]struct{}
        _ = x[ProgrammingLanguageGo-(0)]
        _ = x[ProgrammingLanguagePython3-(1)]
        _ = x[ProgrammingLanguageJava-(2)]
        _ = x[ProgrammingLanguageRuby-(3)]
        _ = x[ProgrammingLanguageSQL-(4)]
        _ = x[ProgrammingLanguageNodejs-(5)]
        _ = x[ProgrammingLanguageRust-(6)]
}</span>

var _ProgrammingLanguageValues = []ProgrammingLanguage{ProgrammingLanguageGo, ProgrammingLanguagePython3, ProgrammingLanguageJava, ProgrammingLanguageRuby, ProgrammingLanguageSQL, ProgrammingLanguageNodejs, ProgrammingLanguageRust}

var _ProgrammingLanguageNameToValueMap = map[string]ProgrammingLanguage{
        _ProgrammingLanguageName[0:2]:        ProgrammingLanguageGo,
        _ProgrammingLanguageLowerName[0:2]:   ProgrammingLanguageGo,
        _ProgrammingLanguageName[2:9]:        ProgrammingLanguagePython3,
        _ProgrammingLanguageLowerName[2:9]:   ProgrammingLanguagePython3,
        _ProgrammingLanguageName[9:13]:       ProgrammingLanguageJava,
        _ProgrammingLanguageLowerName[9:13]:  ProgrammingLanguageJava,
        _ProgrammingLanguageName[13:17]:      ProgrammingLanguageRuby,
        _ProgrammingLanguageLowerName[13:17]: ProgrammingLanguageRuby,
        _ProgrammingLanguageName[17:20]:      ProgrammingLanguageSQL,
        _ProgrammingLanguageLowerName[17:20]: ProgrammingLanguageSQL,
        _ProgrammingLanguageName[20:26]:      ProgrammingLanguageNodejs,
        _ProgrammingLanguageLowerName[20:26]: ProgrammingLanguageNodejs,
        _ProgrammingLanguageName[26:30]:      ProgrammingLanguageRust,
        _ProgrammingLanguageLowerName[26:30]: ProgrammingLanguageRust,
}

var _ProgrammingLanguageNames = []string{
        _ProgrammingLanguageName[0:2],
        _ProgrammingLanguageName[2:9],
        _ProgrammingLanguageName[9:13],
        _ProgrammingLanguageName[13:17],
        _ProgrammingLanguageName[17:20],
        _ProgrammingLanguageName[20:26],
        _ProgrammingLanguageName[26:30],
}

// ProgrammingLanguageString retrieves an enum value from the enum constants string name.
// Throws an error if the param is not part of the enum.
func ProgrammingLanguageString(s string) (ProgrammingLanguage, error) <span class="cov0" title="0">{
        if val, ok := _ProgrammingLanguageNameToValueMap[s]; ok </span><span class="cov0" title="0">{
                return val, nil
        }</span>

        <span class="cov0" title="0">if val, ok := _ProgrammingLanguageNameToValueMap[strings.ToLower(s)]; ok </span><span class="cov0" title="0">{
                return val, nil
        }</span>
        <span class="cov0" title="0">return 0, fmt.Errorf("%s does not belong to ProgrammingLanguage values", s)</span>
}

// ProgrammingLanguageValues returns all values of the enum
func ProgrammingLanguageValues() []ProgrammingLanguage <span class="cov0" title="0">{
        return _ProgrammingLanguageValues
}</span>

// ProgrammingLanguageStrings returns a slice of all String values of the enum
func ProgrammingLanguageStrings() []string <span class="cov0" title="0">{
        strs := make([]string, len(_ProgrammingLanguageNames))
        copy(strs, _ProgrammingLanguageNames)
        return strs
}</span>

// IsAProgrammingLanguage returns "true" if the value is listed in the enum definition. "false" otherwise
func (i ProgrammingLanguage) IsAProgrammingLanguage() bool <span class="cov0" title="0">{
        for _, v := range _ProgrammingLanguageValues </span><span class="cov0" title="0">{
                if i == v </span><span class="cov0" title="0">{
                        return true
                }</span>
        }
        <span class="cov0" title="0">return false</span>
}

// MarshalJSON implements the json.Marshaler interface for ProgrammingLanguage
func (i ProgrammingLanguage) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        return json.Marshal(i.String())
}</span>

// UnmarshalJSON implements the json.Unmarshaler interface for ProgrammingLanguage
func (i *ProgrammingLanguage) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        var s string
        if err := json.Unmarshal(data, &amp;s); err != nil </span><span class="cov0" title="0">{
                return fmt.Errorf("ProgrammingLanguage should be a string, got %s", data)
        }</span>

        <span class="cov0" title="0">var err error
        *i, err = ProgrammingLanguageString(s)
        return err</span>
}
</pre>
		
		<pre class="file" id="file24" style="display: none">package auth

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Confirm register
// @Description Confirm user registration using confirmation code
// @Tags auth
// @Accept json
// @Produce json
// @Param request body ConfirmRegisterRequest true "user email and confirmation code"
// @Success 200 {object} Auth "Success"
// @Router /api/v1/auth/confirm [post]
func (c *Controller) confirmRegister(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req ConfirmRegisterRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">tokens, err := c.authService.ConfirmRegister(r.Context(), req.Email, req.Code)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, convertToModel(tokens), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file25" style="display: none">package auth

import (
        "github.com/Rasikrr/learning_platform/api"

        "net/http"
)

// @Summary Confirm password reset
// @Description Confirm user password reset using confirmation code
// @Tags auth
// @Accept json
// @Produce json
// @Param request body ConfirmResetPasswordRequest true "user email and confirmation code"
// @Success 200 {object} api.EmptySuccessResponse "Success"
// @Router /api/v1/auth/confirm_reset_password [post]
func (c *Controller) confirmResetPassword(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req ConfirmResetPasswordRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">ctx := r.Context()
        if err := c.authService.ConfirmResetPassword(ctx, req.Email, req.Code); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file26" style="display: none">package auth

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Login user
// @Description Login user with email and password
// @Tags auth
// @Accept json
// @Produce json
// @Param request body LoginRequest true "user credentials"
// @Success 200 {object} Auth "Success"
// @Router /api/v1/auth/login [post]
func (c *Controller) login(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req LoginRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">tokens, err := c.authService.Login(r.Context(), req.Email, req.Password)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, convertToModel(tokens), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file27" style="display: none">package auth

import "net/http"

// nolint
func (c *Controller) logout(w http.ResponseWriter, r *http.Request) {<span class="cov0" title="0">

}</span>
</pre>
		
		<pre class="file" id="file28" style="display: none">package auth

import "github.com/Rasikrr/learning_platform/internal/domain/entity"

//go:generate easyjson -all models.go

type ResetPasswordRequest struct {
        Email           string `json:"email"`
        Password        string `json:"password"`
        PasswordConfirm string `json:"password_confirm"`
}

type ConfirmResetPasswordRequest struct {
        Email string `json:"email"`
        Code  string `json:"code"`
}

type Auth struct {
        AccessToken  string `json:"access_token"`
        RefreshToken string `json:"refresh_token"`
}

type RegisterRequest struct {
        Email           string `json:"email"`
        Password        string `json:"password"`
        PasswordConfirm string `json:"password_confirm"`
}

type ConfirmRegisterRequest struct {
        Email string `json:"email"`
        Code  string `json:"code"`
}

type LoginRequest struct {
        Email    string `json:"email"`
        Password string `json:"password"`
}

type RefreshRequest struct {
        RefreshToken string `json:"refresh_token"`
}

func convertToModel(auth *entity.Auth) Auth <span class="cov0" title="0">{
        return Auth{
                RefreshToken: auth.RefreshToken,
                AccessToken:  auth.AccessToken,
        }
}</span>
</pre>
		
		<pre class="file" id="file29" style="display: none">// Code generated by easyjson for marshaling/unmarshaling. DO NOT EDIT.

package auth

import (
        json "encoding/json"
        easyjson "github.com/mailru/easyjson"
        jlexer "github.com/mailru/easyjson/jlexer"
        jwriter "github.com/mailru/easyjson/jwriter"
)

// suppress unused package warning
var (
        _ *json.RawMessage
        _ *jlexer.Lexer
        _ *jwriter.Writer
        _ easyjson.Marshaler
)

func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth(in *jlexer.Lexer, out *ResetPasswordRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "email":<span class="cov0" title="0">
                        out.Email = string(in.String())</span>
                case "password":<span class="cov0" title="0">
                        out.Password = string(in.String())</span>
                case "password_confirm":<span class="cov0" title="0">
                        out.PasswordConfirm = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth(out *jwriter.Writer, in ResetPasswordRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"email\":"
                out.RawString(prefix[1:])
                out.String(string(in.Email))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"password\":"
                out.RawString(prefix)
                out.String(string(in.Password))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"password_confirm\":"
                out.RawString(prefix)
                out.String(string(in.PasswordConfirm))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v ResetPasswordRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v ResetPasswordRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *ResetPasswordRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *ResetPasswordRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth1(in *jlexer.Lexer, out *RegisterRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "email":<span class="cov0" title="0">
                        out.Email = string(in.String())</span>
                case "password":<span class="cov0" title="0">
                        out.Password = string(in.String())</span>
                case "password_confirm":<span class="cov0" title="0">
                        out.PasswordConfirm = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth1(out *jwriter.Writer, in RegisterRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"email\":"
                out.RawString(prefix[1:])
                out.String(string(in.Email))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"password\":"
                out.RawString(prefix)
                out.String(string(in.Password))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"password_confirm\":"
                out.RawString(prefix)
                out.String(string(in.PasswordConfirm))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v RegisterRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth1(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v RegisterRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth1(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *RegisterRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth1(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *RegisterRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth1(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth2(in *jlexer.Lexer, out *RefreshRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "refresh_token":<span class="cov0" title="0">
                        out.RefreshToken = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth2(out *jwriter.Writer, in RefreshRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"refresh_token\":"
                out.RawString(prefix[1:])
                out.String(string(in.RefreshToken))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v RefreshRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth2(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v RefreshRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth2(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *RefreshRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth2(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *RefreshRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth2(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth3(in *jlexer.Lexer, out *LoginRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "email":<span class="cov0" title="0">
                        out.Email = string(in.String())</span>
                case "password":<span class="cov0" title="0">
                        out.Password = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth3(out *jwriter.Writer, in LoginRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"email\":"
                out.RawString(prefix[1:])
                out.String(string(in.Email))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"password\":"
                out.RawString(prefix)
                out.String(string(in.Password))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v LoginRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth3(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v LoginRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth3(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *LoginRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth3(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *LoginRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth3(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth4(in *jlexer.Lexer, out *ConfirmResetPasswordRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "email":<span class="cov0" title="0">
                        out.Email = string(in.String())</span>
                case "code":<span class="cov0" title="0">
                        out.Code = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth4(out *jwriter.Writer, in ConfirmResetPasswordRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"email\":"
                out.RawString(prefix[1:])
                out.String(string(in.Email))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"code\":"
                out.RawString(prefix)
                out.String(string(in.Code))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v ConfirmResetPasswordRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth4(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v ConfirmResetPasswordRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth4(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *ConfirmResetPasswordRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth4(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *ConfirmResetPasswordRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth4(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth5(in *jlexer.Lexer, out *ConfirmRegisterRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "email":<span class="cov0" title="0">
                        out.Email = string(in.String())</span>
                case "code":<span class="cov0" title="0">
                        out.Code = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth5(out *jwriter.Writer, in ConfirmRegisterRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"email\":"
                out.RawString(prefix[1:])
                out.String(string(in.Email))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"code\":"
                out.RawString(prefix)
                out.String(string(in.Code))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v ConfirmRegisterRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth5(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v ConfirmRegisterRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth5(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *ConfirmRegisterRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth5(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *ConfirmRegisterRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth5(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth6(in *jlexer.Lexer, out *Auth) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "access_token":<span class="cov0" title="0">
                        out.AccessToken = string(in.String())</span>
                case "refresh_token":<span class="cov0" title="0">
                        out.RefreshToken = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth6(out *jwriter.Writer, in Auth) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"access_token\":"
                out.RawString(prefix[1:])
                out.String(string(in.AccessToken))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"refresh_token\":"
                out.RawString(prefix)
                out.String(string(in.RefreshToken))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v Auth) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth6(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v Auth) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth6(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *Auth) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth6(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *Auth) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersAuth6(l, v)
}</span>
</pre>
		
		<pre class="file" id="file30" style="display: none">package auth

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Refresh token
// @Description Refresh user tokens
// @Tags auth
// @Accept json
// @Produce json
// @Param request body RefreshRequest true "user's refresh token"
// @Success 200 {object} Auth "Success"
// @Router /api/v1/auth/refresh [post]
func (c *Controller) refreshHandler(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req RefreshRequest

        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>

        <span class="cov0" title="0">tokens, err := c.authService.RefreshToken(r.Context(), req.RefreshToken)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, convertToModel(tokens), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file31" style="display: none">package auth

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Register user
// @Description Register user with email and password and confirm password. Then send confirmation code to user email
// @Tags auth
// @Accept json
// @Produce json
// @Param request body RegisterRequest true "user credentials"
// @Success 200 {object} api.EmptySuccessResponse "Success"
// @Router /api/v1/auth/register [post]
func (c *Controller) register(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req RegisterRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">if err := c.authService.Register(r.Context(), req.Email, req.Password, req.PasswordConfirm); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file32" style="display: none">package auth

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Reset password
// @Description Reset user password with email and password and confirm password. Then send confirmation code to user email
// @Tags auth
// @Accept json
// @Produce json
// @Param request body ResetPasswordRequest true "user credentials"
// @Success 200 {object} api.EmptySuccessResponse "Success"
// @Router /api/v1/auth/reset_password [post]
func (c *Controller) resetPassword(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req ResetPasswordRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">ctx := r.Context()
        if err := c.authService.ResetPassword(ctx, req.Email, req.Password, req.PasswordConfirm); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file33" style="display: none">package auth

import (
        authS "github.com/Rasikrr/learning_platform/internal/services/auth"

        "net/http"
)

type Controller struct {
        authService authS.Service
}

func NewController(authService authS.Service) *Controller <span class="cov0" title="0">{
        return &amp;Controller{
                authService: authService,
        }
}</span>

func (c *Controller) Init(r *http.ServeMux) <span class="cov0" title="0">{
        r.HandleFunc("POST /api/v1/auth/login", c.login)
        r.HandleFunc("POST /api/v1/auth/register", c.register)
        r.HandleFunc("POST /api/v1/auth/logout", c.logout)
        r.HandleFunc("POST /api/v1/auth/confirm", c.confirmRegister)
        r.HandleFunc("POST /api/v1/auth/refresh", c.refreshHandler)
        r.HandleFunc("POST /api/v1/auth/reset_password", c.resetPassword)
        r.HandleFunc("POST /api/v1/auth/confirm_reset_password", c.confirmResetPassword)
}</span>
</pre>
		
		<pre class="file" id="file34" style="display: none">package commands

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "net/http"
        "time"
)

//go:generate easyjson -all models.go

type courseAndTopic struct {
        CourseID string
        TopicID  string
        TaskID   string
}
type submitQuizRequest struct {
        Answers answers `json:"answers"`
}

type answerQuiz struct {
        QuestionID string `json:"question_id"`
        Answer     []bool `json:"answer"`
}

type submitTaskRequest struct {
        Input string `json:"input"`
}

type answers []answerQuiz

func (a answers) ToEntities() []*entity.AnswerQuiz <span class="cov0" title="0">{
        out := make([]*entity.AnswerQuiz, len(a))
        for i, answer := range a </span><span class="cov0" title="0">{
                out[i] = answer.ToEntity()
        }</span>
        <span class="cov0" title="0">return out</span>
}

func (r answerQuiz) ToEntity() *entity.AnswerQuiz <span class="cov0" title="0">{
        return &amp;entity.AnswerQuiz{
                QuestionID: r.QuestionID,
                Answer:     r.Answer,
        }
}</span>

func (req *courseAndTopic) GetParameters(r *http.Request) error <span class="cov0" title="0">{
        req.CourseID = r.PathValue("course_id")
        req.TopicID = r.PathValue("topic_id")
        req.TaskID = r.PathValue("task_id")
        return nil
}</span>

func (req submitTaskRequest) convert(c courseAndTopic, session *entity.Session) *entity.TaskSubmission <span class="cov0" title="0">{
        return &amp;entity.TaskSubmission{
                TaskID:    c.TaskID,
                UserID:    session.UserID.String(),
                Input:     req.Input,
                CreatedAt: time.Now(),
        }
}</span>
</pre>
		
		<pre class="file" id="file35" style="display: none">// Code generated by easyjson for marshaling/unmarshaling. DO NOT EDIT.

package commands

import (
        json "encoding/json"
        easyjson "github.com/mailru/easyjson"
        jlexer "github.com/mailru/easyjson/jlexer"
        jwriter "github.com/mailru/easyjson/jwriter"
)

// suppress unused package warning
var (
        _ *json.RawMessage
        _ *jlexer.Lexer
        _ *jwriter.Writer
        _ easyjson.Marshaler
)

func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands(in *jlexer.Lexer, out *submitTaskRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "input":<span class="cov0" title="0">
                        out.Input = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands(out *jwriter.Writer, in submitTaskRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"input\":"
                out.RawString(prefix[1:])
                out.String(string(in.Input))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v submitTaskRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v submitTaskRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *submitTaskRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *submitTaskRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands1(in *jlexer.Lexer, out *submitQuizRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "answers":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Answers = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Answers == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Answers = make(answers, 0, 1)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Answers = answers{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Answers = (out.Answers)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v1 answerQuiz
                                        (v1).UnmarshalEasyJSON(in)
                                        out.Answers = append(out.Answers, v1)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands1(out *jwriter.Writer, in submitQuizRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"answers\":"
                out.RawString(prefix[1:])
                if in.Answers == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v2, v3 := range in.Answers </span><span class="cov0" title="0">{
                                if v2 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">(v3).MarshalEasyJSON(out)</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v submitQuizRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands1(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v submitQuizRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands1(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *submitQuizRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands1(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *submitQuizRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands1(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands2(in *jlexer.Lexer, out *courseAndTopic) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "CourseID":<span class="cov0" title="0">
                        out.CourseID = string(in.String())</span>
                case "TopicID":<span class="cov0" title="0">
                        out.TopicID = string(in.String())</span>
                case "TaskID":<span class="cov0" title="0">
                        out.TaskID = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands2(out *jwriter.Writer, in courseAndTopic) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"CourseID\":"
                out.RawString(prefix[1:])
                out.String(string(in.CourseID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"TopicID\":"
                out.RawString(prefix)
                out.String(string(in.TopicID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"TaskID\":"
                out.RawString(prefix)
                out.String(string(in.TaskID))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v courseAndTopic) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands2(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v courseAndTopic) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands2(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *courseAndTopic) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands2(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *courseAndTopic) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands2(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands3(in *jlexer.Lexer, out *answerQuiz) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "question_id":<span class="cov0" title="0">
                        out.QuestionID = string(in.String())</span>
                case "answer":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Answer = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Answer == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Answer = make([]bool, 0, 64)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Answer = []bool{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Answer = (out.Answer)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v4 bool
                                        v4 = bool(in.Bool())
                                        out.Answer = append(out.Answer, v4)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands3(out *jwriter.Writer, in answerQuiz) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"question_id\":"
                out.RawString(prefix[1:])
                out.String(string(in.QuestionID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"answer\":"
                out.RawString(prefix)
                if in.Answer == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v5, v6 := range in.Answer </span><span class="cov0" title="0">{
                                if v5 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.Bool(bool(v6))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v answerQuiz) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands3(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v answerQuiz) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands3(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *answerQuiz) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands3(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *answerQuiz) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesCommands3(l, v)
}</span>
</pre>
		
		<pre class="file" id="file36" style="display: none">package commands

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary submit quiz
// @Description submit quiz
// @Tags courses
// @Accept json
// @Produce json
// @Security     BearerAuth
// @param Authorization header string true "Authorization token"
// @Param course_id path string true "course id"
// @Param topic_id path string true "topic id"
// @Success 200 {object} api.EmptySuccessResponse "Success"
// @Router /api/v1/courses/{course_id}/topic/{topic_id}/quiz/reset [post]
func (c *Controller) resetQuiz(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        ctx := r.Context()
        session, err := api.GetSession(ctx)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">var courseInfo courseAndTopic
        if err := api.GetData(r, &amp;courseInfo); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">err = c.submissionService.ResetQuiz(ctx, session.UserID.String(), courseInfo.CourseID, courseInfo.TopicID)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file37" style="display: none">package commands

import (
        "github.com/Rasikrr/learning_platform/internal/ports/http/middlewares"
        coursesS "github.com/Rasikrr/learning_platform/internal/services/courses"
        submissionS "github.com/Rasikrr/learning_platform/internal/services/submissions"
        "net/http"
)

type Controller struct {
        courseService     coursesS.Service
        submissionService submissionS.Service
        e                 *middlewares.EnrollMiddleware
        m                 *middlewares.AuthMiddleware
}

func NewController(
        courseService coursesS.Service,
        m *middlewares.AuthMiddleware,
        e *middlewares.EnrollMiddleware,
        submissionService submissionS.Service,
) *Controller <span class="cov0" title="0">{
        return &amp;Controller{
                courseService:     courseService,
                submissionService: submissionService,
                m:                 m,
                e:                 e,
        }
}</span>

func (c *Controller) Init(r *http.ServeMux) <span class="cov0" title="0">{
        auth := c.m.Handle
        r.Handle("POST /api/v1/courses/{course_id}/topic/{topic_id}/quiz/submit", auth(c.e.Handle(c.submitQuiz)))
        r.Handle("POST /api/v1/courses/{course_id}/topic/{topic_id}/quiz/reset", auth(c.e.Handle(c.resetQuiz)))

        r.Handle("POST /api/v1/courses/{course_id}/topic/{topic_id}/task/{task_id}/submit", auth(c.e.Handle(c.submitTask)))
}</span>
</pre>
		
		<pre class="file" id="file38" style="display: none">package commands

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary submit quiz
// @Description submit quiz
// @Tags courses
// @Accept json
// @Produce json
// @Security     BearerAuth
// @param Authorization header string true "Authorization token"
// @Param course_id path string true "course id"
// @Param topic_id path string true "topic id"
// @Param  request body submitQuizRequest true "request"
// @Success 200 {object} api.EmptySuccessResponse "Success"
// @Router /api/v1/courses/{course_id}/topic/{topic_id}/quiz/submit [post]
func (c *Controller) submitQuiz(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        ctx := r.Context()
        session, err := api.GetSession(ctx)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">var courseInfo courseAndTopic
        if err := api.GetData(r, &amp;courseInfo); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">var req submitQuizRequest
        if err = api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">err = c.submissionService.SubmitQuiz(ctx, session.UserID.String(), courseInfo.CourseID, courseInfo.TopicID, req.Answers.ToEntities())
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file39" style="display: none">package commands

import (
        "github.com/Rasikrr/learning_platform/api"
        "log"
        "net/http"
)

func (c *Controller) submitTask(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        ctx := r.Context()
        session, err := api.GetSession(ctx)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>

        <span class="cov0" title="0">var courseInfo courseAndTopic
        if err = api.GetData(r, &amp;courseInfo); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>

        <span class="cov0" title="0">var req submitTaskRequest
        if err = api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">submission := req.convert(courseInfo, session)
        out, err := c.submissionService.SubmitTask(ctx, submission)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">log.Println("out", out)
        api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file40" style="display: none">package queries

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Get courses categories
// @Description Get courses categories
// @Tags courses
// @Produce json
// @Success 200 {object} getCategoriesListResponse "Success"
// @Router /api/v1/courses/categories [get]
func (c *Controller) getCategories(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        ctx := r.Context()
        categories, err := c.coursesService.GetAllCategories(ctx)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, convertToGetCategoriesListResponse(categories), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file41" style="display: none">package queries

import (
        "errors"
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Get course by id
// @Description Get detailed course info with topics by id
// @Tags courses
// @Produce json
// @Param id path string true "course id"
// @Success 200 {object} getCourseDetailedResponse "Success"
// @Router /api/v1/courses/{id} [get]
func (c *Controller) getCourse(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        courseID := r.PathValue("id")
        if courseID == "" </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, errors.New("course id is empty"))
                return
        }</span>
        <span class="cov0" title="0">ctx := r.Context()
        courses, err := c.coursesService.GetCourseByID(ctx, courseID)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, convertToGetCourseDetailedResponse(courses), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file42" style="display: none">package queries

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Get courses
// @Description Get courses for catalog
// @Tags courses
// @Produce json
// @Param request body getCoursesListRequest true "request"
// @Success 200 {object} getCoursesListResponse "Success"
// @Router /api/v1/courses [post]
func (c *Controller) getCourses(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req getCoursesListRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">ctx := r.Context()
        params := req.toParams()
        courses, err := c.coursesService.GetCoursesByParams(ctx, params)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, convertToGetCoursesListResponse(courses), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file43" style="display: none">package queries

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Get course topic content
// @Description Get course topic content by topic id
// @Tags courses
// @Produce json
// @Security     BearerAuth
// @param Authorization header string true "Authorization token"
// @Param course_id path string true "course id"
// @Param topic_id path string true "topic id"
// @Success 200 {object} entity.TopicContent "Success"
// @Router /api/v1/courses/{course_id}/topic/{topic_id}/content [get]
func (c *Controller) getCourseTopicContent(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req getTopicContentRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">ctx := r.Context()

        content, err := c.coursesService.GetContentByTopicID(ctx, req.TopicID)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, content, http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file44" style="display: none">package queries

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary Get course topic tasks
// @Description Get course topic tasks by topic id and. Also you must pass task order
// @Tags courses
// @Produce json
// @Security     BearerAuth
// @param Authorization header string true "Authorization token"
// @Param course_id path string true "course id"
// @Param topic_id path string true "topic id"
// @Param order path string true "number of task"
// @Success 200 {object} entity.PracticalTask "Success"
// @Router /api/v1/courses/{course_id}/topic/{topic_id}/tasks/{order} [get]
func (c *Controller) getCourseTopicTasks(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req getTopicTasksRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">ctx := r.Context()

        tasks, err := c.coursesService.GetTasksByTopicIDAndOrderNum(ctx, req.TopicID, req.Order)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, tasks, http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file45" style="display: none">package queries

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary get quizzes by topic id
// @Description get quizzes list by topic id
// @Tags courses
// @Produce json
// @Security     BearerAuth
// @param Authorization header string true "Authorization token"
// @Param course_id path string true "course id"
// @Param topic_id path string true "topic id"
// @Success 200 {object} getTopicQuizzesResponse "Success"
// @Router /api/v1/courses/{course_id}/topic/{topic_id}/quizzes [get]
func (c *Controller) getCourseTopicQuizzes(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        var req getTopicQuizzesRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>

        <span class="cov0" title="0">ctx := r.Context()

        quizzes, err := c.coursesService.GetQuizzesByTopicID(ctx, req.TopicID)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, convertToGetTopicQuizzesResponse(quizzes), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file46" style="display: none">package queries

import (
        "errors"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/samber/lo"
        "net/http"
        "strconv"
        "time"
)

//go:generate easyjson -all models.go

var (
        errCourseOrTopicIDEmpty = errors.New("course_id or topic_id is empty")
)

type getTopicContentRequest struct {
        getTopicQuizzesRequest
}

type getTopicQuizzesRequest struct {
        CourseID string
        TopicID  string
}

type getTopicTasksRequest struct {
        CourseID string
        TopicID  string
        Order    int
}

type getCoursesListRequest struct {
        Limit         int      `json:"limit"`
        Offset        int      `json:"offset"`
        CategoriesIDs []string `json:"categories_ids"`
}

type getCourseResponse struct {
        ID          string    `json:"id"`
        Title       string    `json:"title"`
        ImageURL    *string   `json:"image_url"`
        Category    category  `json:"category"`
        Description string    `json:"description"`
        CreatedBy   string    `json:"created_by"`
        CreatedAt   time.Time `json:"created_at"`
        UpdatedAt   time.Time `json:"updated_at"`
}

type getCourseDetailedResponse struct {
        Course getCourseResponse `json:"course"`
        Topics []topic           `json:"topics"`
}

type getCoursesListResponse struct {
        Courses []getCourseResponse `json:"courses"`
}

type category struct {
        ID        string    `json:"id"`
        Name      string    `json:"name"`
        CreatedBy string    `json:"created_by"`
        CreatedAt time.Time `json:"created_at"`
        UpdatedAt time.Time `json:"updated_at"`
}

type topic struct {
        ID          string    `json:"id"`
        CourseID    string    `json:"course_id"`
        Title       string    `json:"title"`
        Description string    `json:"description"`
        OrderNumber int       `json:"order_number"`
        CreatedAt   time.Time `json:"created_at"`
        UpdatedAt   time.Time `json:"updated_at"`
}

type getTopicQuizzesResponse struct {
        Quizzes []quizz `json:"quizzes"`
}

type quizz struct {
        ID             string    `json:"id"`
        TopicID        string    `json:"topic_id"`
        Question       string    `json:"question"`
        Options        []string  `json:"options"`
        MultipleChoice bool      `json:"multiple_choice"`
        CreatedAt      time.Time `json:"created_at"`
        UpdatedAt      time.Time `json:"updated_at"`
}

func convertToGetTopicQuizzesResponse(quizzes []*entity.Quiz) getTopicQuizzesResponse <span class="cov0" title="0">{
        return getTopicQuizzesResponse{
                Quizzes: lo.Map(quizzes, func(e *entity.Quiz, _ int) quizz </span><span class="cov0" title="0">{
                        return convertQuiz(e)
                }</span>),
        }
}

func convertQuiz(e *entity.Quiz) quizz <span class="cov0" title="0">{
        return quizz{
                ID:             e.ID.String(),
                TopicID:        e.TopicID.String(),
                Question:       e.Question,
                Options:        e.Options,
                MultipleChoice: e.MultipleChoice,
                CreatedAt:      e.CreatedAt,
                UpdatedAt:      e.UpdatedAt,
        }
}</span>

func convertToGetCoursesListResponse(courses []*entity.Course) getCoursesListResponse <span class="cov0" title="0">{
        courseResponses := make([]getCourseResponse, len(courses))
        for i, course := range courses </span><span class="cov0" title="0">{
                courseResponses[i] = convertCourse(course)
        }</span>
        <span class="cov0" title="0">return getCoursesListResponse{
                Courses: courseResponses,
        }</span>
}

type getCategoriesListResponse struct {
        Categories []category `json:"categories"`
}

func convertToGetCategoriesListResponse(categories []*entity.Category) getCategoriesListResponse <span class="cov0" title="0">{
        categoryResponses := make([]category, len(categories))
        for i, cat := range categories </span><span class="cov0" title="0">{
                categoryResponses[i] = convertToCategory(cat)
        }</span>
        <span class="cov0" title="0">return getCategoriesListResponse{
                Categories: categoryResponses,
        }</span>
}

func convertToCategory(cat *entity.Category) category <span class="cov0" title="0">{
        return category{
                ID:        cat.ID.String(),
                Name:      cat.Name,
                CreatedBy: cat.CreatedBy.String(),
                CreatedAt: cat.CreatedAt,
                UpdatedAt: cat.UpdatedAt,
        }
}</span>

func convertToTopic(t *entity.Topic) topic <span class="cov0" title="0">{
        return topic{
                ID:          t.ID.String(),
                Title:       t.Title,
                Description: t.Description,
                CourseID:    t.CourseID.String(),
                OrderNumber: t.OrderNumber,
                CreatedAt:   t.CreatedAt,
                UpdatedAt:   t.UpdatedAt,
        }
}</span>

func convertToGetCourseDetailedResponse(c *entity.Course) getCourseDetailedResponse <span class="cov0" title="0">{
        return getCourseDetailedResponse{
                Course: convertCourse(c),
                Topics: lo.Map(c.Topics, func(t *entity.Topic, _ int) topic </span><span class="cov0" title="0">{
                        return convertToTopic(t)
                }</span>),
        }
}

func convertCourse(c *entity.Course) getCourseResponse <span class="cov0" title="0">{
        return getCourseResponse{
                ID:          c.ID.String(),
                Title:       c.Title,
                ImageURL:    c.ImageURL,
                Category:    convertToCategory(&amp;c.Category),
                Description: c.Description,
                CreatedBy:   c.CreatedBy.String(),
                CreatedAt:   c.CreatedAt,
                UpdatedAt:   c.UpdatedAt,
        }
}</span>

func (r *getCoursesListRequest) toParams() *entity.GetCoursesParams <span class="cov0" title="0">{
        if r.Limit == 0 </span><span class="cov0" title="0">{
                r.Limit = 15
        }</span>
        <span class="cov0" title="0">return &amp;entity.GetCoursesParams{
                Limit:         r.Limit,
                Offset:        r.Offset,
                CategoriesIDs: r.CategoriesIDs,
        }</span>
}

func (req *getTopicQuizzesRequest) GetParameters(r *http.Request) error <span class="cov0" title="0">{
        req.CourseID = r.PathValue("course_id")
        req.TopicID = r.PathValue("topic_id")
        if req.CourseID == "" || req.TopicID == "" </span><span class="cov0" title="0">{
                return errCourseOrTopicIDEmpty
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (req *getTopicTasksRequest) GetParameters(r *http.Request) error <span class="cov0" title="0">{
        var err error
        req.CourseID = r.PathValue("course_id")
        req.TopicID = r.PathValue("topic_id")
        req.Order, err = strconv.Atoi(r.PathValue("order"))
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if req.CourseID == "" || req.TopicID == "" </span><span class="cov0" title="0">{
                return errCourseOrTopicIDEmpty
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file47" style="display: none">// Code generated by easyjson for marshaling/unmarshaling. DO NOT EDIT.

package queries

import (
        json "encoding/json"
        easyjson "github.com/mailru/easyjson"
        jlexer "github.com/mailru/easyjson/jlexer"
        jwriter "github.com/mailru/easyjson/jwriter"
)

// suppress unused package warning
var (
        _ *json.RawMessage
        _ *jlexer.Lexer
        _ *jwriter.Writer
        _ easyjson.Marshaler
)

func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries(in *jlexer.Lexer, out *topic) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        out.ID = string(in.String())</span>
                case "course_id":<span class="cov0" title="0">
                        out.CourseID = string(in.String())</span>
                case "title":<span class="cov0" title="0">
                        out.Title = string(in.String())</span>
                case "description":<span class="cov0" title="0">
                        out.Description = string(in.String())</span>
                case "order_number":<span class="cov0" title="0">
                        out.OrderNumber = int(in.Int())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries(out *jwriter.Writer, in topic) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.String(string(in.ID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"course_id\":"
                out.RawString(prefix)
                out.String(string(in.CourseID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"title\":"
                out.RawString(prefix)
                out.String(string(in.Title))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"description\":"
                out.RawString(prefix)
                out.String(string(in.Description))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"order_number\":"
                out.RawString(prefix)
                out.Int(int(in.OrderNumber))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v topic) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v topic) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *topic) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *topic) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries1(in *jlexer.Lexer, out *quizz) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        out.ID = string(in.String())</span>
                case "topic_id":<span class="cov0" title="0">
                        out.TopicID = string(in.String())</span>
                case "question":<span class="cov0" title="0">
                        out.Question = string(in.String())</span>
                case "options":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Options = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Options == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Options = make([]string, 0, 4)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Options = []string{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Options = (out.Options)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v1 string
                                        v1 = string(in.String())
                                        out.Options = append(out.Options, v1)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                case "multiple_choice":<span class="cov0" title="0">
                        out.MultipleChoice = bool(in.Bool())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries1(out *jwriter.Writer, in quizz) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.String(string(in.ID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"topic_id\":"
                out.RawString(prefix)
                out.String(string(in.TopicID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"question\":"
                out.RawString(prefix)
                out.String(string(in.Question))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"options\":"
                out.RawString(prefix)
                if in.Options == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v2, v3 := range in.Options </span><span class="cov0" title="0">{
                                if v2 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.String(string(v3))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"multiple_choice\":"
                out.RawString(prefix)
                out.Bool(bool(in.MultipleChoice))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v quizz) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries1(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v quizz) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries1(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *quizz) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries1(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *quizz) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries1(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries2(in *jlexer.Lexer, out *getTopicTasksRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "CourseID":<span class="cov0" title="0">
                        out.CourseID = string(in.String())</span>
                case "TopicID":<span class="cov0" title="0">
                        out.TopicID = string(in.String())</span>
                case "Order":<span class="cov0" title="0">
                        out.Order = int(in.Int())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries2(out *jwriter.Writer, in getTopicTasksRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"CourseID\":"
                out.RawString(prefix[1:])
                out.String(string(in.CourseID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"TopicID\":"
                out.RawString(prefix)
                out.String(string(in.TopicID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"Order\":"
                out.RawString(prefix)
                out.Int(int(in.Order))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getTopicTasksRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries2(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getTopicTasksRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries2(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getTopicTasksRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries2(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getTopicTasksRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries2(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries3(in *jlexer.Lexer, out *getTopicQuizzesResponse) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "quizzes":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Quizzes = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Quizzes == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Quizzes = make([]quizz, 0, 0)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Quizzes = []quizz{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Quizzes = (out.Quizzes)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v4 quizz
                                        (v4).UnmarshalEasyJSON(in)
                                        out.Quizzes = append(out.Quizzes, v4)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries3(out *jwriter.Writer, in getTopicQuizzesResponse) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"quizzes\":"
                out.RawString(prefix[1:])
                if in.Quizzes == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v5, v6 := range in.Quizzes </span><span class="cov0" title="0">{
                                if v5 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">(v6).MarshalEasyJSON(out)</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getTopicQuizzesResponse) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries3(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getTopicQuizzesResponse) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries3(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getTopicQuizzesResponse) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries3(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getTopicQuizzesResponse) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries3(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries4(in *jlexer.Lexer, out *getTopicQuizzesRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "CourseID":<span class="cov0" title="0">
                        out.CourseID = string(in.String())</span>
                case "TopicID":<span class="cov0" title="0">
                        out.TopicID = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries4(out *jwriter.Writer, in getTopicQuizzesRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"CourseID\":"
                out.RawString(prefix[1:])
                out.String(string(in.CourseID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"TopicID\":"
                out.RawString(prefix)
                out.String(string(in.TopicID))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getTopicQuizzesRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries4(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getTopicQuizzesRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries4(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getTopicQuizzesRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries4(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getTopicQuizzesRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries4(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries5(in *jlexer.Lexer, out *getTopicContentRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "CourseID":<span class="cov0" title="0">
                        out.CourseID = string(in.String())</span>
                case "TopicID":<span class="cov0" title="0">
                        out.TopicID = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries5(out *jwriter.Writer, in getTopicContentRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"CourseID\":"
                out.RawString(prefix[1:])
                out.String(string(in.CourseID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"TopicID\":"
                out.RawString(prefix)
                out.String(string(in.TopicID))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getTopicContentRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries5(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getTopicContentRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries5(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getTopicContentRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries5(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getTopicContentRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries5(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries6(in *jlexer.Lexer, out *getCoursesListResponse) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "courses":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Courses = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Courses == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Courses = make([]getCourseResponse, 0, 0)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Courses = []getCourseResponse{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Courses = (out.Courses)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v7 getCourseResponse
                                        (v7).UnmarshalEasyJSON(in)
                                        out.Courses = append(out.Courses, v7)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries6(out *jwriter.Writer, in getCoursesListResponse) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"courses\":"
                out.RawString(prefix[1:])
                if in.Courses == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v8, v9 := range in.Courses </span><span class="cov0" title="0">{
                                if v8 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">(v9).MarshalEasyJSON(out)</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getCoursesListResponse) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries6(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getCoursesListResponse) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries6(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getCoursesListResponse) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries6(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getCoursesListResponse) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries6(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries7(in *jlexer.Lexer, out *getCoursesListRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "limit":<span class="cov0" title="0">
                        out.Limit = int(in.Int())</span>
                case "offset":<span class="cov0" title="0">
                        out.Offset = int(in.Int())</span>
                case "categories_ids":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.CategoriesIDs = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.CategoriesIDs == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.CategoriesIDs = make([]string, 0, 4)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.CategoriesIDs = []string{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.CategoriesIDs = (out.CategoriesIDs)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v10 string
                                        v10 = string(in.String())
                                        out.CategoriesIDs = append(out.CategoriesIDs, v10)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries7(out *jwriter.Writer, in getCoursesListRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"limit\":"
                out.RawString(prefix[1:])
                out.Int(int(in.Limit))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"offset\":"
                out.RawString(prefix)
                out.Int(int(in.Offset))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"categories_ids\":"
                out.RawString(prefix)
                if in.CategoriesIDs == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v11, v12 := range in.CategoriesIDs </span><span class="cov0" title="0">{
                                if v11 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">out.String(string(v12))</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getCoursesListRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries7(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getCoursesListRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries7(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getCoursesListRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries7(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getCoursesListRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries7(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries8(in *jlexer.Lexer, out *getCourseResponse) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        out.ID = string(in.String())</span>
                case "title":<span class="cov0" title="0">
                        out.Title = string(in.String())</span>
                case "image_url":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.ImageURL = nil
                        }</span> else<span class="cov0" title="0"> {
                                if out.ImageURL == nil </span><span class="cov0" title="0">{
                                        out.ImageURL = new(string)
                                }</span>
                                <span class="cov0" title="0">*out.ImageURL = string(in.String())</span>
                        }
                case "category":<span class="cov0" title="0">
                        (out.Category).UnmarshalEasyJSON(in)</span>
                case "description":<span class="cov0" title="0">
                        out.Description = string(in.String())</span>
                case "created_by":<span class="cov0" title="0">
                        out.CreatedBy = string(in.String())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries8(out *jwriter.Writer, in getCourseResponse) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.String(string(in.ID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"title\":"
                out.RawString(prefix)
                out.String(string(in.Title))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"image_url\":"
                out.RawString(prefix)
                if in.ImageURL == nil </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.String(string(*in.ImageURL))
                }</span>
        }
        <span class="cov0" title="0">{
                const prefix string = ",\"category\":"
                out.RawString(prefix)
                (in.Category).MarshalEasyJSON(out)
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"description\":"
                out.RawString(prefix)
                out.String(string(in.Description))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_by\":"
                out.RawString(prefix)
                out.String(string(in.CreatedBy))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getCourseResponse) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries8(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getCourseResponse) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries8(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getCourseResponse) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries8(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getCourseResponse) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries8(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries9(in *jlexer.Lexer, out *getCourseDetailedResponse) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "course":<span class="cov0" title="0">
                        (out.Course).UnmarshalEasyJSON(in)</span>
                case "topics":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Topics = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Topics == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Topics = make([]topic, 0, 0)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Topics = []topic{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Topics = (out.Topics)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v13 topic
                                        (v13).UnmarshalEasyJSON(in)
                                        out.Topics = append(out.Topics, v13)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries9(out *jwriter.Writer, in getCourseDetailedResponse) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"course\":"
                out.RawString(prefix[1:])
                (in.Course).MarshalEasyJSON(out)
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"topics\":"
                out.RawString(prefix)
                if in.Topics == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v14, v15 := range in.Topics </span><span class="cov0" title="0">{
                                if v14 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">(v15).MarshalEasyJSON(out)</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getCourseDetailedResponse) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries9(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getCourseDetailedResponse) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries9(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getCourseDetailedResponse) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries9(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getCourseDetailedResponse) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries9(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries10(in *jlexer.Lexer, out *getCategoriesListResponse) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "categories":<span class="cov0" title="0">
                        if in.IsNull() </span><span class="cov0" title="0">{
                                in.Skip()
                                out.Categories = nil
                        }</span> else<span class="cov0" title="0"> {
                                in.Delim('[')
                                if out.Categories == nil </span><span class="cov0" title="0">{
                                        if !in.IsDelim(']') </span><span class="cov0" title="0">{
                                                out.Categories = make([]category, 0, 0)
                                        }</span> else<span class="cov0" title="0"> {
                                                out.Categories = []category{}
                                        }</span>
                                } else<span class="cov0" title="0"> {
                                        out.Categories = (out.Categories)[:0]
                                }</span>
                                <span class="cov0" title="0">for !in.IsDelim(']') </span><span class="cov0" title="0">{
                                        var v16 category
                                        (v16).UnmarshalEasyJSON(in)
                                        out.Categories = append(out.Categories, v16)
                                        in.WantComma()
                                }</span>
                                <span class="cov0" title="0">in.Delim(']')</span>
                        }
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries10(out *jwriter.Writer, in getCategoriesListResponse) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"categories\":"
                out.RawString(prefix[1:])
                if in.Categories == nil &amp;&amp; (out.Flags&amp;jwriter.NilSliceAsEmpty) == 0 </span><span class="cov0" title="0">{
                        out.RawString("null")
                }</span> else<span class="cov0" title="0"> {
                        out.RawByte('[')
                        for v17, v18 := range in.Categories </span><span class="cov0" title="0">{
                                if v17 &gt; 0 </span><span class="cov0" title="0">{
                                        out.RawByte(',')
                                }</span>
                                <span class="cov0" title="0">(v18).MarshalEasyJSON(out)</span>
                        }
                        <span class="cov0" title="0">out.RawByte(']')</span>
                }
        }
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v getCategoriesListResponse) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries10(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v getCategoriesListResponse) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries10(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *getCategoriesListResponse) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries10(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *getCategoriesListResponse) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries10(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries11(in *jlexer.Lexer, out *category) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "id":<span class="cov0" title="0">
                        out.ID = string(in.String())</span>
                case "name":<span class="cov0" title="0">
                        out.Name = string(in.String())</span>
                case "created_by":<span class="cov0" title="0">
                        out.CreatedBy = string(in.String())</span>
                case "created_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.CreatedAt).UnmarshalJSON(data))
                        }</span>
                case "updated_at":<span class="cov0" title="0">
                        if data := in.Raw(); in.Ok() </span><span class="cov0" title="0">{
                                in.AddError((out.UpdatedAt).UnmarshalJSON(data))
                        }</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries11(out *jwriter.Writer, in category) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"id\":"
                out.RawString(prefix[1:])
                out.String(string(in.ID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"name\":"
                out.RawString(prefix)
                out.String(string(in.Name))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_by\":"
                out.RawString(prefix)
                out.String(string(in.CreatedBy))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"created_at\":"
                out.RawString(prefix)
                out.Raw((in.CreatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"updated_at\":"
                out.RawString(prefix)
                out.Raw((in.UpdatedAt).MarshalJSON())
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v category) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries11(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v category) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries11(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *category) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries11(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *category) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersCoursesQueries11(l, v)
}</span>
</pre>
		
		<pre class="file" id="file48" style="display: none">package queries

import (
        "github.com/Rasikrr/learning_platform/internal/ports/http/middlewares"
        "github.com/Rasikrr/learning_platform/internal/services/courses"
        "net/http"
)

type Controller struct {
        coursesService courses.Service
        e              *middlewares.EnrollMiddleware
        m              *middlewares.AuthMiddleware
}

func NewController(
        coursesService courses.Service,
        m *middlewares.AuthMiddleware,
        e *middlewares.EnrollMiddleware,
) *Controller <span class="cov0" title="0">{
        return &amp;Controller{
                coursesService: coursesService,
                m:              m,
                e:              e,
        }
}</span>

func (c *Controller) Init(r *http.ServeMux) <span class="cov0" title="0">{
        auth := c.m.Handle
        r.HandleFunc("POST /api/v1/courses", c.getCourses)
        r.HandleFunc("GET /api/v1/courses/categories", c.getCategories)
        r.HandleFunc("GET /api/v1/courses/{id}", c.getCourse)
        r.HandleFunc("GET /api/v1/courses/{course_id}/topic/{topic_id}/content", auth(c.e.Handle(c.getCourseTopicContent)))
        r.HandleFunc("GET /api/v1/courses/{course_id}/topic/{topic_id}/quizzes", auth(c.e.Handle(c.getCourseTopicQuizzes)))
        r.HandleFunc("GET /api/v1/courses/{course_id}/topic/{topic_id}/tasks/{order}", auth(c.e.Handle(c.getCourseTopicTasks)))
}</span>
</pre>
		
		<pre class="file" id="file49" style="display: none">package enrollments

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

// @Summary enroll to course
// @Description enroll to course by course id
// @Tags courses
// @Accept json
// @Produce json
// @Security     BearerAuth
// @param Authorization header string true "Authorization token"
// @Param  request body enrollToCourseRequest true "request"
// @Success 200 {object} api.EmptySuccessResponse "Success"
// @Router /api/v1/courses/enroll [post]
func (c *Controller) enrollToCourse(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        ctx := r.Context()
        session, err := api.GetSession(ctx)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">var req enrollToCourseRequest
        if err := api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">if err := c.enrollmentsService.Enroll(ctx, session.UserID.String(), req.CourseID); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file50" style="display: none">// Code generated by easyjson for marshaling/unmarshaling. DO NOT EDIT.

package enrollments

import (
        json "encoding/json"
        easyjson "github.com/mailru/easyjson"
        jlexer "github.com/mailru/easyjson/jlexer"
        jwriter "github.com/mailru/easyjson/jwriter"
)

// suppress unused package warning
var (
        _ *json.RawMessage
        _ *jlexer.Lexer
        _ *jwriter.Writer
        _ easyjson.Marshaler
)

func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersEnrollments(in *jlexer.Lexer, out *enrollToCourseRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "course_id":<span class="cov0" title="0">
                        out.CourseID = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersEnrollments(out *jwriter.Writer, in enrollToCourseRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"course_id\":"
                out.RawString(prefix[1:])
                out.String(string(in.CourseID))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v enrollToCourseRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersEnrollments(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v enrollToCourseRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersEnrollments(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *enrollToCourseRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersEnrollments(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *enrollToCourseRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersEnrollments(l, v)
}</span>
</pre>
		
		<pre class="file" id="file51" style="display: none">package enrollments

import (
        "github.com/Rasikrr/learning_platform/internal/ports/http/middlewares"
        "github.com/Rasikrr/learning_platform/internal/services/enrollments"
        "net/http"
)

type Controller struct {
        enrollmentsService enrollments.Service
        m                  *middlewares.AuthMiddleware
}

func NewController(enrollmentsService enrollments.Service, m *middlewares.AuthMiddleware) *Controller <span class="cov0" title="0">{
        return &amp;Controller{
                enrollmentsService: enrollmentsService,
                m:                  m,
        }
}</span>

func (c *Controller) Init(r *http.ServeMux) <span class="cov0" title="0">{
        r.HandleFunc("POST /api/v1/courses/enroll", c.m.Handle(c.enrollToCourse))
}</span>
</pre>
		
		<pre class="file" id="file52" style="display: none">package faq

import "net/http"

// nolint
func (c *Controller) getAnswers(w http.ResponseWriter, r *http.Request) {<span class="cov0" title="0">

}</span>
</pre>
		
		<pre class="file" id="file53" style="display: none">package faq

import (
        "errors"
        "github.com/Rasikrr/learning_platform/api"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

//go:generate easyjson -all models.go

type postAnswerRequest struct {
        QuestionID string `json:"question_id"`
        Body       string `json:"body"`
}

type postQuestionRequest struct {
        Title      string `json:"title"`
        Body       string `json:"body"`
        CategoryID string `json:"category_id"`
}

func (r postAnswerRequest) Validate() error <span class="cov0" title="0">{
        if len(r.Body) == 0 </span><span class="cov0" title="0">{
                return errors.New("body is required")
        }</span>
        <span class="cov0" title="0">_, err := uuid.Parse(r.QuestionID)
        if err != nil </span><span class="cov0" title="0">{
                return errors.New("invalid question_id")
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (r postAnswerRequest) ToEntity(session *entity.Session) (*entity.Answer, error) <span class="cov0" title="0">{
        if err := r.Validate(); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">questionID, err := uuid.Parse(r.QuestionID)
        if err != nil </span><span class="cov0" title="0">{
                return nil, errors.New("invalid question_id")
        }</span>
        <span class="cov0" title="0">question := &amp;entity.Question{
                ID: questionID,
        }
        answer := &amp;entity.Answer{
                ID:       uuid.New(),
                Question: question,
                Body:     r.Body,
                Author:   api.GetUserFromSession(session),
        }
        return answer, nil</span>
}

func (r postQuestionRequest) Validate() error <span class="cov0" title="0">{
        if len(r.Title) == 0 </span><span class="cov0" title="0">{
                return errors.New("title is required")
        }</span>
        <span class="cov0" title="0">if len(r.Body) == 0 </span><span class="cov0" title="0">{
                return errors.New("body is required")
        }</span>
        <span class="cov0" title="0">_, err := uuid.Parse(r.CategoryID)
        if err != nil </span><span class="cov0" title="0">{
                return errors.New("invalid category_id")
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (r postQuestionRequest) ToEntity(session *entity.Session) (*entity.Question, error) <span class="cov0" title="0">{
        if err := r.Validate(); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">categoryID, err := uuid.Parse(r.CategoryID)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">category := &amp;entity.QuestionCategory{
                ID: categoryID,
        }
        return &amp;entity.Question{
                ID:        uuid.New(),
                Category:  category,
                Author:    api.GetUserFromSession(session),
                Title:     r.Title,
                Body:      r.Body,
                CreatedAt: time.Now(),
                UpdatedAt: time.Now(),
        }, nil</span>
}
</pre>
		
		<pre class="file" id="file54" style="display: none">// Code generated by easyjson for marshaling/unmarshaling. DO NOT EDIT.

package faq

import (
        json "encoding/json"
        easyjson "github.com/mailru/easyjson"
        jlexer "github.com/mailru/easyjson/jlexer"
        jwriter "github.com/mailru/easyjson/jwriter"
)

// suppress unused package warning
var (
        _ *json.RawMessage
        _ *jlexer.Lexer
        _ *jwriter.Writer
        _ easyjson.Marshaler
)

func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq(in *jlexer.Lexer, out *postQuestionRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "title":<span class="cov0" title="0">
                        out.Title = string(in.String())</span>
                case "body":<span class="cov0" title="0">
                        out.Body = string(in.String())</span>
                case "category_id":<span class="cov0" title="0">
                        out.CategoryID = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq(out *jwriter.Writer, in postQuestionRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"title\":"
                out.RawString(prefix[1:])
                out.String(string(in.Title))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"body\":"
                out.RawString(prefix)
                out.String(string(in.Body))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"category_id\":"
                out.RawString(prefix)
                out.String(string(in.CategoryID))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v postQuestionRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v postQuestionRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *postQuestionRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *postQuestionRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq(l, v)
}</span>
func easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq1(in *jlexer.Lexer, out *postAnswerRequest) <span class="cov0" title="0">{
        isTopLevel := in.IsStart()
        if in.IsNull() </span><span class="cov0" title="0">{
                if isTopLevel </span><span class="cov0" title="0">{
                        in.Consumed()
                }</span>
                <span class="cov0" title="0">in.Skip()
                return</span>
        }
        <span class="cov0" title="0">in.Delim('{')
        for !in.IsDelim('}') </span><span class="cov0" title="0">{
                key := in.UnsafeFieldName(false)
                in.WantColon()
                if in.IsNull() </span><span class="cov0" title="0">{
                        in.Skip()
                        in.WantComma()
                        continue</span>
                }
                <span class="cov0" title="0">switch key </span>{
                case "question_id":<span class="cov0" title="0">
                        out.QuestionID = string(in.String())</span>
                case "body":<span class="cov0" title="0">
                        out.Body = string(in.String())</span>
                default:<span class="cov0" title="0">
                        in.SkipRecursive()</span>
                }
                <span class="cov0" title="0">in.WantComma()</span>
        }
        <span class="cov0" title="0">in.Delim('}')
        if isTopLevel </span><span class="cov0" title="0">{
                in.Consumed()
        }</span>
}
func easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq1(out *jwriter.Writer, in postAnswerRequest) <span class="cov0" title="0">{
        out.RawByte('{')
        first := true
        _ = first
        </span><span class="cov0" title="0">{
                const prefix string = ",\"question_id\":"
                out.RawString(prefix[1:])
                out.String(string(in.QuestionID))
        }</span>
        <span class="cov0" title="0">{
                const prefix string = ",\"body\":"
                out.RawString(prefix)
                out.String(string(in.Body))
        }</span>
        <span class="cov0" title="0">out.RawByte('}')</span>
}

// MarshalJSON supports json.Marshaler interface
func (v postAnswerRequest) MarshalJSON() ([]byte, error) <span class="cov0" title="0">{
        w := jwriter.Writer{}
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq1(&amp;w, v)
        return w.Buffer.BuildBytes(), w.Error
}</span>

// MarshalEasyJSON supports easyjson.Marshaler interface
func (v postAnswerRequest) MarshalEasyJSON(w *jwriter.Writer) <span class="cov0" title="0">{
        easyjsonD2b7633eEncodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq1(w, v)
}</span>

// UnmarshalJSON supports json.Unmarshaler interface
func (v *postAnswerRequest) UnmarshalJSON(data []byte) error <span class="cov0" title="0">{
        r := jlexer.Lexer{Data: data}
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq1(&amp;r, v)
        return r.Error()
}</span>

// UnmarshalEasyJSON supports easyjson.Unmarshaler interface
func (v *postAnswerRequest) UnmarshalEasyJSON(l *jlexer.Lexer) <span class="cov0" title="0">{
        easyjsonD2b7633eDecodeGithubComRasikrrLearningPlatformInternalPortsHttpHandlersFaq1(l, v)
}</span>
</pre>
		
		<pre class="file" id="file55" style="display: none">package faq

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

func (c *Controller) postAnswer(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        session, err := api.GetSession(r.Context())
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">var req postAnswerRequest
        if err = api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">answer, err := req.ToEntity(session)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">ctx := r.Context()
        if err = c.faqService.PostAnswer(ctx, answer); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file56" style="display: none">package faq

import (
        "github.com/Rasikrr/learning_platform/api"
        "net/http"
)

func (c *Controller) postQuestion(w http.ResponseWriter, r *http.Request) <span class="cov0" title="0">{
        session, err := api.GetSession(r.Context())
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">var req postQuestionRequest
        if err = api.GetData(r, &amp;req); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>
        <span class="cov0" title="0">question, err := req.ToEntity(session)
        if err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusBadRequest, err)
                return
        }</span>

        <span class="cov0" title="0">ctx := r.Context()
        if err := c.faqService.PostQuestion(ctx, question); err != nil </span><span class="cov0" title="0">{
                api.SendError(w, http.StatusInternalServerError, err)
                return
        }</span>
        <span class="cov0" title="0">api.SendData(w, api.NewEmptySuccessResponse(), http.StatusOK)</span>
}
</pre>
		
		<pre class="file" id="file57" style="display: none">package faq

import (
        "github.com/Rasikrr/learning_platform/internal/ports/http/middlewares"
        "github.com/Rasikrr/learning_platform/internal/services/faq"
        "net/http"
)

type Controller struct {
        faqService faq.Service
        m          *middlewares.AuthMiddleware
}

func NewController(authMiddleware *middlewares.AuthMiddleware, faqService faq.Service) *Controller <span class="cov0" title="0">{
        return &amp;Controller{
                faqService: faqService,
                m:          authMiddleware,
        }
}</span>

func (c *Controller) Init(r *http.ServeMux) <span class="cov0" title="0">{
        r.HandleFunc("POST /api/v1/faq/question/post", c.m.Handle(c.postQuestion))
        r.HandleFunc("GET /api/v1/faq/answers", c.getAnswers)
        r.HandleFunc("POST /api/v1/faq/answer/post", c.m.Handle(c.postAnswer))
}</span>
</pre>
		
		<pre class="file" id="file58" style="display: none">package middlewares

import (
        "context"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        authS "github.com/Rasikrr/learning_platform/internal/services/auth"
        "log"
        "net/http"
)

type sessionKeyType string

const (
        SessionKey sessionKeyType = "session"
        authHeader string         = "Authorization"
)

type AuthMiddleware struct {
        authService authS.Service
}

func NewAuthMiddleware(authService authS.Service) *AuthMiddleware <span class="cov0" title="0">{
        return &amp;AuthMiddleware{
                authService: authService,
        }
}</span>

func (m *AuthMiddleware) Handle(next http.HandlerFunc) http.HandlerFunc <span class="cov0" title="0">{
        return func(w http.ResponseWriter, r *http.Request) </span><span class="cov0" title="0">{
                log.Println("entering auth middleware")
                session, err := m.parseAuth(r)
                if err != nil </span><span class="cov0" title="0">{
                        SendError(w, http.StatusUnauthorized, err)
                        return
                }</span>
                <span class="cov0" title="0">r = r.WithContext(context.WithValue(r.Context(), SessionKey, session))
                next(w, r)</span>
        }
}

func (m *AuthMiddleware) parseAuth(r *http.Request) (*entity.Session, error) <span class="cov0" title="0">{
        token := r.Header.Get(authHeader)
        if token == "" </span><span class="cov0" title="0">{
                return nil, errors.New("authorization header is empty")
        }</span>
        <span class="cov0" title="0">ctx := r.Context()
        session, err := m.authService.CheckToken(ctx, token)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return session, nil</span>
}
</pre>
		
		<pre class="file" id="file59" style="display: none">package middlewares

import "net/http"

func CORSMiddleware(next http.Handler) http.Handler <span class="cov0" title="0">{
        return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) </span><span class="cov0" title="0">{
                w.Header().Set("Access-Control-Allow-Origin", "*")
                w.Header().Set("Access-Control-Allow-Methods", "POST, GET, OPTIONS, PUT, DELETE")
                w.Header().Set("Access-Control-Allow-Headers", "Accept, Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization")
                w.Header().Set("Access-Control-Allow-Credentials", "true")

                if r.Method == "OPTIONS" </span><span class="cov0" title="0">{
                        return
                }</span>

                <span class="cov0" title="0">next.ServeHTTP(w, r)</span>
        })
}
</pre>
		
		<pre class="file" id="file60" style="display: none">package middlewares

import (
        "errors"
        "github.com/Rasikrr/learning_platform/internal/services/enrollments"
        "log"
        "net/http"
)

type EnrollMiddleware struct {
        enrollService enrollments.Service
}

func NewEnrollMiddleware(enrollService enrollments.Service) *EnrollMiddleware <span class="cov0" title="0">{
        return &amp;EnrollMiddleware{
                enrollService: enrollService,
        }
}</span>

func (m *EnrollMiddleware) Handle(next http.HandlerFunc) http.HandlerFunc <span class="cov0" title="0">{
        return func(w http.ResponseWriter, r *http.Request) </span><span class="cov0" title="0">{
                log.Println("entering enroll middleware")
                session, err := GetSession(r.Context())
                if err != nil </span><span class="cov0" title="0">{
                        SendError(w, http.StatusInternalServerError, err)
                        return
                }</span>
                <span class="cov0" title="0">courseID := r.URL.Query().Get("course_id")
                if courseID == "" </span><span class="cov0" title="0">{
                        courseID = r.PathValue("course_id")
                        if courseID == "" </span><span class="cov0" title="0">{
                                SendError(w, http.StatusBadRequest, errors.New("course id is empty"))
                                return
                        }</span>
                }
                <span class="cov0" title="0">enrolled, err := m.enrollService.CheckEnrollment(r.Context(), session.UserID.String(), courseID)
                if err != nil </span><span class="cov0" title="0">{
                        SendError(w, http.StatusInternalServerError, err)
                        return
                }</span>
                <span class="cov0" title="0">if !enrolled </span><span class="cov0" title="0">{
                        SendError(w, http.StatusBadRequest, errors.New("user is not enrolled in course"))
                        return
                }</span>
                <span class="cov0" title="0">next(w, r)</span>
        }
}
</pre>
		
		<pre class="file" id="file61" style="display: none">package middlewares

import (
        "errors"
        "net/http"
)

var (
        ErrInternalServerError = errors.New("internal server error")
)

func PanicHandler(next http.Handler) http.Handler <span class="cov0" title="0">{
        return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) </span><span class="cov0" title="0">{
                defer func() </span><span class="cov0" title="0">{
                        if err := recover(); err != nil </span><span class="cov0" title="0">{
                                SendError(w, http.StatusInternalServerError, ErrInternalServerError)
                        }</span>
                }()
                <span class="cov0" title="0">next.ServeHTTP(w, r)</span>
        })
}
</pre>
		
		<pre class="file" id="file62" style="display: none">package middlewares

import (
        "context"
        "encoding/json"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "net/http"
)

type ErrorResponse struct {
        Error  string `json:"error"`
        Status int    `json:"status"`
}

// nolint: errcheck
func SendError(w http.ResponseWriter, statusCode int, err error) <span class="cov0" title="0">{
        w.Header().Set("Content-Type", "application/json")
        w.WriteHeader(statusCode)
        r := ErrorResponse{
                Error:  err.Error(),
                Status: statusCode,
        }
        bb, _ := json.Marshal(r)
        w.Write(bb)
}</span>

func GetSession(ctx context.Context) (*entity.Session, error) <span class="cov0" title="0">{
        token := ctx.Value(SessionKey)
        if token == nil </span><span class="cov0" title="0">{
                return nil, errors.New("session is empty")
        }</span>
        <span class="cov0" title="0">s, ok := token.(*entity.Session)
        if !ok </span><span class="cov0" title="0">{
                return nil, errors.New("session is not Session")
        }</span>
        <span class="cov0" title="0">return s, nil</span>
}
</pre>
		
		<pre class="file" id="file63" style="display: none">package http

// nolint: revive
import (
        "context"
        "fmt"
        "github.com/Rasikrr/learning_platform/configs"
        _ "github.com/Rasikrr/learning_platform/docs"
        "github.com/Rasikrr/learning_platform/internal/ports/http/handlers/auth"
        "github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/commands"
        "github.com/Rasikrr/learning_platform/internal/ports/http/handlers/courses/queries"
        "github.com/Rasikrr/learning_platform/internal/ports/http/handlers/enrollments"
        "github.com/Rasikrr/learning_platform/internal/ports/http/handlers/faq"
        "github.com/Rasikrr/learning_platform/internal/ports/http/middlewares"
        authS "github.com/Rasikrr/learning_platform/internal/services/auth"
        coursesS "github.com/Rasikrr/learning_platform/internal/services/courses"
        enrollmentsS "github.com/Rasikrr/learning_platform/internal/services/enrollments"
        faqS "github.com/Rasikrr/learning_platform/internal/services/faq"
        submissionS "github.com/Rasikrr/learning_platform/internal/services/submissions"
        httpSwagger "github.com/swaggo/http-swagger"

        "log"
        "net/http"
        "time"
)

const (
        name         = "http server"
        idleTimeout  = time.Minute * 3
        readTimeout  = time.Second * 60
        writeTimeout = time.Second * 60
)

// @title Learning Platform API
// @version 1.0
// @description This is docs for Learning Platform API
// @termsOfService http://swagger.io/terms/

// @contact.name Pick me team
// @contact.url https://github.com/Rasikrr/learning_platform
// @contact.email leaning_platform@gmail.com

// @license.name Apache 2.0
// @license.url http://www.apache.org/licenses/LICENSE-2.0.html

// @host localhost:8081
// @BasePath /

// Server @securityDefinitions.apikey BearerAuth
// @in header
// @name Authorization
type Server struct {
        name string
        port string
        host string
        srv  *http.Server
}

func NewServer(
        cfg *configs.Config,
        authService authS.Service,
        courseService coursesS.Service,
        enrollmentsService enrollmentsS.Service,
        submissionsService submissionS.Service,
        faqService faqS.Service,
) *Server <span class="cov0" title="0">{
        router := http.NewServeMux()

        // Middlewares
        authMiddleware := middlewares.NewAuthMiddleware(authService)
        enrollmentMiddleware := middlewares.NewEnrollMiddleware(enrollmentsService)

        // Controllers
        faqController := faq.NewController(authMiddleware, faqService)
        authController := auth.NewController(authService)
        coursesQueriesController := queries.NewController(courseService, authMiddleware, enrollmentMiddleware)
        enrollmentsController := enrollments.NewController(enrollmentsService, authMiddleware)
        courseCommandsController := commands.NewController(courseService, authMiddleware, enrollmentMiddleware, submissionsService)

        // Init controllers
        coursesQueriesController.Init(router)
        authController.Init(router)
        faqController.Init(router)
        enrollmentsController.Init(router)
        courseCommandsController.Init(router)

        // CORS
        r := middlewares.CORSMiddleware(router)
        r = middlewares.PanicHandler(r)

        srv := &amp;http.Server{
                Addr:         address(cfg.Server.Host, cfg.Server.Port),
                Handler:      r,
                ReadTimeout:  readTimeout,
                WriteTimeout: writeTimeout,
                IdleTimeout:  idleTimeout,
        }

        s := &amp;Server{
                name: name,
                port: cfg.Server.Port,
                host: cfg.Server.Host,
                srv:  srv,
        }
        s.initSwagger(router)
        return s
}</span>

func address(host, port string) string <span class="cov0" title="0">{
        return fmt.Sprintf("%s:%s", host, port)
}</span>

func (s *Server) initSwagger(router *http.ServeMux) <span class="cov0" title="0">{
        hostPort := fmt.Sprintf("%s:%s", s.host, s.port)
        url := fmt.Sprintf("http://%s/swagger/doc.json", hostPort)
        router.Handle("/swagger/",
                httpSwagger.Handler(httpSwagger.URL(url)),
        )
}</span>

func (s *Server) Start() error <span class="cov0" title="0">{
        log.Println("starting http server")
        return s.srv.ListenAndServe()
}</span>

func (s *Server) Shutdown(ctx context.Context) error <span class="cov0" title="0">{
        if err := s.srv.Shutdown(ctx); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file64" style="display: none">// nolint: unused
package answers

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID         uuid.UUID
        QuestionID uuid.UUID
        UserID     uuid.UUID
        Body       string
        CreatedAt  time.Time
        UpdatedAt  time.Time
}

type models []model

func (m model) convert() (*entity.Answer, error) <span class="cov0" title="0">{
        question := &amp;entity.Question{
                ID: m.QuestionID,
        }
        user := &amp;entity.User{
                ID: m.UserID,
        }
        return &amp;entity.Answer{
                ID:        m.ID,
                Author:    user,
                Question:  question,
                Body:      m.Body,
                CreatedAt: m.CreatedAt,
                UpdatedAt: m.UpdatedAt,
        }, nil
}</span>

func (m models) convert() ([]*entity.Answer, error) <span class="cov0" title="0">{
        var err error
        out := make([]*entity.Answer, len(m))
        for i, item := range m </span><span class="cov0" title="0">{
                out[i], err = item.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file65" style="display: none">package answers

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
)

type Repository interface {
        Create(ctx context.Context, answer *entity.Answer) error
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{db}
}</span>

func (r *repository) Create(ctx context.Context, answer *entity.Answer) error <span class="cov0" title="0">{
        _, err := r.db.Exec(ctx, createAnswerStmt, answer.ID, answer.Question.ID, answer.Author.ID, answer.Body)
        return err
}</span>
</pre>
		
		<pre class="file" id="file66" style="display: none">package categories

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID        uuid.UUID `db:"id"`
        Name      string    `db:"name"`
        CreatedBy uuid.UUID `db:"created_by"`
        CreatedAt time.Time `db:"created_at"`
        UpdatedAt time.Time `db:"updated_at"`
}

type models []model

// nolint: unparam
func (m model) convert() (*entity.Category, error) <span class="cov0" title="0">{
        return &amp;entity.Category{
                ID:        m.ID,
                Name:      m.Name,
                CreatedBy: m.CreatedBy,
                CreatedAt: m.CreatedAt,
                UpdatedAt: m.UpdatedAt,
        }, nil
}</span>

func (mm models) convert() ([]*entity.Category, error) <span class="cov0" title="0">{
        out := make([]*entity.Category, len(mm))
        for i, m := range mm </span><span class="cov0" title="0">{
                res, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">out[i] = res</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file67" style="display: none">package categories

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
        "github.com/google/uuid"
        "github.com/lib/pq"
)

type Repository interface {
        GetAll(ctx context.Context) ([]*entity.Category, error)
        GetByIDs(ctx context.Context, ids []uuid.UUID) ([]*entity.Category, error)
        GetByID(ctx context.Context, id uuid.UUID) (*entity.Category, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) GetByID(ctx context.Context, id uuid.UUID) (*entity.Category, error) <span class="cov0" title="0">{
        var m model
        if err := pgxscan.Get(ctx, r.db, &amp;m, getCategoriesByIDStmt, id); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return m.convert()</span>
}

func (r *repository) GetByIDs(ctx context.Context, ids []uuid.UUID) ([]*entity.Category, error) <span class="cov0" title="0">{
        var mm models
        if err := pgxscan.Select(ctx, r.db, &amp;mm, getCategoriesByIDsStmt, pq.Array(ids)); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return mm.convert()</span>
}

func (r *repository) GetAll(ctx context.Context) ([]*entity.Category, error) <span class="cov0" title="0">{
        var mm models
        if err := pgxscan.Select(ctx, r.db, &amp;mm, getAllCategoriesStmt); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return mm.convert()</span>
}
</pre>
		
		<pre class="file" id="file68" style="display: none">package content

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID                  uuid.UUID `db:"id"`
        TopicID             uuid.UUID `db:"topic_id"`
        Content             string    `db:"content"`
        AdditionalResources []string  `db:"additional_resources"`
        VideoURLs           []string  `db:"video_urls"`
        ImageURLs           []string  `db:"image_urls"`
        CreatedAt           time.Time `db:"created_at"`
        UpdatedAt           time.Time `db:"updated_at"`
}

type models []model

// nolint
func (m model) convert() (*entity.TopicContent, error) <span class="cov0" title="0">{
        return &amp;entity.TopicContent{
                ID:                  m.ID,
                TopicID:             m.TopicID,
                Content:             m.Content,
                AdditionalResources: m.AdditionalResources,
                VideoURLs:           m.VideoURLs,
                ImageURLs:           m.ImageURLs,
                CreatedAt:           m.CreatedAt,
                UpdatedAt:           m.UpdatedAt,
        }, nil
}</span>

func (mm models) convert() ([]*entity.TopicContent, error) <span class="cov0" title="0">{
        out := make([]*entity.TopicContent, len(mm))
        for i, m := range mm </span><span class="cov0" title="0">{
                res, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">out[i] = res</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file69" style="display: none">package content

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
        "github.com/lib/pq"
)

type Repository interface {
        GetByTopicID(ctx context.Context, id string) (*entity.TopicContent, error)
        GetByTopicIDs(ctx context.Context, topicIDs []string) ([]*entity.TopicContent, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) GetByTopicIDs(ctx context.Context, topicIDs []string) ([]*entity.TopicContent, error) <span class="cov0" title="0">{
        var mm models
        if err := pgxscan.Select(ctx, r.db, &amp;mm, getByTopicIDsStmt, pq.Array(topicIDs)); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return mm.convert()</span>
}

func (r *repository) GetByTopicID(ctx context.Context, id string) (*entity.TopicContent, error) <span class="cov0" title="0">{
        var m model
        if err := pgxscan.Get(ctx, r.db, &amp;m, getByIDStmt, id); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return m.convert()</span>
}
</pre>
		
		<pre class="file" id="file70" style="display: none">package courses

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID          uuid.UUID
        Title       string
        ImageURL    *string
        CategoryID  uuid.UUID
        Description string
        CreatedBy   uuid.UUID
        CreatedAt   time.Time
        UpdatedAt   time.Time
}

type models []model

func (m model) convert() (*entity.Course, error) <span class="cov0" title="0">{
        category := entity.Category{
                ID: m.CategoryID,
        }
        return &amp;entity.Course{
                ID:          m.ID,
                Title:       m.Title,
                ImageURL:    m.ImageURL,
                Category:    category,
                Description: m.Description,
                CreatedBy:   m.CreatedBy,
                CreatedAt:   m.CreatedAt,
                UpdatedAt:   m.UpdatedAt,
        }, nil
}</span>

func (mm models) convert() ([]*entity.Course, error) <span class="cov0" title="0">{
        out := make([]*entity.Course, len(mm))
        for i, m := range mm </span><span class="cov0" title="0">{
                res, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">out[i] = res</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file71" style="display: none">package courses

import (
        sq "github.com/Masterminds/squirrel"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/lib/pq"
)

var (
        coursesTable = "courses c"
        coursesCols  = []string{
                "c.id",
                "c.title",
                "c.image_url",
                "c.category_id",
                "c.description",
                "c.created_by",
                "c.created_at",
                "c.updated_at",
        }

        // nolint
        categoriesCols = []string{
                "t.id",
                "t.name",
                "t.created_by",
                "t.created_at",
                "t.updated_at",
        }

        psql = sq.StatementBuilder.PlaceholderFormat(sq.Dollar)
)

func generateQuery(params *entity.GetCoursesParams) (string, []interface{}, error) <span class="cov0" title="0">{
        b := psql.Select(coursesCols...).From(coursesTable)
        if len(params.CategoriesIDs) &gt; 0 </span><span class="cov0" title="0">{
                b = b.Where("c.category_id = ANY($1)", pq.Array(params.CategoriesIDs))
        }</span>
        // nolint
        <span class="cov0" title="0">b = b.Limit(uint64(params.Limit)).Offset(uint64(params.Offset))
        return b.ToSql()</span>
}
</pre>
		
		<pre class="file" id="file72" style="display: none">package courses

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
)

type Repository interface {
        GetByParams(ctx context.Context, params *entity.GetCoursesParams) ([]*entity.Course, error)
        GetByID(ctx context.Context, id string) (*entity.Course, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) GetByParams(ctx context.Context, params *entity.GetCoursesParams) ([]*entity.Course, error) <span class="cov0" title="0">{
        query, args, err := generateQuery(params)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">var cc models
        if err = pgxscan.Select(ctx, r.db, &amp;cc, query, args...); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return cc.convert()</span>
}

func (r *repository) GetByID(ctx context.Context, id string) (*entity.Course, error) <span class="cov0" title="0">{
        var c model
        if err := pgxscan.Get(ctx, r.db, &amp;c, getCourseByIDStmt, id); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return c.convert()</span>
}
</pre>
		
		<pre class="file" id="file73" style="display: none">// nolint
package enrollments

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/domain/enum"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID        uuid.UUID
        UserID    uuid.UUID
        CourseID  uuid.UUID
        Status    string
        CreatedAt time.Time
        UpdatedAt time.Time
}

type models []model

// nolint
func (m model) convert() (*entity.Enrollment, error) <span class="cov0" title="0">{
        status, err := enum.CourseProgressString(m.Status)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return &amp;entity.Enrollment{
                ID:     m.ID,
                UserID: m.UserID,
                Course: entity.Course{
                        ID: m.CourseID,
                },
                Status:    status,
                CreatedAt: m.CreatedAt,
                UpdatedAt: m.CreatedAt,
        }, nil</span>
}

func (mm models) convert() ([]*entity.Enrollment, error) <span class="cov0" title="0">{
        out := make([]*entity.Enrollment, len(mm))
        for i, m := range mm </span><span class="cov0" title="0">{
                res, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">out[i] = res</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file74" style="display: none">package enrollments

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/georgysavva/scany/v2/pgxscan"
)

type Repository interface {
        Enroll(ctx context.Context, userID, courseID string) error
        CheckByUserIDAndCourseID(ctx context.Context, userID, courseID string) (bool, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) Enroll(ctx context.Context, userID, courseID string) error <span class="cov0" title="0">{
        _, err := r.db.Exec(ctx, enrollUserStmt, userID, courseID)
        return err
}</span>

func (r *repository) CheckByUserIDAndCourseID(ctx context.Context, userID, courseID string) (bool, error) <span class="cov0" title="0">{
        var exists bool
        if err := pgxscan.Get(ctx, r.db, &amp;exists, getByUserIDAndCourseIDStmt, userID, courseID); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>
        <span class="cov0" title="0">return exists, nil</span>
}
</pre>
		
		<pre class="file" id="file75" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: repository.go

// Package mocks is a generated GoMock package.
package mocks

import (
        context "context"
        reflect "reflect"

        entity "github.com/Rasikrr/learning_platform/internal/domain/entity"
        gomock "github.com/golang/mock/gomock"
)

// MockRepository is a mock of Repository interface.
type MockRepository struct {
        ctrl     *gomock.Controller
        recorder *MockRepositoryMockRecorder
}

// MockRepositoryMockRecorder is the mock recorder for MockRepository.
type MockRepositoryMockRecorder struct {
        mock *MockRepository
}

// NewMockRepository creates a new mock instance.
func NewMockRepository(ctrl *gomock.Controller) *MockRepository <span class="cov8" title="1">{
        mock := &amp;MockRepository{ctrl: ctrl}
        mock.recorder = &amp;MockRepositoryMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockRepository) EXPECT() *MockRepositoryMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// GetByTopicID mocks base method.
func (m *MockRepository) GetByTopicID(ctx context.Context, id string) ([]*entity.Quiz, error) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "GetByTopicID", ctx, id)
        ret0, _ := ret[0].([]*entity.Quiz)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// GetByTopicID indicates an expected call of GetByTopicID.
func (mr *MockRepositoryMockRecorder) GetByTopicID(ctx, id interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "GetByTopicID", reflect.TypeOf((*MockRepository)(nil).GetByTopicID), ctx, id)
}</span>

// GetByTopicIDs mocks base method.
func (m *MockRepository) GetByTopicIDs(ctx context.Context, ids []string) ([]*entity.Quiz, error) <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "GetByTopicIDs", ctx, ids)
        ret0, _ := ret[0].([]*entity.Quiz)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// GetByTopicIDs indicates an expected call of GetByTopicIDs.
func (mr *MockRepositoryMockRecorder) GetByTopicIDs(ctx, ids interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "GetByTopicIDs", reflect.TypeOf((*MockRepository)(nil).GetByTopicIDs), ctx, ids)
}</span>
</pre>
		
		<pre class="file" id="file76" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: repository.go

// Package mocks is a generated GoMock package.
package mocks

import (
        context "context"
        reflect "reflect"

        gomock "github.com/golang/mock/gomock"
)

// MockRepository is a mock of Repository interface.
type MockRepository struct {
        ctrl     *gomock.Controller
        recorder *MockRepositoryMockRecorder
}

// MockRepositoryMockRecorder is the mock recorder for MockRepository.
type MockRepositoryMockRecorder struct {
        mock *MockRepository
}

// NewMockRepository creates a new mock instance.
func NewMockRepository(ctrl *gomock.Controller) *MockRepository <span class="cov8" title="1">{
        mock := &amp;MockRepository{ctrl: ctrl}
        mock.recorder = &amp;MockRepositoryMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockRepository) EXPECT() *MockRepositoryMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// CheckIsPassed mocks base method.
func (m *MockRepository) CheckIsPassed(ctx context.Context, userID, topicID string) (bool, error) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "CheckIsPassed", ctx, userID, topicID)
        ret0, _ := ret[0].(bool)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// CheckIsPassed indicates an expected call of CheckIsPassed.
func (mr *MockRepositoryMockRecorder) CheckIsPassed(ctx, userID, topicID interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "CheckIsPassed", reflect.TypeOf((*MockRepository)(nil).CheckIsPassed), ctx, userID, topicID)
}</span>

// UpdatePassed mocks base method.
func (m *MockRepository) UpdatePassed(ctx context.Context, userID, courseID, topicID string, passed bool) error <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "UpdatePassed", ctx, userID, courseID, topicID, passed)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// UpdatePassed indicates an expected call of UpdatePassed.
func (mr *MockRepositoryMockRecorder) UpdatePassed(ctx, userID, courseID, topicID, passed interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "UpdatePassed", reflect.TypeOf((*MockRepository)(nil).UpdatePassed), ctx, userID, courseID, topicID, passed)
}</span>
</pre>
		
		<pre class="file" id="file77" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: repository.go

// Package mocks is a generated GoMock package.
package mocks

import (
        context "context"
        reflect "reflect"

        entity "github.com/Rasikrr/learning_platform/internal/domain/entity"
        gomock "github.com/golang/mock/gomock"
)

// MockRepository is a mock of Repository interface.
type MockRepository struct {
        ctrl     *gomock.Controller
        recorder *MockRepositoryMockRecorder
}

// MockRepositoryMockRecorder is the mock recorder for MockRepository.
type MockRepositoryMockRecorder struct {
        mock *MockRepository
}

// NewMockRepository creates a new mock instance.
func NewMockRepository(ctrl *gomock.Controller) *MockRepository <span class="cov8" title="1">{
        mock := &amp;MockRepository{ctrl: ctrl}
        mock.recorder = &amp;MockRepositoryMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockRepository) EXPECT() *MockRepositoryMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// GetByID mocks base method.
func (m *MockRepository) GetByID(ctx context.Context, id string) (*entity.PracticalTask, error) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "GetByID", ctx, id)
        ret0, _ := ret[0].(*entity.PracticalTask)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// GetByID indicates an expected call of GetByID.
func (mr *MockRepositoryMockRecorder) GetByID(ctx, id interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "GetByID", reflect.TypeOf((*MockRepository)(nil).GetByID), ctx, id)
}</span>

// GetByTopicIDAndOrderNum mocks base method.
func (m *MockRepository) GetByTopicIDAndOrderNum(ctx context.Context, id string, order int) (*entity.PracticalTask, error) <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "GetByTopicIDAndOrderNum", ctx, id, order)
        ret0, _ := ret[0].(*entity.PracticalTask)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// GetByTopicIDAndOrderNum indicates an expected call of GetByTopicIDAndOrderNum.
func (mr *MockRepositoryMockRecorder) GetByTopicIDAndOrderNum(ctx, id, order interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "GetByTopicIDAndOrderNum", reflect.TypeOf((*MockRepository)(nil).GetByTopicIDAndOrderNum), ctx, id, order)
}</span>

// GetByTopicIDs mocks base method.
func (m *MockRepository) GetByTopicIDs(ctx context.Context, ids []string) ([]*entity.PracticalTask, error) <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "GetByTopicIDs", ctx, ids)
        ret0, _ := ret[0].([]*entity.PracticalTask)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// GetByTopicIDs indicates an expected call of GetByTopicIDs.
func (mr *MockRepositoryMockRecorder) GetByTopicIDs(ctx, ids interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "GetByTopicIDs", reflect.TypeOf((*MockRepository)(nil).GetByTopicIDs), ctx, ids)
}</span>
</pre>
		
		<pre class="file" id="file78" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: repository.go

// Package mocks is a generated GoMock package.
package mocks

import (
        context "context"
        reflect "reflect"

        entity "github.com/Rasikrr/learning_platform/internal/domain/entity"
        gomock "github.com/golang/mock/gomock"
)

// MockRepository is a mock of Repository interface.
type MockRepository struct {
        ctrl     *gomock.Controller
        recorder *MockRepositoryMockRecorder
}

// MockRepositoryMockRecorder is the mock recorder for MockRepository.
type MockRepositoryMockRecorder struct {
        mock *MockRepository
}

// NewMockRepository creates a new mock instance.
func NewMockRepository(ctrl *gomock.Controller) *MockRepository <span class="cov8" title="1">{
        mock := &amp;MockRepository{ctrl: ctrl}
        mock.recorder = &amp;MockRepositoryMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockRepository) EXPECT() *MockRepositoryMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// CheckIsPassed mocks base method.
func (m *MockRepository) CheckIsPassed(ctx context.Context, userID, taskID string) (bool, error) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "CheckIsPassed", ctx, userID, taskID)
        ret0, _ := ret[0].(bool)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// CheckIsPassed indicates an expected call of CheckIsPassed.
func (mr *MockRepositoryMockRecorder) CheckIsPassed(ctx, userID, taskID interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "CheckIsPassed", reflect.TypeOf((*MockRepository)(nil).CheckIsPassed), ctx, userID, taskID)
}</span>

// Create mocks base method.
func (m *MockRepository) Create(ctx context.Context, submission *entity.TaskSubmission) error <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "Create", ctx, submission)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// Create indicates an expected call of Create.
func (mr *MockRepositoryMockRecorder) Create(ctx, submission interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Create", reflect.TypeOf((*MockRepository)(nil).Create), ctx, submission)
}</span>
</pre>
		
		<pre class="file" id="file79" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: repository.go

// Package mocks is a generated GoMock package.
package mocks

import (
        context "context"
        reflect "reflect"

        entity "github.com/Rasikrr/learning_platform/internal/domain/entity"
        gomock "github.com/golang/mock/gomock"
)

// MockRepository is a mock of Repository interface.
type MockRepository struct {
        ctrl     *gomock.Controller
        recorder *MockRepositoryMockRecorder
}

// MockRepositoryMockRecorder is the mock recorder for MockRepository.
type MockRepositoryMockRecorder struct {
        mock *MockRepository
}

// NewMockRepository creates a new mock instance.
func NewMockRepository(ctrl *gomock.Controller) *MockRepository <span class="cov8" title="1">{
        mock := &amp;MockRepository{ctrl: ctrl}
        mock.recorder = &amp;MockRepositoryMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockRepository) EXPECT() *MockRepositoryMockRecorder <span class="cov0" title="0">{
        return m.recorder
}</span>

// GetByTaskID mocks base method.
func (m *MockRepository) GetByTaskID(ctx context.Context, taskID string) ([]*entity.TestCase, error) <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "GetByTaskID", ctx, taskID)
        ret0, _ := ret[0].([]*entity.TestCase)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// GetByTaskID indicates an expected call of GetByTaskID.
func (mr *MockRepositoryMockRecorder) GetByTaskID(ctx, taskID interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "GetByTaskID", reflect.TypeOf((*MockRepository)(nil).GetByTaskID), ctx, taskID)
}</span>
</pre>
		
		<pre class="file" id="file80" style="display: none">// nolint: revive, stylecheck, unused
package question_categories

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID        uuid.UUID
        Name      string
        CreatedAt time.Time
        UpdatedAt time.Time
}

type models []model

func (m model) convert() (*entity.QuestionCategory, error) <span class="cov0" title="0">{
        return &amp;entity.QuestionCategory{
                ID:        m.ID,
                Name:      m.Name,
                CreatedAt: m.CreatedAt,
                UpdatedAt: m.UpdatedAt,
        }, nil
}</span>

func (m models) convert() ([]*entity.QuestionCategory, error) <span class="cov0" title="0">{
        var err error
        out := make([]*entity.QuestionCategory, len(m))
        for i, item := range m </span><span class="cov0" title="0">{
                out[i], err = item.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file81" style="display: none">// nolint: revive, stylecheck
package question_categories

import (
        "context"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
        "github.com/google/uuid"
        "github.com/jackc/pgx/v5"
)

type Repository interface {
        GetByID(ctx context.Context, id uuid.UUID) (*entity.QuestionCategory, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{db}
}</span>

func (r *repository) GetByID(ctx context.Context, id uuid.UUID) (*entity.QuestionCategory, error) <span class="cov0" title="0">{
        var m model
        if err := pgxscan.Get(ctx, r.db, &amp;m, getByIDStmt, id); err != nil </span><span class="cov0" title="0">{
                if errors.Is(err, pgx.ErrNoRows) </span><span class="cov0" title="0">{
                        return nil, errors.New("category not found")
                }</span>
                <span class="cov0" title="0">return nil, err</span>
        }

        <span class="cov0" title="0">return m.convert()</span>
}
</pre>
		
		<pre class="file" id="file82" style="display: none">// nolint: unused
package question

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID         uuid.UUID
        CategoryID uuid.UUID
        UserID     uuid.UUID
        Title      string
        Body       string
        CreatedAt  time.Time
        UpdatedAt  time.Time
}

type models []model

func (m model) convert() (*entity.Question, error) <span class="cov0" title="0">{
        category := entity.QuestionCategory{
                ID: m.CategoryID,
        }
        user := entity.User{
                ID: m.UserID,
        }
        return &amp;entity.Question{
                ID:        m.ID,
                Category:  &amp;category,
                Author:    &amp;user,
                Title:     m.Title,
                Body:      m.Body,
                CreatedAt: m.CreatedAt,
                UpdatedAt: m.UpdatedAt,
        }, nil
}</span>

func (m models) convert() ([]*entity.Question, error) <span class="cov0" title="0">{
        var err error
        out := make([]*entity.Question, len(m))
        for i, item := range m </span><span class="cov0" title="0">{
                out[i], err = item.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file83" style="display: none">package question

import (
        "context"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
        "github.com/google/uuid"
        "github.com/jackc/pgx/v5"
)

type Repository interface {
        Create(ctx context.Context, question *entity.Question) error
        GetByID(ctx context.Context, id uuid.UUID) (*entity.Question, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{db}
}</span>

func (r *repository) Create(ctx context.Context, question *entity.Question) error <span class="cov0" title="0">{
        _, err := r.db.Exec(ctx, createQuestionStmt, question.ID, question.Category.ID, question.Author.ID, question.Title, question.Body)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (r *repository) GetByID(ctx context.Context, id uuid.UUID) (*entity.Question, error) <span class="cov0" title="0">{
        var m model
        if err := pgxscan.Get(ctx, r.db, &amp;m, getByIDStmt, id); err != nil </span><span class="cov0" title="0">{
                if errors.Is(err, pgx.ErrNoRows) </span><span class="cov0" title="0">{
                        return nil, errors.New("question not found")
                }</span>
                <span class="cov0" title="0">return nil, err</span>
        }
        <span class="cov0" title="0">return m.convert()</span>
}
</pre>
		
		<pre class="file" id="file84" style="display: none">package quizzes

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID             uuid.UUID
        TopicID        uuid.UUID
        Question       string
        Options        []string
        CorrectAnswers []bool
        CreatedAt      time.Time
        UpdatedAt      time.Time
        MultipleChoice bool
}

type models []model

// nolint: unparam
func (m model) convert() (*entity.Quiz, error) <span class="cov0" title="0">{
        return &amp;entity.Quiz{
                ID:             m.ID,
                TopicID:        m.TopicID,
                Question:       m.Question,
                Options:        m.Options,
                CorrectAnswers: m.CorrectAnswers,
                CreatedAt:      m.CreatedAt,
                UpdatedAt:      m.UpdatedAt,
                MultipleChoice: m.MultipleChoice,
        }, nil
}</span>

func (mm models) convert() ([]*entity.Quiz, error) <span class="cov0" title="0">{
        out := make([]*entity.Quiz, len(mm))
        for i, m := range mm </span><span class="cov0" title="0">{
                res, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">out[i] = res</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file85" style="display: none">package quizzes

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
        "github.com/lib/pq"
)

//go:generate mockgen -destination ../mocks/quizzes/mock.go -package mocks -source=repository.go

type Repository interface {
        GetByTopicID(ctx context.Context, id string) ([]*entity.Quiz, error)
        GetByTopicIDs(ctx context.Context, ids []string) ([]*entity.Quiz, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) GetByTopicID(ctx context.Context, id string) ([]*entity.Quiz, error) <span class="cov0" title="0">{
        var mm models
        if err := pgxscan.Select(ctx, r.db, &amp;mm, getByTopicIDStmt, id); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return mm.convert()</span>
}

func (r *repository) GetByTopicIDs(ctx context.Context, ids []string) ([]*entity.Quiz, error) <span class="cov0" title="0">{
        var mm models
        if err := pgxscan.Select(ctx, r.db, &amp;mm, getByTopicIDsStmt, pq.Array(ids)); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return mm.convert()</span>
}
</pre>
		
		<pre class="file" id="file86" style="display: none">// nolint: revive, stylecheck
package quizzes_submissions

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/georgysavva/scany/v2/pgxscan"
)

//go:generate mockgen -destination ../mocks/quizzes_submissions/mock.go -package mocks -source=repository.go

type Repository interface {
        CheckIsPassed(ctx context.Context, userID, topicID string) (bool, error)
        UpdatePassed(ctx context.Context, userID, courseID, topicID string, passed bool) error
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) CheckIsPassed(ctx context.Context, userID, topicID string) (bool, error) <span class="cov0" title="0">{
        var exists bool
        if err := pgxscan.Get(ctx, r.db, &amp;exists, checkPassesStmt, userID, topicID); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>
        <span class="cov0" title="0">return exists, nil</span>
}

func (r *repository) UpdatePassed(ctx context.Context, userID, courseID, topicID string, passed bool) error <span class="cov0" title="0">{
        _, err := r.db.Exec(ctx, upsertStmt, userID, courseID, topicID, passed)
        return err
}</span>
</pre>
		
		<pre class="file" id="file87" style="display: none">package tasks

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/domain/enum"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID              uuid.UUID
        TopicID         uuid.UUID
        Description     string
        DifficultyLevel string
        StarterCode     string
        ExpectedOutput  *string
        CreatedAt       time.Time
        UpdatedAt       time.Time
        OrderNumber     int
        TestCases       bool
        Language        string
}

type models []model

func (m model) convert() (*entity.PracticalTask, error) <span class="cov0" title="0">{
        level, err := enum.DifficultyString(m.DifficultyLevel)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">lang, err := enum.ProgrammingLanguageString(m.Language)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return &amp;entity.PracticalTask{
                ID:              m.ID,
                TopicID:         m.TopicID,
                Description:     m.Description,
                DifficultyLevel: level,
                StarterCode:     m.StarterCode,
                ExpectedOutput:  m.ExpectedOutput,
                CreatedAt:       m.CreatedAt,
                UpdatedAt:       m.UpdatedAt,
                OrderNumber:     m.OrderNumber,
                TestCases:       m.TestCases,
                Language:        lang,
        }, nil</span>
}

func (mm models) convert() ([]*entity.PracticalTask, error) <span class="cov0" title="0">{
        out := make([]*entity.PracticalTask, len(mm))
        for i, m := range mm </span><span class="cov0" title="0">{
                res, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">out[i] = res</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file88" style="display: none">package tasks

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
        "github.com/lib/pq"
)

//go:generate mockgen -destination ../mocks/tasks/mock.go -package mocks -source=repository.go

type Repository interface {
        GetByID(ctx context.Context, id string) (*entity.PracticalTask, error)
        GetByTopicIDAndOrderNum(ctx context.Context, id string, order int) (*entity.PracticalTask, error)
        GetByTopicIDs(ctx context.Context, ids []string) ([]*entity.PracticalTask, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) GetByID(ctx context.Context, id string) (*entity.PracticalTask, error) <span class="cov0" title="0">{
        var m model
        if err := pgxscan.Get(ctx, r.db, &amp;m, getByIDStmt, id); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return m.convert()</span>
}

func (r *repository) GetByTopicIDAndOrderNum(ctx context.Context, id string, order int) (*entity.PracticalTask, error) <span class="cov0" title="0">{
        var m model
        if err := pgxscan.Get(ctx, r.db, &amp;m, getByTopicIDAndOrderNumStmt, id, order); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return m.convert()</span>
}

func (r *repository) GetByTopicIDs(ctx context.Context, ids []string) ([]*entity.PracticalTask, error) <span class="cov0" title="0">{
        var mm models
        if err := pgxscan.Select(ctx, r.db, &amp;mm, getByTopicIDsStmt, pq.Array(ids)); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return mm.convert()</span>
}
</pre>
		
		<pre class="file" id="file89" style="display: none">// nolint: revive, stylecheck, unused
package tasks_submissions

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "time"
)

type model struct {
        ID        string
        TaskID    string
        UserID    string
        Input     string
        Passed    bool
        Error     *string
        CreatedAt time.Time
        UpdatedAt time.Time
}

type models []model

func (m *model) convert() (*entity.TaskSubmission, error) <span class="cov0" title="0">{
        return &amp;entity.TaskSubmission{
                ID:        m.ID,
                TaskID:    m.TaskID,
                UserID:    m.UserID,
                Input:     m.Input,
                Passed:    m.Passed,
                Error:     m.Error,
                CreatedAt: m.CreatedAt,
        }, nil
}</span>

func (mm models) convert() ([]*entity.TaskSubmission, error) <span class="cov0" title="0">{
        out := make([]*entity.TaskSubmission, 0, len(mm))
        for _, m := range mm </span><span class="cov0" title="0">{
                v, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">if v != nil </span><span class="cov0" title="0">{
                        out = append(out, v)
                }</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}

func convert(sub *entity.TaskSubmission) *model <span class="cov0" title="0">{
        return &amp;model{
                ID:        sub.ID,
                TaskID:    sub.TaskID,
                UserID:    sub.UserID,
                Input:     sub.Input,
                Passed:    sub.Passed,
                Error:     sub.Error,
                CreatedAt: sub.CreatedAt,
        }
}</span>
</pre>
		
		<pre class="file" id="file90" style="display: none">// nolint: revive, stylecheck, unused
package tasks_submissions

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
)

//go:generate mockgen -destination ../mocks/tasks_submissions/mock.go -package mocks -source=repository.go

type Repository interface {
        Create(ctx context.Context, submission *entity.TaskSubmission) error
        CheckIsPassed(ctx context.Context, userID, taskID string) (bool, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) Create(ctx context.Context, submission *entity.TaskSubmission) error <span class="cov0" title="0">{
        m := convert(submission)
        _, err := r.db.Exec(ctx, insertStmt, m.TaskID, m.UserID, m.Input, m.Passed, m.Error)
        return err
}</span>

func (r *repository) CheckIsPassed(ctx context.Context, userID, taskID string) (bool, error) <span class="cov0" title="0">{
        var exists bool
        if err := pgxscan.Get(ctx, r.db, &amp;exists, checkPassesStmt, userID, taskID); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>
        <span class="cov0" title="0">return exists, nil</span>
}
</pre>
		
		<pre class="file" id="file91" style="display: none">// nolint: revive, stylecheck, unused, unparam
package test_cases

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "time"
)

type model struct {
        ID             string
        TaskID         string
        Input          string
        ExpectedOutput string
        IsPublic       bool
        CreatedAt      time.Time
        UpdatedAt      time.Time
}

type models []model

func (m *model) convert() (*entity.TestCase, error) <span class="cov0" title="0">{
        return &amp;entity.TestCase{
                ID:             m.ID,
                TaskID:         m.TaskID,
                Input:          m.Input,
                ExpectedOutput: m.ExpectedOutput,
                IsPublic:       m.IsPublic,
                CreatedAt:      m.CreatedAt,
                UpdatedAt:      m.UpdatedAt,
        }, nil
}</span>

func (mm models) convert() ([]*entity.TestCase, error) <span class="cov0" title="0">{
        out := make([]*entity.TestCase, len(mm))
        for i, m := range mm </span><span class="cov0" title="0">{
                v, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">out[i] = v</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file92" style="display: none">// nolint: revive, stylecheck, unused
package test_cases

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
)

//go:generate mockgen -destination ../mocks/test_cases/mock.go -package mocks -source=repository.go

type Repository interface {
        GetByTaskID(ctx context.Context, taskID string) ([]*entity.TestCase, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(d *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: d,
        }
}</span>

func (r *repository) GetByTaskID(ctx context.Context, taskID string) ([]*entity.TestCase, error) <span class="cov0" title="0">{
        var mm models
        if err := pgxscan.Select(ctx, r.db, &amp;mm, getByTaskIDStmt, taskID); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return mm.convert()</span>
}
</pre>
		
		<pre class="file" id="file93" style="display: none">package topics

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "time"
)

type model struct {
        ID          uuid.UUID
        CourseID    uuid.UUID
        Title       string
        Description string
        OrderNumber int
        CreatedAt   time.Time
        UpdatedAt   time.Time
}

type models []model

// nolint
func (m model) convert() (*entity.Topic, error) <span class="cov0" title="0">{
        return &amp;entity.Topic{
                ID:          m.ID,
                CourseID:    m.CourseID,
                Title:       m.Title,
                Description: m.Description,
                OrderNumber: m.OrderNumber,
                CreatedAt:   m.CreatedAt,
                UpdatedAt:   m.UpdatedAt,
        }, nil
}</span>

// nolint
func (mm models) convert() ([]*entity.Topic, error) <span class="cov0" title="0">{
        out := make([]*entity.Topic, len(mm))
        for i, m := range mm </span><span class="cov0" title="0">{
                res, err := m.convert()
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">out[i] = res</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file94" style="display: none">package topics

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
        "github.com/google/uuid"
)

type Repository interface {
        GetByCourseID(ctx context.Context, id uuid.UUID) ([]*entity.Topic, error)
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) GetByCourseID(ctx context.Context, ids uuid.UUID) ([]*entity.Topic, error) <span class="cov0" title="0">{
        var mm models
        if err := pgxscan.Select(ctx, r.db, &amp;mm, getByCourseIDStmt, ids); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return mm.convert()</span>
}
</pre>
		
		<pre class="file" id="file95" style="display: none">package users

import (
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/domain/enum"
        "github.com/google/uuid"
        "time"
)

// nolint: unused
type models []model

type model struct {
        ID          string
        Name        string
        LastName    string
        Email       string
        Password    string
        AccountRole string
        CreatedAt   time.Time
        UpdatedAt   time.Time
        DeletedAt   *time.Time
}

func convertModel(m model) (*entity.User, error) <span class="cov0" title="0">{
        role, err := enum.AccountRoleString(m.AccountRole)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">id, _ := uuid.Parse(m.ID)
        return &amp;entity.User{
                ID:          id,
                Name:        m.Name,
                LastName:    m.LastName,
                Email:       m.Email,
                AccountRole: role,
                Password:    m.Password,
                CreatedAt:   m.CreatedAt,
                UpdatedAt:   m.UpdatedAt,
                DeletedAt:   m.DeletedAt,
        }, nil</span>
}

func convertToModel(u *entity.User) model <span class="cov0" title="0">{
        return model{
                ID:          u.ID.String(),
                Name:        u.Name,
                LastName:    u.LastName,
                Email:       u.Email,
                Password:    u.Password,
                AccountRole: u.AccountRole.String(),
                CreatedAt:   u.CreatedAt,
                UpdatedAt:   u.UpdatedAt,
                DeletedAt:   u.DeletedAt,
        }
}</span>

// nolint: unused
func convertModels(ms models) ([]*entity.User, error) <span class="cov0" title="0">{
        var err error
        out := make([]*entity.User, len(ms))
        for i, m := range ms </span><span class="cov0" title="0">{
                out[i], err = convertModel(m)
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
        }
        <span class="cov0" title="0">return out, nil</span>
}
</pre>
		
		<pre class="file" id="file96" style="display: none">package users

import (
        "context"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/databases"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/georgysavva/scany/v2/pgxscan"
        "github.com/jackc/pgx/v5"
)

//go:generate mockgen -destination ../mocks/users/mock.go -package mocks -source=./repository.go

type Repository interface {
        GetByEmail(ctx context.Context, email string) (*entity.User, error)
        ResetPassword(ctx context.Context, email, password string) error
        Create(ctx context.Context, user *entity.User) error
        Delete(ctx context.Context, email string) error
}

type repository struct {
        db *databases.Postgres
}

func NewRepository(db *databases.Postgres) Repository <span class="cov0" title="0">{
        return &amp;repository{
                db: db,
        }
}</span>

func (r *repository) GetByEmail(ctx context.Context, email string) (*entity.User, error) <span class="cov0" title="0">{
        var m model
        if err := pgxscan.Get(ctx, r.db, &amp;m, getByEmailStmt, email); err != nil </span><span class="cov0" title="0">{
                if errors.Is(err, pgx.ErrNoRows) </span><span class="cov0" title="0">{
                        return nil, nil
                }</span>
                <span class="cov0" title="0">return nil, err</span>
        }
        <span class="cov0" title="0">return convertModel(m)</span>
}

func (r *repository) Create(ctx context.Context, user *entity.User) error <span class="cov0" title="0">{
        m := convertToModel(user)
        _, err := r.db.Exec(ctx, createStmt, m.ID, m.Name, m.LastName, m.Email, m.Password, m.AccountRole)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (r *repository) Delete(ctx context.Context, email string) error <span class="cov0" title="0">{
        _, err := r.db.Exec(ctx, deleteStmt, email)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (r *repository) ResetPassword(ctx context.Context, email, password string) error <span class="cov0" title="0">{
        _, err := r.db.Exec(ctx, resetPasswordStmt, email, password)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file97" style="display: none">package auth

import (
        "context"
        "errors"
        authC "github.com/Rasikrr/learning_platform/internal/cache/auth"
        "github.com/Rasikrr/learning_platform/internal/clients/mail"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/domain/enum"
        usersR "github.com/Rasikrr/learning_platform/internal/repositories/users"
        "github.com/golang-jwt/jwt"
        "github.com/google/uuid"
        "time"
        "unicode"

        "github.com/Rasikrr/learning_platform/internal/util"
        "math/rand/v2"
        "strings"
)

const (
        codeLength        = 4
        codeChars         = "0123456789"
        passwordMinLength = 8
)

type Service interface {
        Register(ctx context.Context, email, password, passwordConfirm string) error
        ConfirmRegister(ctx context.Context, email, code string) (*entity.Auth, error)
        Login(ctx context.Context, email, password string) (*entity.Auth, error)
        ResetPassword(ctx context.Context, email, password, passwordConfirm string) error
        ConfirmResetPassword(ctx context.Context, email, code string) error
        GenerateCode(ctx context.Context) string
        CheckToken(ctx context.Context, token string) (*entity.Session, error)
        RefreshToken(ctx context.Context, token string) (*entity.Auth, error)
}

type service struct {
        secret               string
        accessTokenLifeTime  time.Duration
        refreshTokenLifeTime time.Duration

        mailClient      mail.Client
        usersRepository usersR.Repository
        hasher          util.Hasher
        cache           authC.Cache
}

func NewService(
        secret string,
        accessTokenLifeTime time.Duration,
        refreshTokenLifeTime time.Duration,
        mailClient mail.Client,
        usersRepo usersR.Repository,
        hasher util.Hasher,
        cache authC.Cache,
) Service <span class="cov0" title="0">{
        return &amp;service{
                secret:               secret,
                accessTokenLifeTime:  accessTokenLifeTime,
                refreshTokenLifeTime: refreshTokenLifeTime,
                mailClient:           mailClient,
                hasher:               hasher,
                usersRepository:      usersRepo,
                cache:                cache,
        }
}</span>

func (s *service) Login(ctx context.Context, email, password string) (*entity.Auth, error) <span class="cov0" title="0">{
        user, err := s.usersRepository.GetByEmail(ctx, email)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">if user == nil </span><span class="cov0" title="0">{
                return nil, errors.New("user not found")
        }</span>
        <span class="cov0" title="0">if err := s.hasher.CheckPassword(user.Password, password); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return s.generateTokens(ctx, user)</span>
}

func (s *service) Register(ctx context.Context, email, password, passwordConfirm string) error <span class="cov0" title="0">{
        if password != passwordConfirm </span><span class="cov0" title="0">{
                return errors.New("passwords do not match")
        }</span>
        <span class="cov0" title="0">user, err := s.usersRepository.GetByEmail(ctx, email)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if user != nil </span><span class="cov0" title="0">{
                return errors.New("user already exists")
        }</span>

        <span class="cov0" title="0">if err := s.validatePassword(ctx, password); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">code := s.GenerateCode(ctx)
        if err := s.mailClient.Send(ctx, []string{email}, "registration", code); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err := s.cache.SetCode(ctx, email, code); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">passHash, err := s.hasher.Hash(password)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err := s.cache.SetPasswordHash(ctx, email, passHash); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (s *service) ResetPassword(ctx context.Context, email, password, passwordConfirm string) error <span class="cov0" title="0">{
        if password != passwordConfirm </span><span class="cov0" title="0">{
                return errors.New("passwords do not match")
        }</span>
        <span class="cov0" title="0">user, err := s.usersRepository.GetByEmail(ctx, email)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if user == nil </span><span class="cov0" title="0">{
                return errors.New("user not found")
        }</span>
        <span class="cov0" title="0">err = s.validatePassword(ctx, password)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">code := s.GenerateCode(ctx)
        err = s.mailClient.Send(ctx, []string{email}, "reset_password", code)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err := s.cache.SetCode(ctx, email, code); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">passHash, err := s.hasher.Hash(password)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return s.cache.SetPasswordHash(ctx, email, passHash)</span>
}

func (s *service) ConfirmResetPassword(ctx context.Context, email, code string) error <span class="cov0" title="0">{
        codeFromCache, err := s.cache.GetCode(ctx, email)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if codeFromCache != code </span><span class="cov0" title="0">{
                return errors.New("code is invalid")
        }</span>
        <span class="cov0" title="0">passHash, err := s.cache.GetPasswordHash(ctx, email)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err = s.usersRepository.ResetPassword(ctx, email, passHash); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (s *service) ConfirmRegister(ctx context.Context, email, code string) (*entity.Auth, error) <span class="cov0" title="0">{
        codeFromCache, err := s.cache.GetCode(ctx, email)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">if codeFromCache != code </span><span class="cov0" title="0">{
                return nil, errors.New("code is invalid")
        }</span>
        <span class="cov0" title="0">passHash, err := s.cache.GetPasswordHash(ctx, email)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">user := entity.NewUser(email, passHash)
        if err := s.usersRepository.Create(ctx, user); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">return s.generateTokens(ctx, user)</span>
}

func (s *service) GenerateCode(_ context.Context) string <span class="cov0" title="0">{
        nums := codeChars
        numsArr := strings.Split(nums, "")
        rand.Shuffle(len(numsArr), func(i, j int) </span><span class="cov0" title="0">{
                numsArr[i], numsArr[j] = numsArr[j], numsArr[i]
        }</span>)
        <span class="cov0" title="0">return strings.Join(numsArr[:codeLength], "")</span>
}

func (s *service) CheckToken(_ context.Context, token string) (*entity.Session, error) <span class="cov0" title="0">{
        claims, isRefresh, err := s.parseJWT(token)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">if isRefresh </span><span class="cov0" title="0">{
                return nil, errors.New("access token expected")
        }</span>
        <span class="cov0" title="0">return getSession(claims)</span>
}

func (s *service) RefreshToken(ctx context.Context, token string) (*entity.Auth, error) <span class="cov0" title="0">{
        claims, isRefresh, err := s.parseJWT(token)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">if !isRefresh </span><span class="cov0" title="0">{
                return nil, errors.New("refresh token expected")
        }</span>
        <span class="cov0" title="0">email, ok := claims["email"].(string)
        if !ok </span><span class="cov0" title="0">{
                return nil, errors.New("email is empty")
        }</span>
        <span class="cov0" title="0">user, err := s.usersRepository.GetByEmail(ctx, email)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return s.generateTokens(ctx, user)</span>
}

func (s *service) generateTokens(_ context.Context, user *entity.User) (*entity.Auth, error) <span class="cov0" title="0">{
        claims := entity.NewClaims(user, s.accessTokenLifeTime, false)
        accessToken := jwt.NewWithClaims(jwt.SigningMethodHS256, claims)
        accessTokenString, err := accessToken.SignedString([]byte(s.secret))
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">claims = entity.NewClaims(user, s.refreshTokenLifeTime, true)
        refreshToken := jwt.NewWithClaims(jwt.SigningMethodHS256, claims)
        refreshTokenString, err := refreshToken.SignedString([]byte(s.secret))
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">return &amp;entity.Auth{
                AccessToken:  accessTokenString,
                RefreshToken: refreshTokenString,
        }, nil</span>
}

func (s *service) parseJWT(tokenString string) (jwt.MapClaims, bool, error) <span class="cov0" title="0">{
        tokenString = strings.TrimPrefix(tokenString, "Bearer ")
        tokenString = strings.TrimPrefix(tokenString, "bearer ")

        token, err := jwt.Parse(tokenString, func(token *jwt.Token) (any, error) </span><span class="cov0" title="0">{
                if _, ok := token.Method.(*jwt.SigningMethodHMAC); !ok </span><span class="cov0" title="0">{
                        return nil, errors.New("unexpected signing method")
                }</span>
                <span class="cov0" title="0">return []byte(s.secret), nil</span>
        })
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                return nil, false, err
        }</span>
        <span class="cov0" title="0">claims := token.Claims.(jwt.MapClaims)
        isRefresh, ok := claims["is_refresh"].(bool)
        if !ok </span><span class="cov0" title="0">{
                return nil, false, errors.New("is_refresh is empty")
        }</span>
        <span class="cov0" title="0">return claims, isRefresh, nil</span>
}

func (s *service) validatePassword(_ context.Context, password string) error <span class="cov0" title="0">{
        if len(password) &lt; passwordMinLength </span><span class="cov0" title="0">{
                return errors.New("password is too short")
        }</span>
        <span class="cov0" title="0">var (
                hasUppercase, hasLowercase, hasDigit, hasSpecial bool
        )
        for _, r := range password </span><span class="cov0" title="0">{
                switch </span>{
                case unicode.IsUpper(r):<span class="cov0" title="0">
                        hasUppercase = true</span>
                case unicode.IsLower(r):<span class="cov0" title="0">
                        hasLowercase = true</span>
                case unicode.IsDigit(r):<span class="cov0" title="0">
                        hasDigit = true</span>
                case unicode.IsPunct(r) || unicode.IsSymbol(r):<span class="cov0" title="0">
                        hasSpecial = true</span>
                }
        }
        <span class="cov0" title="0">if !hasUppercase || !hasLowercase || !hasDigit || !hasSpecial </span><span class="cov0" title="0">{
                return errors.New("password must contain at least one uppercase, lowercase, digit and special character")
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func getSession(claims jwt.MapClaims) (*entity.Session, error) <span class="cov0" title="0">{
        email, ok := claims["email"].(string)
        if !ok </span><span class="cov0" title="0">{
                return nil, errors.New("email is empty")
        }</span>
        <span class="cov0" title="0">roleString, ok := claims["account_role"].(string)
        if !ok </span><span class="cov0" title="0">{
                return nil, errors.New("account_role is empty")
        }</span>
        <span class="cov0" title="0">role, err := enum.AccountRoleString(roleString)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">uuidString, ok := claims["user_id"].(string)
        if !ok </span><span class="cov0" title="0">{
                return nil, errors.New("user_id is empty")
        }</span>
        <span class="cov0" title="0">userID, err := uuid.Parse(uuidString)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return &amp;entity.Session{
                UserID: userID,
                Email:  email,
                Role:   role,
        }, nil</span>
}
</pre>
		
		<pre class="file" id="file98" style="display: none">package courses

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/google/uuid"
        "github.com/samber/lo"
        "golang.org/x/sync/errgroup"
)

func (s *service) GetCoursesByParams(ctx context.Context, params *entity.GetCoursesParams) ([]*entity.Course, error) <span class="cov0" title="0">{
        courses, err := s.coursesRepository.GetByParams(ctx, params)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">catsIDs := lo.Map(courses, func(c *entity.Course, _ int) uuid.UUID </span><span class="cov0" title="0">{
                return c.Category.ID
        }</span>)
        <span class="cov0" title="0">categories, err := s.categoriesRepository.GetByIDs(ctx, catsIDs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">categoriesMap := lo.SliceToMap(categories, func(t *entity.Category) (uuid.UUID, *entity.Category) </span><span class="cov0" title="0">{
                return t.ID, t
        }</span>)

        <span class="cov0" title="0">for _, c := range courses </span><span class="cov0" title="0">{
                category, ok := categoriesMap[c.Category.ID]
                if ok </span><span class="cov0" title="0">{
                        c.Category = *category
                }</span>
        }
        <span class="cov0" title="0">return courses, err</span>
}

func (s *service) GetCourseByID(ctx context.Context, id string) (*entity.Course, error) <span class="cov0" title="0">{
        course, err := s.coursesRepository.GetByID(ctx, id)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">var (
                g        errgroup.Group
                category *entity.Category
                topics   []*entity.Topic
        )
        g.Go(func() error </span><span class="cov0" title="0">{
                category, err = s.categoriesRepository.GetByID(ctx, course.Category.ID)
                return err
        }</span>)
        <span class="cov0" title="0">g.Go(func() error </span><span class="cov0" title="0">{
                topics, err = s.topicsRepository.GetByCourseID(ctx, course.ID)
                return err
        }</span>)

        <span class="cov0" title="0">if err = g.Wait(); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">course.Category = *category
        course.Topics = topics

        return course, nil</span>
}

func (s *service) GetAllCategories(ctx context.Context) ([]*entity.Category, error) <span class="cov0" title="0">{
        return s.categoriesRepository.GetAll(ctx)
}</span>

func (s *service) GetContentByTopicID(ctx context.Context, id string) (*entity.TopicContent, error) <span class="cov0" title="0">{
        return s.contentRepository.GetByTopicID(ctx, id)
}</span>

func (s *service) GetQuizzesByTopicID(ctx context.Context, id string) ([]*entity.Quiz, error) <span class="cov0" title="0">{
        return s.quizzesRepository.GetByTopicID(ctx, id)
}</span>

func (s *service) GetTasksByTopicIDAndOrderNum(ctx context.Context, id string, order int) (*entity.PracticalTask, error) <span class="cov0" title="0">{
        return s.tasksRepository.GetByTopicIDAndOrderNum(ctx, id, order)
}</span>

// nolint: unused
func (s *service) mergeCourse(ctx context.Context, course *entity.Course) error <span class="cov0" title="0">{
        category, err := s.categoriesRepository.GetByID(ctx, course.Category.ID)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">topics, err := s.topicsRepository.GetByCourseID(ctx, course.ID)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">topicIDs := lo.Map(topics, func(t *entity.Topic, _ int) string </span><span class="cov0" title="0">{
                return t.ID.String()
        }</span>)
        <span class="cov0" title="0">var (
                g       errgroup.Group
                content []*entity.TopicContent
                quizzes []*entity.Quiz
                tasks   []*entity.PracticalTask
        )
        g.Go(func() error </span><span class="cov0" title="0">{
                content, err = s.contentRepository.GetByTopicIDs(ctx, topicIDs)
                if err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
        <span class="cov0" title="0">g.Go(func() error </span><span class="cov0" title="0">{
                quizzes, err = s.quizzesRepository.GetByTopicIDs(ctx, topicIDs)
                if err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
        <span class="cov0" title="0">g.Go(func() error </span><span class="cov0" title="0">{
                tasks, err = s.tasksRepository.GetByTopicIDs(ctx, topicIDs)
                if err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })

        <span class="cov0" title="0">if err = g.Wait(); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">topicMap := lo.SliceToMap(topics, func(t *entity.Topic) (uuid.UUID, *entity.Topic) </span><span class="cov0" title="0">{
                return t.ID, t
        }</span>)

        <span class="cov0" title="0">for _, c := range content </span><span class="cov0" title="0">{
                topic, ok := topicMap[c.TopicID]
                if ok </span><span class="cov0" title="0">{
                        topic.Content = c
                }</span>
        }
        <span class="cov0" title="0">for _, q := range quizzes </span><span class="cov0" title="0">{
                topic, ok := topicMap[q.TopicID]
                if ok </span><span class="cov0" title="0">{
                        topic.Quizzes = append(topic.Quizzes, q)
                }</span>
        }
        <span class="cov0" title="0">for _, p := range tasks </span><span class="cov0" title="0">{
                topic, ok := topicMap[p.TopicID]
                if ok </span><span class="cov0" title="0">{
                        topic.PracticalTasks = append(topic.PracticalTasks, p)
                }</span>
        }

        <span class="cov0" title="0">course.Category = *category
        course.Topics = topics

        return nil</span>
}
</pre>
		
		<pre class="file" id="file99" style="display: none">package courses

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/repositories/categories"
        "github.com/Rasikrr/learning_platform/internal/repositories/content"
        "github.com/Rasikrr/learning_platform/internal/repositories/courses"
        "github.com/Rasikrr/learning_platform/internal/repositories/quizzes"
        "github.com/Rasikrr/learning_platform/internal/repositories/tasks"
        "github.com/Rasikrr/learning_platform/internal/repositories/topics"
)

type Service interface {
        GetCoursesByParams(ctx context.Context, params *entity.GetCoursesParams) ([]*entity.Course, error)
        GetCourseByID(ctx context.Context, id string) (*entity.Course, error)

        GetAllCategories(ctx context.Context) ([]*entity.Category, error)

        GetContentByTopicID(ctx context.Context, topicID string) (*entity.TopicContent, error)

        GetQuizzesByTopicID(ctx context.Context, topicID string) ([]*entity.Quiz, error)

        GetTasksByTopicIDAndOrderNum(ctx context.Context, topicID string, order int) (*entity.PracticalTask, error)
}

type service struct {
        coursesRepository    courses.Repository
        categoriesRepository categories.Repository
        topicsRepository     topics.Repository
        quizzesRepository    quizzes.Repository
        tasksRepository      tasks.Repository
        contentRepository    content.Repository
}

func NewService(
        coursesRepository courses.Repository,
        categoriesRepository categories.Repository,
        topicsRepository topics.Repository,
        quizzesRepository quizzes.Repository,
        tasksRepository tasks.Repository,
        contentRepository content.Repository,
) Service <span class="cov0" title="0">{
        return &amp;service{
                coursesRepository:    coursesRepository,
                categoriesRepository: categoriesRepository,
                topicsRepository:     topicsRepository,
                quizzesRepository:    quizzesRepository,
                tasksRepository:      tasksRepository,
                contentRepository:    contentRepository,
        }
}</span>
</pre>
		
		<pre class="file" id="file100" style="display: none">package enrollments

import (
        "context"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/repositories/courses"
        "github.com/Rasikrr/learning_platform/internal/repositories/enrollments"
)

type Service interface {
        Enroll(ctx context.Context, userID string, courseID string) error
        CheckEnrollment(ctx context.Context, userID string, courseID string) (bool, error)
}

type service struct {
        coursesRepository     courses.Repository
        enrollmentsRepository enrollments.Repository
}

func NewService(
        coursesRepository courses.Repository,
        enrollmentsRepository enrollments.Repository,
) Service <span class="cov0" title="0">{
        return &amp;service{
                coursesRepository:     coursesRepository,
                enrollmentsRepository: enrollmentsRepository,
        }
}</span>

func (s *service) Enroll(ctx context.Context, userID string, courseID string) error <span class="cov0" title="0">{
        course, err := s.coursesRepository.GetByID(ctx, courseID)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">enrolled, err := s.CheckEnrollment(ctx, userID, course.ID.String())
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if enrolled </span><span class="cov0" title="0">{
                return errors.New("user already enrolled")
        }</span>
        <span class="cov0" title="0">return s.enrollmentsRepository.Enroll(ctx, userID, course.ID.String())</span>
}

func (s *service) CheckEnrollment(ctx context.Context, userID string, courseID string) (bool, error) <span class="cov0" title="0">{
        exists, err := s.enrollmentsRepository.CheckByUserIDAndCourseID(ctx, userID, courseID)
        if err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>
        <span class="cov0" title="0">return exists, nil</span>
}
</pre>
		
		<pre class="file" id="file101" style="display: none">package faq

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/repositories/answers"
        questionCategories "github.com/Rasikrr/learning_platform/internal/repositories/question_categories"
        question "github.com/Rasikrr/learning_platform/internal/repositories/questions"
)

type Service interface {
        PostQuestion(ctx context.Context, question *entity.Question) error
        PostAnswer(ctx context.Context, answer *entity.Answer) error
}

type service struct {
        questionsRepository  question.Repository
        categoriesRepository questionCategories.Repository
        answersRepository    answers.Repository
}

func NewService(
        questionsRepository question.Repository,
        categoriesRepository questionCategories.Repository,
        answersRepository answers.Repository,
) Service <span class="cov0" title="0">{
        return &amp;service{
                questionsRepository:  questionsRepository,
                categoriesRepository: categoriesRepository,
                answersRepository:    answersRepository,
        }
}</span>

func (s *service) PostQuestion(ctx context.Context, question *entity.Question) error <span class="cov0" title="0">{
        _, err := s.categoriesRepository.GetByID(ctx, question.Category.ID)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err = s.questionsRepository.Create(ctx, question); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (s *service) PostAnswer(ctx context.Context, answer *entity.Answer) error <span class="cov0" title="0">{
        _, err := s.questionsRepository.GetByID(ctx, answer.Question.ID)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err = s.answersRepository.Create(ctx, answer); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file102" style="display: none">package submissions

import (
        "context"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/util"
        "github.com/samber/lo"
        "log"
)

func (s *service) SubmitQuiz(ctx context.Context, userID, courseID, topicID string, answers []*entity.AnswerQuiz) error <span class="cov8" title="1">{
        passed, err := s.quizzesSubmissionRepository.CheckIsPassed(ctx, userID, topicID)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov8" title="1">log.Println("passed ", passed)
        if passed </span><span class="cov8" title="1">{
                return ErrAlreadyPassed
        }</span>
        <span class="cov8" title="1">quizzes, err := s.quizzesRepository.GetByTopicID(ctx, topicID)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov8" title="1">correct, checkErr := s.checkAnswers(quizzes, answers)
        err = s.quizzesSubmissionRepository.UpdatePassed(ctx, userID, courseID, topicID, correct)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov8" title="1">return checkErr</span>
}

func (s *service) ResetQuiz(ctx context.Context, userID, courseID, topicID string) error <span class="cov0" title="0">{
        passed, err := s.quizzesSubmissionRepository.CheckIsPassed(ctx, userID, topicID)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if !passed </span><span class="cov0" title="0">{
                return ErrNotPassed
        }</span>
        <span class="cov0" title="0">err = s.quizzesSubmissionRepository.UpdatePassed(ctx, userID, courseID, topicID, false)
        return err</span>
}

func (s *service) checkAnswers(quizzes []*entity.Quiz, answers []*entity.AnswerQuiz) (bool, error) <span class="cov8" title="1">{
        answersMap := lo.SliceToMap(answers, func(a *entity.AnswerQuiz) (string, []bool) </span><span class="cov8" title="1">{
                return a.QuestionID, a.Answer
        }</span>)
        <span class="cov8" title="1">for _, quiz := range quizzes </span><span class="cov8" title="1">{
                ans, ok := answersMap[quiz.ID.String()]
                if !ok </span><span class="cov8" title="1">{
                        return false, ErrNotFullyAnswered
                }</span>
                <span class="cov8" title="1">if !util.SlicesEqual(ans, quiz.CorrectAnswers) </span><span class="cov8" title="1">{
                        return false, ErrNotCorrectAnswer
                }</span>
        }
        <span class="cov8" title="1">return true, nil</span>
}
</pre>
		
		<pre class="file" id="file103" style="display: none">package submissions

import (
        "context"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/clients/jdoodle"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
        "github.com/Rasikrr/learning_platform/internal/repositories/quizzes"
        quizzesSubmissionsR "github.com/Rasikrr/learning_platform/internal/repositories/quizzes_submissions"
        "github.com/Rasikrr/learning_platform/internal/repositories/tasks"
        tasksSubmissionsR "github.com/Rasikrr/learning_platform/internal/repositories/tasks_submissions"
        testCasesR "github.com/Rasikrr/learning_platform/internal/repositories/test_cases"
)

var (
        ErrNotFullyAnswered = errors.New("not fully answered")
        ErrNotCorrectAnswer = errors.New("not correct answer")
        ErrAlreadyPassed    = errors.New("already passed")
        ErrNotPassed        = errors.New("not passed")
)

type Service interface {
        SubmitQuiz(ctx context.Context, userID, courseID, topicID string, answers []*entity.AnswerQuiz) error
        ResetQuiz(ctx context.Context, userID, courseID, topicID string) error

        SubmitTask(ctx context.Context, submission *entity.TaskSubmission) (string, error)
}

type service struct {
        quizzesRepository           quizzes.Repository
        quizzesSubmissionRepository quizzesSubmissionsR.Repository
        tasksSubmissionsRepository  tasksSubmissionsR.Repository
        tasksRepository             tasks.Repository
        testCasesRepository         testCasesR.Repository
        taskExecutorClient          jdoodle.Client
}

func NewService(
        quizzesRepository quizzes.Repository,
        quizzesSubmissionRepository quizzesSubmissionsR.Repository,
        tasksSubmissionsRepository tasksSubmissionsR.Repository,
        testCasesRepository testCasesR.Repository,
        tasksRepository tasks.Repository,
        taskExecutorClient jdoodle.Client,
) Service <span class="cov8" title="1">{
        return &amp;service{
                quizzesRepository:           quizzesRepository,
                quizzesSubmissionRepository: quizzesSubmissionRepository,
                tasksSubmissionsRepository:  tasksSubmissionsRepository,
                testCasesRepository:         testCasesRepository,
                tasksRepository:             tasksRepository,
                taskExecutorClient:          taskExecutorClient,
        }
}</span>
</pre>
		
		<pre class="file" id="file104" style="display: none">package submissions

import (
        "context"
        "errors"
        "github.com/Rasikrr/learning_platform/internal/domain/entity"
)

var (
        ErrCompilationError = errors.New("compilation error")
        ErrOutputNotEqual   = errors.New("output is not equal to expected output")
)

func (s *service) SubmitTask(ctx context.Context, submission *entity.TaskSubmission) (string, error) <span class="cov8" title="1">{
        task, err := s.tasksRepository.GetByID(ctx, submission.TaskID)
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov8" title="1">taskPassed, err := s.tasksSubmissionsRepository.CheckIsPassed(ctx, submission.UserID, task.ID.String())
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov8" title="1">if taskPassed </span><span class="cov8" title="1">{
                return "", ErrAlreadyPassed
        }</span>
        <span class="cov8" title="1">if task.TestCases </span><span class="cov0" title="0">{
                return s.runTestsCases(ctx, task, submission)
        }</span>
        <span class="cov8" title="1">var (
                out        string
                executeErr error
                passed     = true
        )
        output, err := s.taskExecutorClient.ExecuteCode(ctx, submission.Input, task.Language)
        if err != nil </span><span class="cov0" title="0">{
                out = output
                executeErr = err
                passed = false
        }</span>
        <span class="cov8" title="1">if task.ExpectedOutput != nil &amp;&amp; output != *task.ExpectedOutput </span><span class="cov8" title="1">{
                out = output
                executeErr = ErrOutputNotEqual
                passed = false
        }</span>
        <span class="cov8" title="1">if executeErr != nil </span><span class="cov8" title="1">{
                executeErrString := executeErr.Error()
                submission.Error = &amp;executeErrString
        }</span>
        <span class="cov8" title="1">submission.Passed = passed
        if err = s.tasksSubmissionsRepository.Create(ctx, submission); err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov8" title="1">return out, executeErr</span>
}

func (s *service) runTestsCases(ctx context.Context, task *entity.PracticalTask, submission *entity.TaskSubmission) (string, error) <span class="cov0" title="0">{
        testCases, err := s.testCasesRepository.GetByTaskID(ctx, task.ID.String())
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov0" title="0">var (
                executeErr error
                passed     = true
                output     string
        )
        for _, testCase := range testCases </span><span class="cov0" title="0">{
                output, executeErr = s.taskExecutorClient.ExecuteTestCase(ctx, submission.Input, testCase.Input, task.Language)
                if executeErr != nil </span><span class="cov0" title="0">{
                        executeErrString := executeErr.Error()
                        submission.Error = &amp;executeErrString
                        passed = false
                        break</span>
                }
                <span class="cov0" title="0">if output != testCase.ExpectedOutput </span><span class="cov0" title="0">{
                        executeErr = ErrOutputNotEqual
                        executeErrString := executeErr.Error()
                        submission.Error = &amp;executeErrString
                        executeErr = ErrOutputNotEqual
                        passed = false
                        break</span>
                }
        }
        <span class="cov0" title="0">submission.Passed = passed
        if err = s.tasksSubmissionsRepository.Create(ctx, submission); err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov0" title="0">return output, executeErr</span>
}
</pre>
		
		<pre class="file" id="file105" style="display: none">package users

// nolint
type Service interface {
}

type service struct {
}

func NewService() Service <span class="cov0" title="0">{
        return &amp;service{}
}</span>
</pre>
		
		<pre class="file" id="file106" style="display: none">package util

import "golang.org/x/crypto/bcrypt"

type Hasher interface {
        Hash(password string) (string, error)
        CheckPassword(hashedPassword, password string) error
}

type hasher struct{}

func NewHasher() Hasher <span class="cov0" title="0">{
        return &amp;hasher{}
}</span>

func (h *hasher) Hash(password string) (string, error) <span class="cov0" title="0">{
        hashedPassword, err := bcrypt.GenerateFromPassword([]byte(password), bcrypt.DefaultCost)
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov0" title="0">return string(hashedPassword), nil</span>
}

func (h *hasher) CheckPassword(hashedPassword, password string) error <span class="cov0" title="0">{
        return bcrypt.CompareHashAndPassword([]byte(hashedPassword), []byte(password))
}</span>
</pre>
		
		<pre class="file" id="file107" style="display: none">package util

func SlicesEqual[T comparable](a, b []T) bool <span class="cov8" title="1">{
        if len(a) != len(b) </span><span class="cov8" title="1">{
                return false
        }</span>
        <span class="cov8" title="1">for i := range a </span><span class="cov8" title="1">{
                if a[i] != b[i] </span><span class="cov8" title="1">{
                        return false
                }</span>
        }
        <span class="cov8" title="1">return true</span>
}
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
